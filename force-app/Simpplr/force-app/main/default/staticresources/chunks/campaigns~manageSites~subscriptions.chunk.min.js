(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1789:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1),i=n.n(o),l=n(10),u=n.n(l);function c(e){var t=e.children,n=e.layout,a=r.a.Children.toArray(t).filter(function(e){return!!e});if(0===a.length)return!1;var o,i,l,c=u()((o={DefinitionList:!0},i="DefinitionList--".concat(n),l=n,i in o?Object.defineProperty(o,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[i]=l,o));return r.a.createElement("dl",{className:c},a)}c.propTypes={children:i.a.node.isRequired,layout:i.a.oneOf(["stacked","squashed","lined"])},c.defaultProps={layout:null},t.a=c},1790:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n(0),r=n.n(a),o=n(1),i=n.n(o);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m,d,p,b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,s(t).apply(this,arguments))}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.a.PureComponent),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.title,n=e.children,o=e.isBlock,i=e.isHtml;if(!n)return null;var l=i&&"string"==typeof n?r.a.createElement("dd",{className:"DefinitionList-content",dangerouslySetInnerHTML:{__html:n}}):r.a.createElement("dd",{className:"DefinitionList-content"},n),u=r.a.createElement(a.Fragment,null,r.a.createElement("dt",{className:"DefinitionList-title"},t),l);return o?r.a.createElement("div",{className:"DefinitionList-item"},u):u}}])&&u(n.prototype,o),i&&u(n,i),t}();m=b,d="propTypes",p={title:i.a.node.isRequired,children:i.a.node,isBlock:i.a.bool,isHtml:i.a.bool},d in m?Object.defineProperty(m,d,{value:p,enumerable:!0,configurable:!0,writable:!0}):m[d]=p},1804:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1),i=n.n(o),l=n(10),u=n.n(l),c=n(15);function s(e){var t=e.children,n=e.onClick,a=e.hasButton,o=u()({RemovableField:a});return r.a.createElement("div",{className:o},t,a&&r.a.createElement("button",{className:"RemovableField-button",type:"button",onClick:n,tabIndex:-1},r.a.createElement(c.a,{name:"circle-close",sourceSize:"24"})))}s.propTypes={children:i.a.node.isRequired,onClick:i.a.func,hasButton:i.a.bool},s.defaultProps={hasButton:!0},t.a=s},1805:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1),i=n.n(o),l=n(13),u=n(11),c=n(4),s=n(88),f=n(1789),m=n(1790);function d(e){var t=e.segment,n=e.audience,a=e.customFieldLabel,o=e.showAudienceCount,i=e.showMandatory,l=e.isSegmentsEnabled,u=e.showSegment&&l;return u||0!==n.listOfConditions.size?r.a.createElement(f.a,{layout:"squashed"},i&&r.a.createElement("div",{className:"u-marg-b--small"},r.a.createElement(m.a,{title:Object(c.a)("common.subscription")},Object(c.a)("field.mandatory.label"))),u&&r.a.createElement("div",null,r.a.createElement(m.a,{title:"".concat(Object(c.a)("common.segment"),":")},t?t.name:Object(c.a)("all_segments.label"))),n&&n.listOfConditions.map(function(e,t){var n="category"!==e.name?Object(c.a)(e.name):a;return r.a.createElement("div",{key:n},r.a.createElement(m.a,{title:u||t>0?"& ".concat(n,":"):n,key:e.name},e.values.map(function(e){return e.get("name")}).join(", ")))}),o&&r.a.createElement("div",{className:"u-marg-t--small"},r.a.createElement(m.a,{title:Object(c.a)("common.user_plural")},n.get("audienceCount")))):r.a.createElement("strong",null,Object(c.a)("common.everyone_in_org"))}d.propTypes={segment:s.a.segmentLite,audience:s.a.audience.isRequired,showAudienceCount:i.a.bool,showMandatory:i.a.bool,showSegment:i.a.bool,isSegmentsEnabled:i.a.bool},d.defaultProps={showAudienceCount:!1,showMandatory:!1,isSegmentsEnabled:!1,showSegment:!0},t.a=Object(l.connect)(function(e){return{customFieldLabel:Object(u.q)(e,"PEOPLE_CUSTOM_FIELD_SINGULAR"),isSegmentsEnabled:Object(u.D)(e)}})(d)},1814:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return m});var a=n(2),r=n.n(a),o=n(9),i=n(11),l=n(211),u=n(4);function c(e){return e.get("subscriptions")}Object(o.a)([c,function(e,t){return t}],function(e,t){return e.getIn([t,"result"])});function s(e){var t=new r.a.List(["company","department","division","city","state","country"]);return Object(i.q)(e,"PEOPLE_CUSTOM_FIELD_ENABLED")&&(t=t.push("category")),Object(i.q)(e,"profileFields").filter(function(e){return t.includes(e.get("name"))}).map(function(t){return n=t.get("name"),a="category"===t.get("name")?Object(i.q)(e,"PEOPLE_CUSTOM_FIELD_SINGULAR"):Object(u.a)(t.get("name")),o=!t.get("isUserDisplay")||t.get("isUserEditable"),new r.a.Map({value:n,label:a,isDisabled:o});var n,a,o})}var f=Object(o.a)([c,l.c],function(e,t){return t&&t.map(function(t){return e.getIn([t,"result"])}).filter(function(e){return!!e})});function m(e,t){return e.filter(function(e){return"listOfSites"===e.action.itemKey}).groupBy(function(e){return e.action.listOfItems.find(function(e){return e.getIn(["item","id"])===t}).get("status")})}},1832:function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return c});var a=n(2),r=n.n(a),o=n(9);function i(e,t){return e.getIn(["audience","values",t])||new r.a.Map}var l=Object(o.a)([i,function(e,t){return t}],function(e){return e.get("loading",!1)}),u=Object(o.a)([i,function(e,t){return t}],function(e){return e.get("loaded",!1)}),c=Object(o.a)([i,function(e,t){return t}],function(e){return e.get("result")})},1854:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=n(2),r=n.n(a);function o(e,t,n){var a=function(e){return!!e.values&&!!e.values.size};return e.update("listOfConditions",function(e){return n?[]:e.map(function(e){return e.set("values",r.a.fromJS(e.get("values")))}).filter(a).map(function(e){return e.set("values",e.get("values").map(function(n){var a=t.getIn([e.get("name"),"values"]).find(function(e){return e.get("id")===n});return!!a&&{id:a.get("id")===a.get("name")?null:a.get("id"),name:a.get("name")}}).filter(function(e){return!!e}))}).filter(a)})}},1870:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(1),i=n.n(o),l=n(2),u=n.n(l),c=n(13),s=n(61),f=n(53),m=n.n(f),d=n(25),p=n(319),b=n(11),y=n(72),g=n(1814),v=n(1832),O=n(19),h=n(1894),E=n(590),j=n(1246),S=n(562),w=n(431),_=n(4),F=n(1804),C=n(102),N=n(10),I=n.n(N),L=n(43);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function T(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,D(t).apply(this,arguments))}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,s["b"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.fieldName,n=e.options,a=e.values,o=I()({"u-displayFlex":!0}),i=a?a.map(function(e){return{value:e.get("id"),label:e.get("name")}}):new u.a.List;return r.a.createElement("div",{className:o},r.a.createElement(d.Field,{component:w.a,name:"".concat(t,".name"),label:Object(_.a)("common.type"),options:n.toJS(),validate:[L.n]}),r.a.createElement("div",{className:"u-sizeFillAlt u-neg-l--1"},r.a.createElement(d.Field,{component:w.a,name:"".concat(t,".values"),placeholder:Object(_.a)("common.select_placeholder"),options:i.sortBy(function(e){return e.label.toLowerCase()}).toJS(),isMulti:!0})))}}])&&k(n.prototype,a),o&&k(n,o),t}();A.propTypes={fieldName:i.a.string.isRequired,options:m.a.list.isRequired,values:m.a.list.isRequired},A.defaultProps={};var q=A;function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function M(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B,J,H,G=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),M(this,x(t).apply(this,arguments))}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,s["b"]),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.fields,n=e.allConditionFields,a=e.audienceFieldNames,o=e.audienceValues,i=e.isSegmentsEnabled,l=t.map(function(e,n){return t.get(n).name}),u=n.filter(function(e){return!l.includes(e.get("value"))&&!e.get("isDisabled")});return r.a.createElement("div",{className:"u-marg-b--medium"},t.map(function(e,u){var c=l.filter(function(e){return e!==t.get(u).name}),s=a&&a.get(u);if(!s)return null;if(!n.find(function(e){return e.get("value")===s}))return null;var f=n.filter(function(e){return!c.includes(e.get("value"))});return r.a.createElement("div",{key:e},i&&r.a.createElement("div",{className:"u-marg-b--xsmall"},r.a.createElement("div",{className:"TextOnLine"},Object(_.a)("common.and"))),r.a.createElement("div",{className:"u-marg-b--xsmall"},r.a.createElement(F.a,{onClick:function(){return t.remove(u)}},r.a.createElement(q,{fieldName:e,options:f,audienceFieldName:s,values:o.getIn([s,"values"])}))))}),u.size>0&&r.a.createElement("div",{className:"u-marg-t--medium"},r.a.createElement(C.a,{icon:"circle-plus",iconSourceSize:17,fontStyle:"brand",hasCurrentColorIcon:!0,label:Object(_.a)("button_label.add_another"),onClick:function(){return t.push(Object(p.b)({name:u.getIn([0,"value"]),label:u.getIn([0,"label"])}))}})))}}])&&z(n.prototype,a),o&&z(n,o),t}();B=G,J="propTypes",H={segmentId:i.a.string.isRequired,fields:i.a.object.isRequired,allConditionFields:m.a.list,audienceFieldNames:m.a.list,audienceValues:m.a.map.isRequired},J in B?Object.defineProperty(B,J,{value:H,enumerable:!0,configurable:!0,writable:!0}):B[J]=H;var K=n(115);function W(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=function(e){function t(){var e,n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return a=this,r=(e=Y(t)).call.apply(e,[this].concat(i)),n=!r||"object"!==Q(r)&&"function"!=typeof r?$(a):r,ee($($(n)),"resetAudience",function(){var e=n.props,t=e.allConditionFields,a=e.sectionName,r=t.find(function(e){return!e.get("isDisabled")});if(r){var o=new p.a({listOfConditions:new u.a.List([Object(p.b)({name:r.get("value"),label:r.get("label")})])});n.props.updateFormValue("".concat(a,".audience"),o)}}),n}var n,a,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,s["b"]),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.valuesLoaded,n=e.valuesLoading,a=e.segmentId,r=e.isSegmentsEnabled,o=e.canChangeSegment;t||n||this.props.loadValues(a),r&&o&&this.props.loadSegments()}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,a=n.valuesLoaded,r=n.valuesLoading,o=n.segmentId;a||r||this.props.loadValues(o).then(function(){t.resetAudience()}),a&&e.segmentId!==o&&this.resetAudience()}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.description,a=e.isSegmentsEnabled,o=e.allConditionFields,i=e.everyone,l=e.valuesLoaded,u=e.segmentId,c=e.audienceValues,s=e.audienceFieldNames,f=e.size,m=e.sectionName;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{className:"type--h6 type--500 u-marg-b--small"},t),n&&r.a.createElement("div",{className:"u-marg-b--medium"},n),r.a.createElement("div",{className:"u-marg-b--small"},function(e,t){var n=r.a.createElement(d.Field,{component:w.a,name:"".concat(t.sectionName,".segment.segmentId"),label:Object(_.a)("common.segment"),options:t.segmentOptions,isDisabled:!t.canChangeSegment,isRequired:!0});return t.isSegmentsEnabled&&"small"===t.size?n:"small"===e?r.a.createElement(d.Field,{component:S.a,name:"everyone",options:[{label:Object(_.a)("subscription.modal.option_everyone.label"),value:"yes"},{label:Object(_.a)("subscription.modal.option_select_audience.label"),value:"no",isDisabled:0===t.allConditionFields.size}],isStacked:!0,isLight:!0}):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.Field,{component:j.a,name:"everyone",validate:[L.n],isFullWidth:!1,hasLargeIcons:!0,options:[{label:Object(_.a)("campaign.create.audience_option.all_org"),value:"yes",icon:"org"},{label:Object(_.a)("campaign.create.audience_option.audience"),value:"no",icon:"audience"}]}),t.isSegmentsEnabled&&!t.everyone&&r.a.createElement("div",{className:"u-marg-t--xlarge"},n))}(f,this.props)),(a&&"small"===f||!i)&&(l?r.a.createElement(d.FieldArray,{name:"".concat(m,".audience.listOfConditions"),component:G,allConditionFields:o,segmentId:u,audienceFieldNames:s,audienceValues:c,isSegmentsEnabled:a}):r.a.createElement("div",{className:"u-posRelative u-pad--large"},r.a.createElement(K.a,null))))}}])&&X(n.prototype,a),o&&X(n,o),t}();ee(te,"propTypes",{isSegmentsEnabled:i.a.bool,segmentOptions:i.a.arrayOf(i.a.object),canChangeSegment:i.a.bool,allConditionFields:m.a.list,everyone:i.a.bool,valuesLoaded:i.a.bool,segmentId:i.a.string,audienceValues:m.a.map,audienceFieldNames:m.a.list,getFormValue:i.a.func,updateFormValue:i.a.func,size:i.a.oneOf(["small","large"])}),ee(te,"defaultProps",{isSegmentsEnabled:!1,segmentOptions:[],getFormValue:function(){return null},updateFormValue:function(){},size:"small"});t.a=Object(c.connect)(function(e,t){var n=t.getFormValue,a=t.sectionName,r=Object(y.e)(e).map(function(e){return{label:e.name,value:e.segmentId}}),o=[{label:Object(_.a)("all_segments.label_full"),value:"org"}].concat(W(r)),i=n(e,"".concat(a,".audience.listOfConditions"))||new u.a.List,l=(n(e,"".concat(a,".segment"))||{}).segmentId;return{segmentId:l,segmentOptions:o,userSegmentId:Object(O.getCurrentUserSegmentId)(e),allConditionFields:Object(g.a)(e),audienceValues:Object(v.a)(e,l),isSegmentsEnabled:Object(b.D)(e),audienceFieldNames:i.map(function(e){return e.get("name")}),everyone:"yes"===n(e,"everyone"),valuesLoading:Object(v.c)(e,l),valuesLoaded:Object(v.b)(e,l)}},function(e){return{loadValues:function(t){return e(Object(h.a)("org"===t?null:t))},loadSegments:function(){return e(Object(E.c)())}}})(te)},1894:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return r});var a=n(417);function r(t){return function(n){return n({type:a.b,payload:{segmentId:t||"org"}}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Audience.getFieldValues({segmentId:t}).done(function(e){n({type:a.c,payload:{values:e.result.listOfItems,segmentId:t||"org"}})}).fail(function(){n({type:a.a,error:!0,payload:{segmentId:t||"org"}})}).always(e.Simpplr.Loader.hide)}}}).call(this,n(16))}}]);