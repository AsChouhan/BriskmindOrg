(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{1001:function(e,t,n){"use strict";var a=n(5),r=n.n(a),i=n(15),l=n.n(i),c=n(1),o=n.n(c),s=n(0),u=n.n(s);function m(e){var t,n=e.children,a=e.title,i=e.icon,c=e.type,o=e.size,s=e.hasContentStyles,m=e.isContentValidationBox,d=e.button,p=l()((t={InfoBox:!0,"InfoBox--small":"small"===o,"InfoBox--medium":"medium"===o,"InfoBox--large":"large"===o,"theme--before--bg":!c,"theme--after--border":!c},r()(t,"InfoBox--".concat(c),c),r()(t,"isContentValidationBox",m),r()(t,"u-displayFlex",!0),t)),f=l()({"InfoBox-inner":!0,"u-flex-1":!0,"u-pad-l--xxlarge":!!i,Content:s,"Content--small":s}),h=l()({"InfoBox-heading":!0,"type--h6":!0,"u-marg-b--xsmall":!0,"type--500":!0});return u.a.createElement("div",{className:p},u.a.createElement("div",{className:f},a&&u.a.createElement("h3",{className:h},a),i&&u.a.createElement("div",{className:"InfoBox-icon"},i),n),d&&u.a.createElement("div",{className:"InfoBox-button"},d))}m.propTypes={title:o.a.string,icon:o.a.node,type:o.a.oneOf(["brand","positive","negative","warning","neutral"]),size:o.a.oneOf(["small","medium","large"]),hasContentStyles:o.a.bool,isContentValidationBox:o.a.bool,button:o.a.node,children:o.a.element},m.defaultProps={size:"medium",hasContentStyles:!0,isContentValidationBox:!1},t.a=m},2017:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(139);function r(e,t){var n={people:t.people,site:t.sites,topic:t.topics},r="string"==typeof e,i=r?Object(a.e)(e):e;return[].forEach.call(i.querySelectorAll("[data-token-type]"),(function(e){var t=e.closest(".atwho-inserted"),a=e.getAttribute("data-token-id"),i=e.textContent||e.value||"",l=e.getAttribute("data-token-context");if(l="user"===l?"people":l,(r||document.body.contains(e))&&n[l]){var c=t||e,o=n[l].replace(":text:",encodeURIComponent(i.substring(1))).replace(":".concat(l,"Id:"),a);c.outerHTML='<a href="'.concat(o,'">').concat(i,"</a>")}})),r?i.innerHTML:null}},2582:function(e,t,n){e.exports={definitionList:"DefinitionList-module-definitionList___3BZ_6",title:"DefinitionList-module-title___2Pqwr",content:"DefinitionList-module-content___3au59",seperator:"DefinitionList-module-seperator___5WWW5","seperator--dashed":"DefinitionList-module-seperator--dashed___23ZZb",split:"DefinitionList-module-split___3wNvj",squashed:"DefinitionList-module-squashed___1ksg3",stacked:"DefinitionList-module-stacked___3amYU",lined:"DefinitionList-module-lined____K3g9",item:"DefinitionList-module-item___2-bQd",stackedBorder:"DefinitionList-module-stackedBorder___2w8TJ"}},2583:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var a=n(10),r=n.n(a),i=n(11),l=n.n(i),c=n(12),o=n.n(c),s=n(13),u=n.n(s),m=n(8),d=n.n(m),p=n(5),f=n.n(p),h=n(15),b=n.n(h),g=n(1),v=n.n(g),y=n(0),w=n.n(y),E=n(1004),O=n(2582),j=n.n(O);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var N=function(e){o()(n,e);var t=S(n);function n(){return r()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e,t=this.props,n=t.title,a=t.children,r=t.isBlock,i=t.isHtml,l=t.whiteSpaceNormal,c=b()((e={},f()(e,j.a.item,!0),f()(e,"u-whiteSpaceNormal",l),e));if(!a)return null;var o=i&&"string"==typeof a?w.a.createElement("dd",{className:j.a.content,dangerouslySetInnerHTML:{__html:Object(E.a)(a)}}):w.a.createElement("dd",{className:j.a.content},a),s=w.a.createElement(w.a.Fragment,null,w.a.createElement("dt",{className:j.a.title},n),o);return r?w.a.createElement("div",{className:c},s):s}}]),n}(w.a.PureComponent);f()(N,"propTypes",{title:v.a.node.isRequired,children:v.a.node,isBlock:v.a.bool,isHtml:v.a.bool,whiteSpaceNormal:v.a.bool}),f()(N,"defaultProps",{whiteSpaceNormal:v.a.bool})},2593:function(e,t,n){"use strict";var a=n(5),r=n.n(a),i=n(15),l=n.n(i),c=n(1),o=n.n(c),s=n(0),u=n.n(s),m=n(2582),d=n.n(m);function p(e){var t,n=e.children,a=e.layout,i=u.a.Children.toArray(n).filter((function(e){return!!e}));if(0===i.length)return!1;var c=l()((t={},r()(t,d.a.definitionList,!0),r()(t,d.a[a],a),t));return u.a.createElement("dl",{className:c},i)}p.propTypes={children:o.a.node.isRequired,layout:o.a.oneOf(["stacked","squashed","lined","stackedBorder"])},p.defaultProps={layout:null},t.a=p},2594:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return v}));var a=n(5),r=n.n(a),i=n(0),l=n(18),c=n(166),o=n(243),s=n(596),u=n(478);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){var n=e.result.listOfItems;return t(Object(c.L)(n)),n.map((function(e){return e.id}))}function f(e){var t=d({},e);return"all"===t.type?t.type=void 0:"blog"===t.type&&(t.type="blogpost"),(t.type&&"page"!==t.type||"all"===t.contentSubType)&&(t.contentSubType=void 0),"all"===t.status&&(t.status=void 0),""===t.term&&(t.term=void 0),t}var h=function(t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object(l.useDispatch)(),r=Object(i.useCallback)((function(e){return e.map(c.V).map(a)}),[]);return t(d({endpoint:e.Simpplr.Salesforce.Content.search,resultExtractor:p,itemSelector:o.j,itemName:"content",requestTransformer:f,onRemove:r},n))}},b=h(n(275).a);t.a=b;var g=h(u.a),v=h(s.a)}).call(this,n(27))},2600:function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(0),l=n.n(i),c=n(18),o=n(21);function s(e){var t=e.message;return l.a.createElement("div",{className:"ErrorPage ErrorPage--fixed"},l.a.createElement("div",{className:"ErrorPage-inner"},l.a.createElement("div",{className:"ErrorPage-iconContainer u-marg-b--medium"},l.a.createElement(o.a,{isLegacy:!0,name:"alert"})),l.a.createElement("h4",{className:"type--h1"},t)))}s.propTypes={message:r.a.string.isRequired};var u=s,m=n(167),d=n(3);function p(e){var t=e.children;return"mobile"===e.viewport?l.a.createElement("div",{className:"u-sm-show"},l.a.createElement(u,{message:Object(d.a)("common.page_not_available_on_mobile")})):t||null}p.propTypes={children:r.a.oneOfType([r.a.arrayOf(r.a.element),r.a.element])};t.a=Object(c.connect)((function(e){return{viewport:Object(m.a)(e)}}))(p)},2603:function(e,t,n){e.exports={carouselItem:"CarouselItem-module-carouselItem___2c28F",mediaContainer:"CarouselItem-module-mediaContainer___nRlpJ",hasPortraitMedia:"CarouselItem-module-hasPortraitMedia___JD2bl",media:"CarouselItem-module-media___2ijP9",stampContainer:"CarouselItem-module-stampContainer___o3yOv",Stamp:"CarouselItem-module-Stamp___314OB",wide:"CarouselItem-module-wide___10znb",info:"CarouselItem-module-info___2Z1uh",fullHeight:"CarouselItem-module-fullHeight___10hdo",event:"CarouselItem-module-event___5Gb3N",infoBrand:"CarouselItem-module-infoBrand___FS-73",infoAlbum:"CarouselItem-module-infoAlbum___1beP-",infoMetaContainer:"CarouselItem-module-infoMetaContainer___3efuJ",infoWide:"CarouselItem-module-infoWide___CJ0xZ"}},2611:function(e,t,n){"use strict";var a=n(5),r=n.n(a),i=n(0),l=n.n(i),c=n(18),o=n(1997),s=n(30);t.a=function(e,t){return Object(c.connect)((function(t){return r()({},e,Object(s.getCurrentUserPermissions)(t).get(e))}))((function(n){return n[e]?l.a.createElement(t,n):l.a.createElement(o.a,null)}))}},2617:function(e,t,n){"use strict";(function(e){n.d(t,"k",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"d",(function(){return w})),n.d(t,"l",(function(){return E})),n.d(t,"o",(function(){return O})),n.d(t,"a",(function(){return j})),n.d(t,"g",(function(){return S})),n.d(t,"m",(function(){return N})),n.d(t,"j",(function(){return _})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return R})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return k})),n.d(t,"f",(function(){return C})),n.d(t,"n",(function(){return P}));var a=n(37),r=n(61),i=n(14),l=n(66),c=n(156),o=n(406),s=n(2635),u=n(32),m=n(88),d=n(26),p=n(164),f=n(90),h=n(3);function b(e,t,n,a){var r=a.status,l=r!==t,o=a.site&&!a.site.isActive;if(l||o){var s=Object(h.a)("common.not_possible_to_perform_action");return l&&("sent"===r?s+=" - ".concat(Object(h.a)("newsletter.action.already_sent.error_flash")):"deleted"===r?s+=" - ".concat(Object(h.a)("newsletter.action.already_deleted.error_flash")):"on_hold"===r?s+=" - ".concat(Object(h.a)("newsletter.action.on_hold.error_flash")):"draft"===r&&(s+=" - ".concat(Object(h.a)("newsletter.action.being_edited.error_flash")))),n(Object(i.f)(s)),n(g(a)),n({type:c.d,payload:{newsletterId:e}}),Object(f.e)({pathname:"/newsletter"}),!1}return!0}function g(e){return{type:c.D,payload:{newsletterId:e.newsletterId,result:e}}}function v(e){return Array.isArray(e)?function(t){e.forEach((function(e){return t(g(e))}))}:g(e)}function y(t){return function(n){n({type:c.p,payload:{newsletterId:t}}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Newsletter.get(t).done((function(e){n({type:c.q,payload:{newsletterId:t,result:e.result}})})).fail((function(e){var a=Object(d.a)(e);n(Object(i.f)(a)),n({type:c.o,error:a,payload:{newsletterId:t}})})).always(e.Simpplr.Loader.hide)}}function w(){return function(t){t({type:c.m}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Site.search({filter:"canCreateNewsletter",size:999999}).done((function(e){t({type:c.n,payload:{result:e.result}})})).fail((function(e){var n=Object(d.a)(e);t(Object(i.f)(n)),t({type:c.l,error:n})})).always(e.Simpplr.Loader.hide)}}function E(t,n,a,r,l,o,s){return function(u){return a||l||o?(e.Simpplr.Loader.show(),a?e.Simpplr.Salesforce.Site.get(a).done((function(e){u({type:c.E,payload:{newsletterId:t,recipient:n,membersType:s,site:e.result}})})).fail((function(e){var t=Object(d.a)(e);u(Object(i.f)(t)),u({type:c.l,error:t})})).always(e.Simpplr.Loader.hide):o?e.Simpplr.Salesforce.Segment.get(o).done((function(e){u({type:c.E,payload:{newsletterId:t,recipient:n,membersType:s,segment:e.result}})})).fail((function(e){var t=Object(d.a)(e);u(Object(i.f)(t)),u({type:c.k,error:t})})).always(e.Simpplr.Loader.hide):e.Simpplr.Salesforce.Audience.get(l).done((function(e){u({type:c.E,payload:{newsletterId:t,recipient:n,membersType:s,audience:e.result}})})).fail((function(e){var t=Object(d.a)(e);u(Object(i.f)(t)),u({type:c.j,error:t})})).always(e.Simpplr.Loader.hide)):(u({type:c.E,payload:{newsletterId:t,recipient:n,numberOfOrgUsers:r}}),Promise.resolve({}))}}function O(t,n,r){return function(l){var c;return!(!(c=r?n.get("imgLandscapeFile"):n.get("imgFile"))||!Object(s.a)(n))&&(l(Object(a.startSubmit)(t)),e.Simpplr.Salesforce.Newsletter.uploadImageToAWS(c.get("contentVersionId")).fail((function(e){var t=Object(d.a)(e);l(Object(i.f)(t))})).always((function(){l(Object(a.stopSubmit)(t))})))}}function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(r){r(Object(a.arrayPush)(e,"items",new o.a({id:"temp".concat(Object(p.a)()),type:t,content:n})))}}function S(t,n){return function(a){return a({type:c.s,payload:{newsletterId:t,data:n}}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Newsletter.saveDraft(n.toJS()).done((function(e){a(Object(i.j)(Object(h.a)("newsletter.action.save_draft.success_flash"))),a({type:c.t,payload:{newsletterId:e.result.newsletterId,result:e.result,data:n}})})).fail((function(e){var n=Object(d.a)(e);a(Object(i.f)(n)),e.result&&a(g(e.result)),a({type:c.r,payload:{newsletterId:t,error:n}})})).always(e.Simpplr.Loader.hide)}}function N(t,n,a){return function(r){return r({type:c.G,payload:{newsletterId:t}}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Newsletter.update(t,n.toJS()).done((function(e){var l=!0===a?Object(h.a)("newsletter.action.save.success_flash"):Object(h.a)("newsletter.action.update.success_flash");r(Object(i.j)(l)),r({type:c.H,payload:{newsletterId:t,result:e.result,data:n}})})).fail((function(e){var n=Object(d.a)(e);r(Object(i.f)(n)),e.result&&r(g(e.result)),r({type:c.F,newsletterId:t,error:n})})).always(e.Simpplr.Loader.hide)}}function _(t,n,a){return function(r){return r({type:c.B,payload:{data:n}}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Newsletter.sendPreview(t,n.toJS(),a).done((function(e){r(Object(i.j)(Object(h.a)("newsletter.action.send_preview.success_flash"))),r({type:c.C,payload:{newsletterId:t,result:e.result,data:n}})})).fail((function(e){var n=Object(d.a)(e);r(Object(i.f)(n)),e.result&&r(g(e.result)),r({type:c.A,payload:{newsletterId:t,error:n}})})).always(e.Simpplr.Loader.hide)}}function I(t,n){return function(a){return a({type:c.v,payload:{newsletterId:t}}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Newsletter.schedule(t,n.toJS()).done((function(e){var r=Object(u.j)(n.get("sendAt")),o=Object(h.a)("newsletter.action.schedule.success_flash",{date:r.format(Object(u.o)(l.g))});a(Object(i.j)(o)),a({type:c.w,payload:{newsletterId:t,result:e.result,data:n}})})).fail((function(e){var n=Object(d.a)(e);a(Object(i.f)(n)),e.result&&a(g(e.result)),a({type:c.u,payload:{newsletterId:t,error:n}})})).always(e.Simpplr.Loader.hide)}}function R(t,n){return function(a){return a({type:c.y,newsletterId:t}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Newsletter.sendNow(t,n).done((function(e){b(t,"sent",a,e.result)&&(a(Object(i.j)(Object(h.a)("newsletter.action.send.success_flash"))),a({type:c.z,payload:{newsletterId:t,result:e.result}}))})).fail((function(e){var n=Object(d.a)(e);a(Object(i.f)(n)),e.result&&a(g(e.result)),a({type:c.x,payload:{newsletterId:t,error:n}})})).always(e.Simpplr.Loader.hide)}}function x(t){return function(n){return n({type:c.b,payload:{newsletterId:t}}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Newsletter.delete(t).done((function(){n(Object(i.j)(Object(h.a)("newsletter.action.delete.success_flash"))),n({type:c.c,payload:{newsletterId:t}})})).fail((function(e){var a=Object(d.a)(e);n(Object(i.f)(a)),n({type:c.a,payload:{newsletterId:t,error:a}})})).always(e.Simpplr.Loader.hide)}}function k(t){return function(n){return n({type:c.e,payload:{newsletterId:t}}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Newsletter.edit(t).then((function(e){if(b(t,"draft",n,e.result)){var a=n({type:c.f,payload:{newsletterId:t}});return n(g(e.result)),a}return!1})).fail((function(e){var t=Object(d.a)(e);n(Object(i.f)(t)),e.result&&n(g(e.result)),n({type:c.d,payload:t,error:!0})})).always(e.Simpplr.Loader.hide)}}function C(){return function(t){return t({type:c.h}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Utility.getFromAddresses().then((function(e){t({type:c.i,payload:{fromAddresses:e.result.listOfItems}})})).fail((function(e){var n=Object(d.a)(e);t({type:c.g,payload:n,error:!0})})).always(e.Simpplr.Loader.hide)}}function P(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(r.upload)(t,!1,n,{endpoint:e.Simpplr.Salesforce.Newsletter.upload,getFileParams:function(e){return Object(m.b)(e.base64,e.type)}})}}).call(this,n(27))},2635:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return d})),n.d(t,"h",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"g",(function(){return b})),n.d(t,"i",(function(){return g})),n.d(t,"a",(function(){return v}));var a,r=n(4),i=n.n(r),l=n(19),c=n(50),o=function(e){return e.getIn(["newsletter","newsletters"])||new i.a.List},s=Object(l.a)([o],(function(e){return e.map((function(e){return e.get("result")}))})),u=Object(l.a)([o,function(e,t){return t}],(function(e,t){return e.get(t)})),m=function(e,t){return e.getIn(["newsletter","newsletters",t,"result"],new i.a.Map)},d=(Object(l.a)([(a="newsletter",function(e,t){return{loaded:e.getIn([a,t,"loaded"],!1),loading:e.getIn([a,t,"loading"],!1),isFullModel:e.getIn([a,t,"isFullModel"],!1),error:e.getIn([a,t,"error"],null)}}),m],(function(e,t){return Object.assign(e,{newsletter:t})})),Object(l.a)([s,function(e,t){return new i.a.List(t)}],(function(e,t){return t.map((function(t){return e.get(t)})).filter((function(e){return!!e}))})));function p(e){return!!e.find((function(e){return"content"===e.type&&("published"!==e.getIn(["content","status"])||!e.getIn(["content","isTypeActive"],!0)||e.getIn(["content","isDeleted"])||!e.getIn(["content","site","isActive"],!0))}))}function f(e){return!!e.find((function(e){return"content"===e.type&&(e.isShowcase&&e.content.getIn(["imgLandscapeFile","size"])>c.j||!e.isShowcase&&e.content.getIn(["imgFile","size"])>c.j)}))}function h(e){return e.getIn(["newsletter","fromAddresses","result"])||new i.a.List}function b(e){return e.getIn(["newsletter","fromAddresses","loaded"])&&0===h(e).size}function g(e){return e.getIn(["newsletter","fromAddresses","loading"])}function v(e){return"published"===e.get("status")&&!e.get("isDeleted")&&e.get("isTypeActive")&&(!e.get("site")||e.getIn(["site","isActive"]))}},2648:function(e,t,n){"use strict";(function(e){var a=n(16),r=n.n(a),i=n(71),l=n.n(i),c=n(0),o=n.n(c),s=n(53),u=n(2649),m=n(324),d=n(654),p=n(284),f=n(3),h=n(1012),b=n(380);function g(t){var n=t.input,a=t.meta,i=t.isDisabled,c=l()(t,["input","meta","isDisabled"]),g=Object(d.a)(e.Simpplr.Salesforce.Audience.search,{size:9999}),v=g.loading,y=g.loaded,w=g.result,E=Object(m.b)(),O=E.isSegmentManager,j=E.isAppManager,S=O||j,N=y&&!w.listOfItems.length;return o.a.createElement(b.a,r()({input:n,meta:a},c),o.a.createElement(h.a,r()({isLoading:v,options:y&&w.listOfItems.map(p.c)||[],makeOption:function(e){var t=e.audienceId,n=e.name,a=e.audienceCount;return{value:t,label:"".concat(n," (").concat(a,")")}},renderOption:function(e){var t=e.data.item;return o.a.createElement(u.a,{audience:t})}},c,{isDisabled:i||N,value:n.value,onChange:n.onChange,onFocus:n.onFocus,onBlur:function(){return n.onBlur(n.value)}})),N&&o.a.createElement("div",{className:"Field-error"},o.a.createElement("span",null,S?Object(f.a)("audiences.no_list_info",{link:o.a.createElement(s.a,{className:"type--error type--fauxLink--alt",to:"/audiences"})}):Object(f.a)("audiences.no_audience_standard_user_info"))))}g.propTypes={},t.a=g}).call(this,n(27))},2649:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(18),l=n(299),c=n(66),o=n(209),s=n(56),u=n(17),m=n(32),d=n(3);function p(e){var t=e.audience,n=Object(o.h)("peopleCustomFieldSingular"),a=Object(i.useSelector)(u.e),s=t.get("segment")&&"Segment:".concat(t.get("segment").name),p=t.get("listOfConditions")&&t.get("listOfConditions").map((function(e){var t=e.name,r=e.values,i="hireDate"===t&&r[0]?Object(d.a)("hireDateAfter"===r[0].id?"common.date_on_or_after":"common.date_on_or_before",{date:Object(m.e)(r[0].name,c.b)}):r.map((function(e){return e.name})).join(", "),l="category"===t&&n;if(!l){var o=a(t);l=o&&o.singular}return l||(l="hireDate"===t?Object(d.a)("profile_fields.hire_date"):Object(d.a)("profile_fields.".concat(t))),"".concat(l,":").concat(i)})).join(", "),f=t.get("listOfPeople")&&t.get("listOfPeople").map((function(e){return e.name})).join(", "),h=p||f,b=s?"".concat(s,", ").concat(h):h;return r.a.createElement(l.a,null,r.a.createElement("div",{className:"Panel-item"},r.a.createElement("span",{className:"type--500 type--b2"},"".concat(t.get("name")," (").concat(t.get("audienceCount"),")")),r.a.createElement("span",{className:"u-displayBlock type--b4 u-textTruncate"},b)))}p.propTypes={audience:s.a.audience.isRequired},t.a=p},2684:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f}));var a=n(5),r=n.n(a),i=n(24),l=n.n(i),c=n(0),o=n(1336),s=n(2685),u=n(478);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e,t){var n=Object(c.useState)([]),a=l()(n,2),r=a[0],i=a[1];return{filterSites:r,resultExtractor:function(n,a){var r=n.result,l=r.listOfItems,c=r.filterOptions.sites;return a(e(l)),i(c||[]),l.map((function(e){return e[t]}))}}};function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=p(o.j,"alertId"),a=n.resultExtractor,r=n.filterSites,i=Object(u.a)(d({endpoint:e.Simpplr.Salesforce.Alert.search,resultExtractor:a,itemSelector:s.a,itemName:"alerts"},t));return d(d({},i),{},{filterSites:r})}}).call(this,n(27))},2685:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(4),r=n.n(a),i=n(19);function l(e){return e.getIn(["alert","alerts"])}var c=Object(i.a)([l],(function(e){return e.map((function(e){return e.get("result")}))})),o=(Object(i.a)([l,function(e,t){return t}],(function(e,t){return e.get(t)})),Object(i.a)([c,function(e,t){return new r.a.List(t)}],(function(e,t){return t.map((function(t){return e.get(t)})).filter((function(e){return!!e}))})))},2711:function(e,t,n){"use strict";var a=n(5),r=n.n(a),i=n(15),l=n.n(i),c=n(1),o=n.n(c),s=n(0),u=n.n(s),m=n(411),d=n(10),p=n.n(d),f=n(11),h=n.n(f),b=n(7),g=n.n(b),v=n(12),y=n.n(v),w=n(13),E=n.n(w),O=n(8),j=n.n(O),S=n(53),N=n(595),_=n(266),I=n(2603),R=n.n(I);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var k=function(e){y()(n,e);var t=x(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).wrapper=null,a.handle=null,a.ro=null,a.initWrapper=a.initWrapper.bind(g()(a)),a.calculateMaxLengths=a.calculateMaxLengths.bind(g()(a)),a}return h()(n,[{key:"componentDidMount",value:function(){var e=this;this.calculateMaxLengths(),this.ro=new N.default((function(){e.calculateMaxLengths()})),this.ro.observe(this.wrapper)}},{key:"componentDidUpdate",value:function(){this.calculateMaxLengths()}},{key:"componentWillUnmount",value:function(){this.ro.disconnect(),clearTimeout(this.handle)}},{key:"initWrapper",value:function(e){this.wrapper=e}},{key:"calculateMaxLengths",value:function(){var e=this;this.wrapper&&(this.handle=window.setTimeout((function(){if(e.wrapper){var t=e.wrapper.querySelector("[data-carousel-item-info]"),n=e.wrapper.querySelector("[data-carousel-item-meta]"),a=n?n.offsetHeight-1:0,r=e.wrapper.querySelector("[data-carousel-item-info-title]"),i=e.wrapper.querySelector("[data-carousel-item-summary]");r&&(r.textContent=e.props.title),i&&(i.textContent=e.props.summary);for(var l=0;l<100;l+=1){var c=t.scrollHeight||t.offsetHeight;if(!e.wrapper||c<=e.wrapper.offsetHeight-30-a)return;i&&i.offsetHeight>0&&(i.textContent=i.textContent.slice(0,-5),""!==i.textContent&&(i.textContent+="…")),!(r.offsetHeight>0)||i&&i.textContent||(r.textContent=r.textContent.slice(0,-5),""!==r.textContent&&(r.textContent+="…"))}}})))}},{key:"handleClick",value:function(){this.props.onTitleClick(),Object(_.b)("Homepage Feed Viewed")}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.title,i=n.summary,c=(n.onTitleClick,n.to),o=n.url,s=n.meta,m=n.isWide,d=n.isBrand,p=n.isAlbum,f=n.showSummary,h=n.stampList,b=l()((e={},r()(e,R.a.info,!0),r()(e,R.a.infoAlbum,p),r()(e,R.a.infoBrand,d&&!m),r()(e,"theme--bg",d&&!m),r()(e,R.a.infoWide,m),e)),g=l()({"type--title":!0,"type--white":d&&!m});return u.a.createElement("div",{className:b,ref:this.initWrapper},u.a.createElement("div",{"data-carousel-item-info":!0},h,a&&u.a.createElement("h2",{className:"type--h5 u-marg-b--small u-cursorPointer"},c?u.a.createElement(S.a,{to:c,className:g,onClick:function(e){return t.handleClick(e)},"data-carousel-item-info-title":!0},a):u.a.createElement("a",{href:o,className:g,onClick:function(e){return t.handleClick(e)},"data-carousel-item-info-title":!0},a)),i&&f&&u.a.createElement("div",{"data-carousel-item-summary":!0},u.a.createElement("p",null,i))),s&&u.a.createElement("div",{className:R.a.infoMetaContainer,"data-carousel-item-meta":!0},s))}}]),n}(u.a.Component);r()(k,"propTypes",{title:o.a.string,summary:o.a.string,onTitleClick:o.a.func,to:o.a.string,url:o.a.string,meta:o.a.element,isWide:o.a.bool,isBrand:o.a.bool,isAlbum:o.a.bool,showSummary:o.a.bool}),r()(k,"defaultProps",{isWide:!1,isBrand:!1,isAlbum:!1,showSummary:!1});var C=k;function P(e){var t,n,a=e.children,i=e.title,c=e.summary,o=e.onTitleClick,s=e.to,d=e.url,p=e.stamp,f=e.meta,h=e.isWide,b=e.isBrand,g=e.isPortrait,v=e.isAlbum,y=e.showSummary,w=e.isFullHeight,E=e.stampList,O=l()((t={},r()(t,R.a.carouselItem,!0),r()(t,R.a.wide,h),r()(t,R.a.hasPortraitMedia,g),r()(t,R.a.event,b),r()(t,R.a.fullHeight,w),t)),j=l()((n={},r()(n,R.a.mediaContainer,!0),r()(n,"theme--bg",b),n));return u.a.createElement("div",{className:O},u.a.createElement("div",{className:j},a,p&&u.a.createElement("div",{className:R.a.stampContainer},u.a.createElement(m.a,{text:p,isBrand:!0}))),u.a.createElement(C,{isAlbum:v,isBrand:b,title:i,summary:c,onTitleClick:o,isWide:h,to:s,url:d,meta:f,showSummary:y,stampList:E}))}P.propTypes={title:o.a.string,summary:o.a.string,onTitleClick:o.a.func,to:o.a.string,url:o.a.string,stamp:o.a.string,meta:o.a.element,isWide:o.a.bool,isPortrait:o.a.bool,isAlbum:o.a.bool,showSummary:o.a.bool,isFullHeight:o.a.bool},P.defaultProps={isWide:!1,isPortrait:!1,isAlbum:!1,showSummary:!1,isFullHeight:!1};t.a=P},2763:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var a=n(20),r=n.n(a),i=n(31),l=n.n(i),c=n(34),o=n.n(c),s=n(1252),u=n(3);function m(){return d.apply(this,arguments)}function d(){return(d=o()(r.a.mark((function t(){var n,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(s.b)(e.Simpplr.Salesforce.Utility.getSchedulingSlots);case 2:return n=t.sent,a=n.result,t.abrupt("return",[{value:null,label:Object(u.a)("common.select_placeholder")}].concat(l()(a)));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}).call(this,n(27))},2764:function(e,t,n){"use strict";var a=n(15),r=n.n(a),i=n(22),l=n.n(i),c=n(1),o=n.n(c),s=n(0),u=n.n(s),m=n(66),d=n(32),p=n(3);function f(e){var t=e.isCommaSeperated,n=e.input,a=e.includeTime;if(!n)return null;var i=Object(d.j)(n),l=i.format(m.d),c=i.format(m.j);return t&&(c=", ".concat(c)),a&&(l=i.format(m.b),c=i.format("[".concat(Object(p.a)("common.date_at_time"),"] ").concat(m.q))),u.a.createElement("div",null,l,u.a.createElement("span",{className:r()({"u-displayBlock":!t})},c))}f.propTypes={includeTime:o.a.bool,isCommaSeperated:o.a.bool,input:o.a.oneOfType([o.a.string,o.a.instanceOf(l.a)])},f.defaultProps={includeTime:!1,isCommaSeperated:!1},t.a=f},2772:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));var a=n(1087);function r(e,t){return{type:a.a,name:e,value:t}}function i(){return function(t){e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Analytics.getInstallStats().done((function(e){var n={activeLicenseCount:parseInt(e.result.activeLicenseCount,10)||0,totalLicenseCount:parseInt(e.result.totalLicenseCount,10)||0};Object.keys(n).map((function(e){return t(r(e,n[e]))}))})).always(e.Simpplr.Loader.hide)}}}).call(this,n(27))},2808:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d}));var a=n(5),r=n.n(a),i=n(2617),l=n(2635),c=n(478),o=n(2684);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=u({},e);return"all"===t.filter&&(t.filter=void 0),"any"===t.recipient&&(t.recipient=void 0),t}function d(t){var n=Object(o.b)(i.k,"newsletterId"),a=n.filterSites,r=n.resultExtractor,s=Object(c.a)(u({endpoint:e.Simpplr.Salesforce.Newsletter.search,itemSelector:l.e,itemName:"newsletters",requestTransformer:m,resultExtractor:r},t));return u(u({},s),{},{filterSites:a})}}).call(this,n(27))},3539:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var a=n(2017),r=n(139);function i(e){return"text"===e.type&&!e.text||"heading"===e.type&&!e.heading}function l(e){return"content"===e.type&&e.getIn(["content","site"])?e.mergeIn(["content","site"],{isActive:e.getIn(["content","site","isActive"])}):e}function c(t,n,c,o,s,u){var m=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=t.get("items").filter((function(e){return!m||!i(e)})).map((function(e,t){return e.set("index",t)})).map(l),p=Object(r.c)(Object(a.a)(t.get("introduction"),{people:"".concat(e.Simpplr.Settings.appUrl,"?u=/people/:peopleId:"),sites:"".concat(e.Simpplr.Settings.appUrl,"?u=/site/:siteId:"),topics:"".concat(e.Simpplr.Settings.appUrl,"?u=/topic/:topicId:")}));return p=Object(r.g)(p||"",{p:"margin: 0; margin-bottom: 8px; font-size: 14px; line-height: 21px;",a:"color: #BRANDCOLOR#",strong:"font-weight: bold;",u:"text-decoration: underline;",s:"text-decoration: line-through;",em:"font-style: italic","ul, ol":"margin: 0; padding: 0; margin-bottom: 8px; margin-left: 30px;","ul ul, ul ol, ol ol, ol ul":"margin-top: 4px;",li:"line-height: 22px; font-size: 14px;"}),t.delete("items").delete("bannerFileId").merge({listOfItems:d,recipient:n,site:c,audience:o,segment:s,membersType:u,introductionInlined:p})}}).call(this,n(27))},3540:function(e,t,n){"use strict";(function(e){var a=n(10),r=n.n(a),i=n(11),l=n.n(i),c=n(7),o=n.n(c),s=n(12),u=n.n(s),m=n(13),d=n.n(m),p=n(8),f=n.n(p),h=n(5),b=n.n(h),g=n(4),v=n.n(g),y=n(0),w=n.n(y),E=n(18),O=n(36),j=n(53),S=n(37),N=n(2617),_=n(2772),I=n(55),R=n(2648),x=n(242),k=n(656),C=n(422),P=n(483),L=n(30),T=(n(120),n(17)),A=n(3),D=n(47);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}var B="NEWSLETTER_BUILDER_RECIPIENTS",M=function(t){u()(a,t);var n=F(a);function a(){var e;r()(this,a);for(var t=arguments.length,i=new Array(t),l=0;l<t;l++)i[l]=arguments[l];return e=n.call.apply(n,[this].concat(i)),b()(o()(e),"onSubmit",(function(t){return e.props.setRecipients("_new",t.get("recipient"),t.get("siteId"),e.props.numberOfOrgUsers,t.get("audience")&&t.get("audience").audienceId,"segment"===t.get("recipient")&&e.props.currentSegmentId,"site"===t.get("recipient")&&t.get("membersType")).then((function(){e.props.history.push({pathname:"/newsletter/_new/content"})}))})),e}return l()(a,[{key:"UNSAFE_componentWillMount",value:function(){!this.props.canSendToAll&&this.props.availableSites&&!this.props.availableSites.get("result").size>0&&!this.props.availableSites.get("loaded")&&!this.props.availableSites.get("loading")&&this.props.getAvailableSites(),this.props.canSendToAll&&this.props.loadInstallStats()}},{key:"render",value:function(){var t,n,a,r=this,i=this.props,l=i.canSendToAll,c=i.availableSites,o=i.numberOfOrgUsers,s=i.isAppManager,u=i.isSegmentsEnabled,m=i.currentSegmentName,d=!l&&!c.get("loaded"),p=l&&!o,f=(null===(t=this.props.site)||void 0===t?void 0:t.memberCount)||0,h=f+((null===(n=this.props.site)||void 0===n?void 0:n.followerCount)||0),b=null===(a=this.props.site)||void 0===a?void 0:a.access,g="private"===b||"unlisted"===b,v=[{label:Object(A.a)("newsletter.recipients.audience"),value:"audience",icon:"audience"},{label:Object(A.a)("newsletter.recipients.site_members"),value:"site",icon:"sites"}];return u&&v.unshift({label:Object(A.a)("newsletter.recipients.everyone_in_segment",{segmentName:m}),value:"segment"}),u&&s&&v.unshift({label:Object(A.a)("newsletter.recipients.all_org"),value:"everyone",icon:"org",note:Object(A.a)("common.all_segments")}),u||v.unshift({label:Object(A.a)("newsletter.recipients.all_org"),value:"everyone",icon:"org"}),d||p?null:w.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit),className:this.props.submitting?"is-disabled":""},w.a.createElement("div",{className:"u-pad-tb--xxlarge"},w.a.createElement("div",{className:"row"},w.a.createElement("div",{className:"column small-12 large-centered large-8"},this.props.canSendToAll&&w.a.createElement(w.a.Fragment,null,w.a.createElement("h3",{className:"type--h6 type--title u-marg--small"},Object(A.a)("newsletter.section.recipients"),": *"),w.a.createElement("div",{className:"u-marg-b--mediumlarge"},w.a.createElement(S.Field,{component:u?x.a:k.a,name:"recipient",options:v,hasLargeIcons:!0,isFullWidth:!0,isStacked:!0,isLight:!0}))),"audience"===this.props.recipient&&w.a.createElement(w.a.Fragment,null,w.a.createElement("div",{className:"u-marg-b--mediumlarge"},w.a.createElement(S.Field,{component:R.a,name:"audience",isValueModel:!0,hasLabelAbove:!0,label:Object(A.a)("field.audience_selector.label_above"),placeholder:Object(A.a)("common.select_placeholder_audience"),validate:[D.E],isRequired:!0}))),("site"===this.props.recipient||!this.props.canSendToAll)&&w.a.createElement(w.a.Fragment,null,this.props.canSendToAll?w.a.createElement("div",{className:"u-marg-b--mediumlarge"},w.a.createElement(S.Field,{component:P.a,name:"siteId",id:"siteId",hasLabelAbove:!0,label:Object(A.a)("common.site"),defaultParams:{filter:"canCreateNewsletter"},placeholder:Object(A.a)("common.search_placeholder"),onSelect:function(e,t){r.props.change("site",t)},isRequired:!0})):w.a.createElement("div",{className:"u-marg-b--mediumlarge"},w.a.createElement(S.Field,{component:C.a,name:"siteId",id:"siteId",label:Object(A.a)("field.site_selector.label_above"),isRequired:!0,hasLabelAbove:!0,placeholder:Object(A.a)("common.select_placeholder"),options:this.props.availableSites.get("result").map((function(e){return{value:e.get("id"),label:e.get("name"),id:e.get("id"),name:e.get("name"),img:e.get("img"),isPrivate:e.get("isPrivate"),isPublic:e.get("isPublic"),isListed:e.get("isListed"),url:e.get("url"),access:e.get("access"),followerCount:e.get("followerCount"),memberCount:e.get("memberCount")}})).toArray(),renderOption:function(t){return e.Simpplr.templates.site_selector_result({id:t.id||null,name:t.name,img:t.siteImg||t.img||null,isPrivate:!0===t.isPrivate,isPublic:!0===t.isPublic,isListed:!0===t.isListed,url:t.url})},onSelect:function(e,t){r.props.change("site",t)}})),this.props.site&&!g&&w.a.createElement(w.a.Fragment,null,w.a.createElement("p",{className:"u-marg-b--small type--500 type--h6"},Object(A.a)("site.member_plural")),w.a.createElement("div",{className:"u-marg-b--medium"},w.a.createElement(S.Field,{component:x.a,name:"membersType",options:[{label:Object(A.a)("common.site_members_and_followers"),value:"site_members_and_followers",note:h},{label:Object(A.a)("common.site_members"),value:"site_members",note:f}],isRequired:!0,isStacked:!0,isLight:!0}))))))),w.a.createElement("div",{className:"Strip"},w.a.createElement(j.a,{to:"/newsletter",className:"Strip-cancel"},Object(A.a)("button_label.cancel")),w.a.createElement(I.a,{label:Object(A.a)("button_label.next"),type:"submit",disabled:!this.props.valid,appearance:"brand",size:"large"})))}}]),a}(w.a.Component),U=Object(S.formValueSelector)(B);t.a=Object(O.k)(Object(E.connect)((function(e){var t=e.getIn(["currentUser","permissions","canSendNewsletterToAll"]),n=Object(L.isCurrentUserAppManager)(e),a=Object(T.V)(e);return{isAppManager:n,isSegmentManager:Object(L.isCurrentUserSegmentManager)(e),isSegmentsEnabled:a,canSendToAll:t,currentSegmentId:Object(L.getCurrentUserSegmentId)(e),currentSegmentName:Object(L.getCurrentUserSegmentName)(e),recipient:U(e,"recipient"),numberOfOrgUsers:e.getIn(["statistics","activeLicenseCount"],0),site:U(e,"site")||e.getIn(["newsletter","newsletters","_new","site"]),siteId:U(e,"siteId")||e.getIn(["newsletter","newsletters","_new","site","id"]),availableSites:e.getIn(["newsletter","availableSites"],new v.a.Map({loading:!1,loaded:!1,result:new v.a.List})),initialValues:{recipient:t?null:"site",membersType:U(e,"membersType")||"site_members"}}}),(function(e){return{getAvailableSites:function(){return e(Object(N.d)())},loadInstallStats:function(){return e(Object(_.a)())},setRecipients:function(t,n,a,r,i,l,c){return e(Object(N.l)(t,n,a,r,i,l,c))}}}))(Object(S.reduxForm)({form:B,validate:function(e){var t={};return e.get("recipient")||(t.recipient=Object(A.a)("newsletter.form_error.select_recipient")),"site"!==e.get("recipient")||e.get("siteId")||(t.siteId=Object(A.a)("newsletter.form_error.select_site")),t}})(M)))}).call(this,n(27))},381:function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(0),l=n.n(i),c=n(69),o=n.n(c),s=n(151),u=n(66),m=n(32);function d(e){var t=e.name,n=e.item,a=e.children,r=e.width,i=e.textAlign,c=e.hasExtraPadding,o=e.hasSmallPadding,d=e.hasTextTruncate,p=e.formatAs,f=e.whiteSpaceNormal,h=null;if(a)h=a(n);else{var b=Array.isArray(t)?t:t.split(".");h=n.getIn(b),"date"===p?h=Object(m.e)(h,Object(m.o)(u.b)):"dateTime"===p&&(h=Object(m.e)(h,Object(m.o)(u.g)))}return l.a.createElement(s.a,{width:r,textAlign:i,hasExtraPadding:c,hasSmallPadding:o,hasTextTruncate:d,whiteSpaceNormal:f},h)}d.propTypes={width:r.a.oneOfType([r.a.string,r.a.number]),name:r.a.string,children:r.a.func,item:r.a.oneOfType([o.a.iterable,r.a.shape({})]),textAlign:s.a.propTypes.textAlign,hasExtraPadding:s.a.propTypes.hasExtraPadding,whiteSpaceNormal:s.a.propTypes.whiteSpaceNormal,hasSmallPadding:s.a.propTypes.hasSmallPadding,hasTextTruncate:s.a.propTypes.hasTextTruncate,formatAs:r.a.oneOf(["date","dateTime"])},d.defaultProps={width:null},t.a=d},4074:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(36),l=n(190),c=n(544),o=n(20),s=n.n(o),u=n(34),m=n.n(u),d=n(10),p=n.n(d),f=n(11),h=n.n(f),b=n(7),g=n.n(b),v=n(12),y=n.n(v),w=n(13),E=n.n(w),O=n(8),j=n.n(O),S=n(5),N=n.n(S),_=n(18),I=n(2617),R=n(70),x=n(129),k=n(1),C=n.n(k),P=n(15),L=n.n(P),T=n(53),A=n(21),D=n(272);function F(e){var t=e.step,n=e.currentStep,a=e.stepIndex,i=n>a,l=n===a,c=!i&&!l,o=L()({"Steps-item":!0,"type--500":i||l,"is-disabled":c}),s=L()({"Steps-circle":!0,"theme--fill":i,"theme--color":i||l}),u=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:s},r.a.createElement("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("circle",{cx:"50",cy:"50",r:"40",strokeWidth:"10"})),i&&r.a.createElement(A.a,{name:"check",sourceSize:20})),r.a.createElement("div",{className:"Steps-name"},t.name));return r.a.createElement("li",{className:o},t.url?r.a.createElement(T.a,{to:"/",className:"Steps-link"},u):r.a.createElement("div",{className:"Steps-link"},u),0!==a&&r.a.createElement("div",{className:"Steps-barContainer","aria-hidden":"true"},r.a.createElement(D.a,{height:2,value:c?0:100})))}F.propTypes={children:C.a.node,description:C.a.string};var B=F;function M(e){var t=e.steps,n=e.currentStep;return r.a.createElement("nav",{className:"Steps"},r.a.createElement("div",{className:"Steps-inner"},r.a.createElement("ul",{className:"Steps-list"},t.map((function(e,t){return r.a.createElement(B,{key:e.name,step:e,currentStep:n,stepIndex:t})})))))}M.propTypes={steps:C.a.arrayOf(C.a.shape({name:C.a.string,url:C.a.string})),currentStep:C.a.number};var U=M,q=n(2600),z=n(3539),W=n(4),H=n.n(W),V=n(37),J=n(14),Z=n(165),G=n(24),K=n.n(G),Q=n(94),X=n(496),Y=n(454),$=n(1183),ee=n(2010),te=n(52),ne=n(88);function ae(e,t){return new Promise((function(n,a){var r=new Image;r.onload=function(){(t||n)({width:r.width,height:r.height})},r.onerror=function(){a()},r.src=e}))}function re(e){return e instanceof File?new Promise((function(t){!function(e,t){var n=new FileReader;n.onload=function(){return ae(n.result,t)},n.readAsDataURL(e)}(e,t)})):ae(e)}var ie=n(97),le=n(3),ce=n(158);function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var se="newsletter-banner-image",ue=320,me=2048e3,de=function(e){y()(n,e);var t=oe(n);function n(){var e;p()(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),N()(g()(e),"state",{imageDataUrl:null,isImageDataUrlPending:!1,imageName:null}),N()(g()(e),"onCrop",(function(t){e.props.upload(t.banner,e.state.imageName,e.props.idSetter),e.setState({imageDataUrl:t.banner,imageName:null})})),N()(g()(e),"selectNewImage",(function(t){re(t).then((function(n){var a=n.width,r=n.height;return a<ue||r<ue?e.props.addDimensionsWarningAlert():(e.setState({imageDataUrl:null,isImageDataUrlPending:!0},e.props.openCropperModal),Object(ce.f)()&&t.size>me?Object(ie.resizeImageForUpload)(t,1080,1/0).then((function(n){e.setState({imageDataUrl:n,isImageDataUrlPending:!1,imageName:t.name})})):Object(ne.g)(t).then((function(n){var a=K()(n,1)[0];e.setState({imageDataUrl:a,isImageDataUrlPending:!1,imageName:t.name})})))}))})),N()(g()(e),"selectExistingImage",(function(t){e.props.idSetter(null),Object(ie.fileToDataUrl)(t).then((function(n){return e.selectNewImage(n,!0,t)}))})),e}return h()(n,[{key:"render",value:function(){var e=this.props,t=e.onRemove,n=e.fileId,a=e.siteId,i=e.localImg,l=this.state,c=l.imageDataUrl,o=l.isImageDataUrlPending;return n||i?r.a.createElement("div",{className:"u-posRelative ImageOptions-trigger"},r.a.createElement("div",{className:"ImageOptions ImageOptions--small"},r.a.createElement("button",{className:"ImageOptions-button",type:"button",onClick:t},r.a.createElement(A.a,{isLegacy:!0,name:"delete"}))),n?r.a.createElement(Y.a,{fileId:n}):r.a.createElement($.a,{img:c||i})):r.a.createElement("div",{className:"u-marg-b--medium u-posRelative"},r.a.createElement(X.a,{fileType:"image",size:"large",onUpload:this.selectNewImage,onSelect:this.selectExistingImage,maximumUploadFilesize:10485760,hasIntranetOption:!0,helperText:Object(le.a)("newsletter.dropzone.note"),mediaManagerId:"content-cover-image",directionsText:Object(le.a)("content.edit.add_cover_image"),mediaManagerProps:{fileType:"image",title:Object(le.a)("newsletter.dropzone.media_manager_title"),defaultSiteId:a},isOptional:!0,ignoreUploadPermissions:!0}),r.a.createElement(ee.a,{id:se,img:c,isImgPending:o,title:Object(le.a)("newsletter.dropzone.modal_title"),onCrop:this.onCrop,crops:[{id:"banner",aspectRatio:1.7777777777777777,label:Object(le.a)("newsletter.dropzone.modal_label"),minWidth:568,maxWidth:568}]}))}}]),n}(r.a.PureComponent);N()(de,"propTypes",{img:C.a.string,siteId:C.a.string,onCrop:C.a.func,onRemove:C.a.func.isRequired,onUrlChange:C.a.func.isRequired});var pe=Object(_.connect)(null,(function(e,t){return{addDimensionsWarningAlert:function(){return e(Object(J.f)(Object(le.a)("newsletter.danger_flash.image_too_small",{minSize:ue})))},openCropperModal:function(){return e(Object(Q.open)(te.L,se))},upload:function(n,a,r){return e(Object(I.n)(Object(ie.getParamsForImageUpload)(a,n),r)).then((function(e){e.jqXhr.then((function(e){t.onUrlChange(e.get("url"))}))}))}}}))(de),fe=n(55),he=n(220),be=n(2003),ge=n(69),ve=n.n(ge),ye=n(81),we=n(16),Ee=n.n(we),Oe=n(1999),je=n(657),Se=n(854),Ne=n(858),_e=n(856),Ie=n(2711),Re=n(2603),xe=n.n(Re),ke=n(168);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var Pe=function(e){y()(n,e);var t=Ce(n);function n(){return p()(this,n),t.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.onClick;return r.a.createElement("div",{className:"NewsletterBuilderItem NewsletterBuilderItem--missing NewsletterBuilderItem-spacer"},n&&r.a.createElement("button",{type:"button",className:"NewsletterBuilderItem-close",onClick:n},r.a.createElement(A.a,{name:"cross",sourceSize:"20"})),r.a.createElement("div",{className:"NewsletterBuilderItem-main"},r.a.createElement("h4",{className:"type--h5 type--500"},Object(le.a)("newsletter.builder.missing_content.title")),r.a.createElement("p",{className:"type--secondary"},t?Object(le.a)("newsletter.builder.missing_content.description",{title:t}):Object(le.a)("newsletter.builder.missing_content_title.description"))))}}]),n}(r.a.PureComponent);N()(Pe,"propTypes",{title:C.a.string.isRequired,onClick:C.a.func});var Le=Pe,Te=n(2635);function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var De=function(e){y()(n,e);var t=Ae(n);function n(){return p()(this,n),t.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var e,t,n=this.props,a=n.item,i=n.onRemove,l=a.content,c=l.get("imgLandscape")||l.getIn(["site","img"]);if(!Object(Te.a)(a.content))return r.a.createElement(Le,{title:a.content.get("title"),onClick:i});if(a.isShowcase){var o=!!c&&"url(".concat(c,")");return"event"===l.get("type")?(t=r.a.createElement("a",{href:l.get("url"),className:xe.a.media,style:{backgroundImage:o}},!o&&r.a.createElement("div",{className:"theme--bg u-posFit"},r.a.createElement(_e.a,{isPlain:!0,input:l.get("startsAt"),timezoneIso:l.get("timezoneIso"),isAllDay:l.get("isAllDay")}))),e=r.a.createElement(Se.a,{startsAt:l.get("startsAt"),endsAt:l.get("endsAt"),timezoneIso:l.get("timezoneIso"),timezoneName:l.get("timezoneName"),timezoneOffset:l.get("timezoneOffset"),isAllDay:l.get("isAllDay"),isMultiDay:l.get("isMultiDay"),showTimeForSingleDay:!0,showTimeForMultiDay:!0,showTimeZone:!1,isStacked:!0,isEventPreview:!1,isNewsletterEventPreview:!0})):(t=r.a.createElement("a",{href:l.get("url"),className:"u-displayBlock"},r.a.createElement(ke.a,{aspectRatio:"landscape",img:c,className:xe.a.media,alt:"",size:"538px"})),e=r.a.createElement(je.a,{publishAt:l.get("publishAt"),createdAt:l.get("createdAt"),modifiedAt:l.get("modifiedAt"),site:l.get("site"),authoredBy:l.get("authoredBy"),showSite:!0,isTruncated:!1})),r.a.createElement("div",{className:"NewsletterBuilderItem-spacer"},r.a.createElement(Ie.a,{stampList:r.a.createElement("div",{className:"ListingItem-type u-hideIfEmpty"},Object(le.a)("common.".concat(l.get("type")))," ",r.a.createElement(Ne.a,{content:l})),title:l.get("title"),summary:l.get("summary")||l.get("excerpt"),isFullHeight:!0,meta:e,showSummary:!0},t))}return r.a.createElement("div",{className:"NewsletterBuilderItem-spacer"},r.a.createElement(Oe.a,{element:"div",size:"large",isSingleLineDescription:!1,isSingleLineTitle:!1,content:l,excerpt:l.get("description"),truncateDescription:96,showImageForEvent:!0,canShowDateForSingleDay:!!l.get("img"),hasSiteImageFallback:!0,isEventPreview:!1,isNewsletterEventPreview:!0,hideMeta:"event"===l.get("type")}))}}]),n}(ye.b),Fe=n(1003),Be=n(227);function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var Ue=function(e){y()(n,e);var t=Me(n);function n(){return p()(this,n),t.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var e=this.props,t=e.index,n=e.item,a=e.onMoveToTop,i=e.onMoveToBottom,l=e.onSetShowcase,c=e.onRemoveShowcase,o=e.onRemove,s=e.isLastChild,u=[];return t>0&&u.push(r.a.createElement(Be.a,{key:"moveToTop",label:Object(le.a)("common.move_to_top"),onSelect:a})),s||u.push(r.a.createElement(Be.a,{key:"moveToBottom",label:Object(le.a)("common.move_to_bottom"),onSelect:i})),"content"===n.type&&(n.isShowcase?u.push(r.a.createElement(Be.a,{key:"removeShowcase",label:Object(le.a)("newsletter.builder.standard_layout"),onSelect:c})):u.push(r.a.createElement(Be.a,{key:"setShowcase",label:Object(le.a)("newsletter.builder.showcase_layout"),onSelect:l}))),r.a.createElement(Fe.a,{icon:"more",isImageOverlay:"content"===n.type||"divider"===n.type,isTile:"content"!==n.type||"divider"===n.type,hasArrow:!0,hasLegacyIcon:!1},u,r.a.createElement(Be.a,{label:Object(le.a)("common.remove"),onSelect:o}))}}]),n}(r.a.PureComponent);N()(Ue,"propTypes",{index:C.a.number.isRequired,onMoveToTop:C.a.func.isRequired,onMoveToBottom:C.a.func.isRequired,onSetShowcase:C.a.func.isRequired,onRemoveShowcase:C.a.func.isRequired,onRemove:C.a.func.isRequired,isLastChild:C.a.bool.isRequired});var qe=Ue,ze=n(309),We=n(256),He=n(1017);function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var Je=function(e){y()(n,e);var t=Ve(n);function n(){var e;p()(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),N()(g()(e),"getClickHandler",(function(e,t){return function(n){t(),e(n)}})),e}return h()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.index,a=t.delta,i=t.addItem,l=[{name:Object(le.a)("newsletter.add_button.heading"),icon:"heading",onClick:function(){return i(n+a,"heading")}},{name:Object(le.a)("newsletter.add_button.text"),icon:"text",onClick:function(){return i(n+a,"text")}},{name:Object(le.a)("newsletter.add_button.divider"),icon:"divider",onClick:function(){return i(n+a,"divider")}}];return r.a.createElement(He.a,null,(function(t,n){var a=t.toggle,i=t.deactivate;return r.a.createElement(We.a,{onEscape:i},r.a.createElement("div",{className:L()("NewsletterBuilderAdd",{"is-active":n})},r.a.createElement(ze.a,{eventName:"click",onOutside:i},r.a.createElement("button",{className:"NewsletterBuilderAdd-launcher theme--color",type:"button",onClick:a},r.a.createElement("div",{className:"NewsletterBuilderAdd-launcherIcon"},r.a.createElement(A.a,{name:"plus"}))),r.a.createElement("div",{className:"NewsletterBuilderAdd-panel"},l.map((function(t){return r.a.createElement("button",{onClick:e.getClickHandler(t.onClick,i),className:"NewsletterBuilderAdd-button",type:"button",key:t.icon},r.a.createElement("div",{className:"NewsletterBuilderAdd-iconContainer"},r.a.createElement(A.a,{name:t.icon})),r.a.createElement("div",{className:"NewsletterBuilderAdd-text"},t.name))}))))))}))}}]),n}(r.a.PureComponent);N()(Je,"propTypes",{index:C.a.number,delta:C.a.number,addItem:C.a.func});var Ze=Je;function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var Ke=function(e){y()(n,e);var t=Ge(n);function n(){return p()(this,n),t.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.title,a=e.optionsMenu,i=e.dragHandleFunction,l=e.label,c=e.isHovering,o=L()({NewsletterBuilderItem:!0,"NewsletterBuilderItem--draggable":i,"NewsletterBuilderItem--hovering":c});return r.a.createElement("div",{className:o},r.a.createElement("div",{className:"NewsletterBuilderItem-header"},i&&i(r.a.createElement("span",{className:"DragHandle DragHandle--full","aria-label":Object(le.a)("newsletter.builder.drag_label")})),i&&r.a.createElement("div",{className:"NewsletterBuilderItem-iconContainer"},r.a.createElement(A.a,{name:"move",sourceSize:"28"})),r.a.createElement("h3",{className:"type--500 type--h6"},n," ",l&&r.a.createElement("span",{className:"type--300 type--secondary"},"— ",l)),a&&r.a.createElement("div",{className:"NewsletterBuilderItem-optionsMenu"},a)),i&&r.a.createElement("div",{className:"NewsletterBuilderItem-headerOverlay theme--border","aria-label":Object(le.a)("newsletter.builder.drag_label")}),r.a.createElement("div",{className:"NewsletterBuilderItem-main"},t))}}]),n}(r.a.PureComponent);N()(Ke,"propTypes",{children:C.a.node.isRequired,title:C.a.string.isRequired,optionsMenu:C.a.node,dragHandleFunction:C.a.func}),N()(Ke,"defaultProps",{});var Qe=Ke,Xe=n(50),Ye=n(67),$e=n(73);function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var tt=function(e){y()(n,e);var t=et(n);function n(){return p()(this,n),t.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var e,t=this.props,n=t.children,a=t.optionsMenu,i=t.dragHandleFunction,l=t.url,c=t.isHovering,o=t.onRemove,s=t.item,u=L()({"ImageOptions-trigger":!0,NewsletterBuilderItem:!0,"NewsletterBuilderItem--content":!0,"NewsletterBuilderItem--hovering":c});if(s&&s.isShowcase){var m=s.content.getIn(["imgLandscapeFile","size"]);e=m&&m>Xe.j}else if(s){var d=s.content.getIn(["imgFile","size"]);e=d&&d>Xe.j}return e&&Object($e.b)(Ye.eb),r.a.createElement(r.a.Fragment,null,e&&r.a.createElement("div",{className:"NewsletterBuilderItem--error type--h6 type--white"},Object(le.a)("newsletter.builder.large_cover_image.info"),r.a.createElement("button",{type:"button",className:"NewsletterBuilderItem-close",onClick:o},r.a.createElement(A.a,{name:"cross",sourceSize:"20"}))),r.a.createElement("div",{className:u},e&&r.a.createElement("div",{className:"NewsletterBuilderItem--overlay"}),i&&i(r.a.createElement("span",{className:"NewsletterBuilderItem-overlay theme--border","aria-label":Object(le.a)("newsletter.builder.drag_label")})),a&&r.a.createElement("div",{className:"ImageOptions ImageOptions--small"},a,l&&r.a.createElement("a",{href:l,target:"_blank",className:"ImageOptions-button ImageOptions-button--externalLink"},r.a.createElement(A.a,{name:"external",sourceSize:16}))),r.a.createElement("div",{className:"NewsletterBuilderItem-main"},n)))}}]),n}(r.a.PureComponent);N()(tt,"propTypes",{children:C.a.node.isRequired,optionsMenu:C.a.node,dragHandleFunction:C.a.func,url:C.a.string,isHovering:C.a.bool});var nt=tt,at=n(245),rt=n(193),it=n(194);function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var ct=function(e){y()(n,e);var t=lt(n);function n(e){var a;return p()(this,n),(a=t.call(this,e)).addButton=a.addButton.bind(g()(a)),a}return h()(n,[{key:"addButton",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?0:1,n=this.props.index;return r.a.createElement(Ze,{addItem:this.props.addItem,index:n,delta:t})}},{key:"render",value:function(){var e,t=this.props,n=t.index,a=t.onMoveToTop,i=t.onMoveToBottom,l=t.onSetShowcase,c=t.onRemoveShowcase,o=t.item,s=t.fieldName,u=t.isLastChild,m=t.onRemove,d=t.connectDragDrop,p=t.connectDragHandle,f=t.isDragging,h=t.isHovering,b=L()({"Drop-item":!0,"Drop-item--ieHack":!0,"Drop-item--withBg":!0,"Drop-placeholder":f}),g=r.a.createElement(qe,{onRemove:m,isLastChild:u,index:n,item:o,onMoveToTop:a,onMoveToBottom:i,onSetShowcase:l,onRemoveShowcase:c}),v={isHovering:h,optionsMenu:g,dragHandleFunction:p};return"heading"===o.type?e=r.a.createElement(Qe,Ee()({title:Object(le.a)("newsletter.builder.heading.title")},v),r.a.createElement(V.Field,{isLarge:!0,isMinimal:!0,component:at.a,canHaveLineBreaks:!1,hasNoInternalLabel:!0,name:"".concat(s,".heading"),placeholder:Object(le.a)("newsletter.builder.heading.placeholder")})):"text"===o.type?e=r.a.createElement(Qe,Ee()({title:Object(le.a)("newsletter.builder.text.title")},v),r.a.createElement(V.Field,{isMinimal:!0,component:at.a,name:"".concat(s,".text"),placeholder:Object(le.a)("newsletter.builder.text.placeholder")})):"divider"===o.type?e=r.a.createElement(nt,v,r.a.createElement("hr",null)):"content"===o.type&&(e=r.a.createElement(nt,{isHovering:h,optionsMenu:g,dragHandleFunction:p,url:o.content.get("url"),onRemove:m,item:o},r.a.createElement(De,{item:o,onRemove:m}))),r.a.createElement("li",null,this.addButton(),d(r.a.createElement("div",{className:b},e)),u&&this.addButton(!1))}}]),n}(r.a.PureComponent);ct.propTypes={fieldName:C.a.string.isRequired,onRemove:C.a.func.isRequired,onMoveToTop:C.a.func.isRequired,onMoveToBottom:C.a.func.isRequired,onSetShowcase:C.a.func.isRequired,onRemoveShowcase:C.a.func.isRequired,addItem:C.a.func.isRequired,connectDragDrop:C.a.func.isRequired,isLastChild:C.a.bool,isDragging:C.a.bool},ct.defaultProps={};var ot=Object(it.a)(rt.j,{moveProperty:"index",calculateHeights:!0})(ct),st=n(406),ut=n(164),mt=n(1188);function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var pt=function(e){y()(n,e);var t=dt(n);function n(){var e;p()(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),N()(g()(e),"setShowcase",(function(t,n,a){var r=e.props,i=r.change,l=r.uploadImageToAWS,c=r.formName;i("".concat(n,".isShowcase"),t),l(c,a.content,t)})),N()(g()(e),"addItem",(function(t,n){e.props.fields.insert(t,new st.a({id:"temp".concat(Object(ut.a)()),type:n}))})),N()(g()(e),"handleChange",(function(t){return e.props.change("items",t)})),e}return h()(n,[{key:"render",value:function(){var e=this,t=this.props.fields;return r.a.createElement("div",null,t.length>0&&r.a.createElement("ul",null,r.a.createElement(mt.a,{change:this.handleChange,items:this.props.items,fields:this.props.fields},(function(n){return n.map((function(a){var i=a.id,l=a.item,c=a.index,o=a.fieldName,s=a.events;return r.a.createElement(ot,{fieldName:o,index:c,id:i,key:i,item:l,onRemove:s.handleRemove,onMove:s.handleMove,onMoveToTop:function(){return s.handleMove(c,0)},onMoveToBottom:function(){return s.handleMove(c,t.length-1)},onSetShowcase:function(){return e.setShowcase(!0,o,l)},onRemoveShowcase:function(){return e.setShowcase(!1,o,l)},addItem:e.addItem,onDrop:s.handleDrop,isLastChild:c===n.size-1})}))}))))}}]),n}(ye.b);pt.propTypes={items:ve.a.list.isRequired,change:C.a.func.isRequired,fields:C.a.shape({}).isRequired,uploadImageToAWS:C.a.func.isRequired,formName:C.a.string.isRequired},pt.defaultProps={};var ft=pt,ht=n(755),bt=n(422),gt=n(117),vt=n(241),yt=n(215);function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var Et=function(e){y()(n,e);var t=wt(n);function n(){var e;p()(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i)),N()(g()(e),"render",(function(){var t=e.props,n=t.onClick,a=t.children,i=t.isSelected,l=t.isDisabled,c=t.value,o=t.disabledLabel,s=t.isRadio,u=L()({SelectionItem:!0,"is-active":i,"is-disabled":l}),m=L()({"SelectionItem-overlay":!0,"theme--border":i});return r.a.createElement("button",{type:"button",className:u,onClick:n},r.a.createElement("div",{className:m}),r.a.createElement("div",{className:"SelectionItem-checkbox"},r.a.createElement("div",{className:"ToggleField ToggleField--checkbox u-inlineBlock"},r.a.createElement("input",{className:"ToggleField-input ToggleField-input--checkbox",name:"files",type:s?"radio":"checkbox",onChange:e.checkBoxClicked,checked:i}),r.a.createElement("span",{className:"ToggleField-button ToggleField-button--checkbox-input"},r.a.createElement(A.a,{name:"check-input",sourceSize:"18"})))),i&&c&&r.a.createElement("div",{className:"SelectionItem-number theme--bg type--500"},c),r.a.createElement("div",{className:"SelectionItem-inner"},l&&r.a.createElement("div",{className:"SelecttionItem-disabledLabel"},o||Object(le.a)("selection_item.disabled_label")),a))})),e}return n}(r.a.PureComponent);N()(Et,"propTypes",{children:C.a.node.isRequired,onClick:C.a.func.isRequired,value:C.a.oneOfType([C.a.number,C.a.bool]),isDisabled:C.a.bool,isSelected:C.a.bool,disabledLabel:C.a.string}),N()(Et,"defaultProps",{isDisabled:!1,isSelected:!1});var Ot=Et;function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var St=function(e){y()(n,e);var t=jt(n);function n(){return p()(this,n),t.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var e=this.props,t=e.selected,n=e.onSelect,a=e.exclude,i=e.hasSiteImageFallback,l=e.hideFollowingTopics,c=e.hideTypeStamps,o=e.canPaginate,s=e.onLoadMore,u=e.isLoading,m=e.content;if(0===m.size)return u?r.a.createElement(yt.a,{hasBorder:!0}):r.a.createElement(R.a,null);var d=m.map((function(e){return r.a.createElement("div",{className:"u-border-bottom",key:e.get("id")},r.a.createElement(Ot,{onClick:function(){return n(e.get("id"))},isDisabled:a.includes(e.get("id")),isSelected:t.contains(e.get("id")),value:t.includes(e.get("id"))&&t.indexOf(e.get("id"))+1},r.a.createElement(Oe.a,{hasSiteImageFallback:i,showFavorite:!1,content:e,hideFollowingTopics:l,hideTypeStamp:c,key:e.get("id"),size:"small"})))}));return r.a.createElement("div",null,r.a.createElement("ul",null,d),r.a.createElement(vt.a,{canLoad:o,onLoad:s,isLoading:u}))}}]),n}(ye.b);N()(St,"propTypes",{content:C.a.instanceOf(H.a.List).isRequired,exclude:C.a.instanceOf(H.a.List),isLoading:C.a.bool,canPaginate:C.a.bool.isRequired,onLoadMore:C.a.func.isRequired,hideFollowingTopics:C.a.bool,hideTypeStamps:C.a.bool,showFavorite:C.a.bool,hasSiteImageFallback:C.a.bool}),N()(St,"defaultProps",{exclude:new H.a.List,hideTypeStamps:!1,hideFollowingTopics:!0,showFavorite:!1,hasSiteImageFallback:!1,isLoading:!1});var Nt=St,_t=n(609),It=n(516),Rt=n(113),xt=n(2594);function kt(e){var t=e.site,n=e.onSubmit,i=e.close,l=e.exclude,c=e.excludePrivate,o=Object(xt.a)({initialParams:new H.a.Map({siteId:t?t.get("siteId"):void 0,filter:"canAddToNewsletterFromSite",sortBy:"latest",type:"all"})}),s=o.content,u=o.loading,m=o.loadMore,d=o.canPaginate,p=o.params,f=o.setParams,h=Object(a.useState)(new H.a.List),b=K()(h,2),g=b[0],v=b[1],y=[{value:"all",label:Object(le.a)("common.all")},{value:"page",label:Object(le.a)("common.page")},{value:"event",label:Object(le.a)("common.event")},{value:"album",label:Object(le.a)("common.album")},!p.get("siteId")&&{value:"BlogPost",label:Object(le.a)("common.blog")}].filter((function(e){return!!e}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"Modal-content"},r.a.createElement("div",{className:"row row--autoWidth join"},r.a.createElement("div",{className:"large-8 column"},r.a.createElement("div",{className:"u-marg-b--medium"},r.a.createElement(It.a,{selected:new H.a.List([t]),placeholder:Object(le.a)("field.site_selector.placeholder"),onChange:function(e){var t={siteId:e};"BlogPost"===p.get("type")&&(t.type="all"),v(new H.a.List),f(t)},excludePrivate:c}))),r.a.createElement("div",{className:"large-4 column"},r.a.createElement("div",{className:"u-marg-b--medium"},r.a.createElement("div",{className:"Field Field--staticLabel Field--hasIcon"},r.a.createElement("label",{className:"Field-label",htmlFor:"contentTypeSelector"},Object(le.a)("newsletter.modal.select_label"),":"),r.a.createElement(_t.a,{id:"contentTypeSelector",classes:["type--primary"],options:y,onChange:function(e){v(new H.a.List),f({type:e.target.value})},value:p.get("type")||"all"}),r.a.createElement("div",{className:"Field-iconContainer Field-iconContainer--navigatedown"},r.a.createElement(A.a,{isLegacy:!0,name:"navigatedown"})))))),r.a.createElement("div",{className:"u-zIndex--1 u-posRelative"},r.a.createElement(Nt,{content:s,isLoading:u,canPaginate:d,onLoadMore:m,exclude:l,selected:g,onSelect:function(e){v((function(t){var n=t.indexOf(e);return n>=0?t.delete(n):t.push(e)}))},hasSiteImageFallback:!0}))),r.a.createElement("div",{className:"Strip Strip--modal"},r.a.createElement("p",{className:"Strip-path u-textRight"},Object(le.a)("newsletter.modal.items_selected",{count:g.size})),r.a.createElement(fe.a,{label:Object(le.a)("newsletter.modal.button_label"),disabled:0===g.size,onClick:function(){var e=g.map((function(e){return s.find((function(t){return t.get("id")===e}))}));n(e),i()},appearance:"brand"})))}kt.propTypes={site:ve.a.map,exclude:C.a.object.isRequired,excludePrivate:C.a.bool},kt.defaultProps={excludePrivate:!1};var Ct=Object(Rt.a)((function(){return{name:te.Nb,id:"default",title:Object(le.a)("newsletter.select_from_latest"),classes:["Modal--small"]}}))(kt),Pt=n(1180),Lt=n(132),Tt=n(17),At=n(47);function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var Ft="NEWSLETTER_BUILDER_CONTENT",Bt=new H.a.Map({charCounterMax:1e4,toolbarSticky:!1,toolbarButtons:new H.a.List(["paragraphFormat","bold","italic","underline","strikeThrough","|","formatUL","formatOL","insertLink"]),pluginsEnabled:new H.a.List(["codeBeautifier","entities","inlineStyle","link","lists","wordPaste","url"])}),Mt=function(e){y()(n,e);var t=Dt(n);function n(){var e;p()(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i)),N()(g()(e),"onSubmit",(function(t,n){var a=e.props,r=a.newsletterId,i=a.recipient,l=a.site,c=a.audience,o=a.segment,s=a.membersType;if(Object(Te.h)(t.get("items")))return e.props.dangerFlash(Object(le.a)("newsletter.danger_flash.review_content")),Promise.resolve();if(Object(Te.f)(t.get("items")))return e.props.dangerFlash(Object(le.a)("newsletter.danger_flash.review_content")),Promise.resolve();var u=Object(z.a)(t,i,l,c,o,s,"next"===n);if("next"===n){var m=t.get("introduction"),d=t.get("items");return m&&m.trim()||0!==d.size?(0,e.props["_new"===r?"saveDraft":"update"])(r,u).then((function(){e.props.history.push("/newsletter/".concat(r,"/preview"))})):(e.props.dangerFlash(Object(le.a)("newsletter.danger_flash.review_content")),Promise.resolve())}return e.props[n](r,u).then((function(t){var a=t.result;"saveDraft"===n&&e.props.history.replace("/newsletter/".concat(a.newsletterId,"/content"))}))})),N()(g()(e),"addContentFromSelector",(function(t,n,a){n&&(a.clear(!0),e.addContent(H.a.fromJS([Object(Lt.b)(n)])))})),N()(g()(e),"addContent",(function(t){var n=e.props.items,a=t,r=n.filter((function(e){return"content"===e.type})).size;a.size+r>25&&(e.props.dangerFlash(Object(le.a)("newsletter.danger_flash.maximum_content")),a=a.slice(0,25-r)),a.forEach((function(t){n.find((function(e){return"content"===e.type&&t.get("id")===e.getIn(["content","id"])}))?e.props.dangerFlash(Object(le.a)("newsletter.danger_flash.duplicate_content")):(e.props.addItem(Ft,"content",t),e.props.uploadImageToAWS(Ft,t,!1))}))})),N()(g()(e),"render",(function(){var t=e.props,n=t.submitting,a=t.status,i=t.handleSubmit,l=t.newsletterId,c=t.items,o=t.site,s=t.bannerUrl,u=t.bannerFileId,m=t.fromAddresses,d=o&&o.get("id");if("_new"===l&&!e.props.recipient)return null;var p=[];if("_new"===l)p.push(r.a.createElement(fe.a,{size:"large",key:"save",label:Object(le.a)("newsletter.button_label.save_draft"),disabled:n,onClick:i((function(t){return e.onSubmit(t,"saveDraft")}))}));else if("sent"!==a){var f=Object(le.a)("draft"!==a?"newsletter.button_label.update":"newsletter.button_label.update_draft");p.push(r.a.createElement(fe.a,{size:"large",key:"update",label:f,disabled:n,onClick:i((function(t){return e.onSubmit(t,"update")}))}))}p.push(r.a.createElement(fe.a,{size:"large",key:"next",label:Object(le.a)("button_label.next"),disabled:n,onClick:i((function(t){return e.onSubmit(t,"next")})),appearance:"brand"}));var h=r.a.createElement(pe,{localImg:s,fileId:u,siteId:d,idSetter:function(t){return t&&e.props.change("bannerFileId",t)},onUrlChange:function(t){e.props.change("bannerUrl",t),e.props.change("bannerFileId",null)},onRemove:function(){e.props.change("bannerUrl",null),e.props.change("bannerFileId",null)}});return r.a.createElement("form",{className:e.props.submitting?"is-disabled":""},r.a.createElement(be.a,{message:function(t){var n=t&&(t.pathname.endsWith("/preview")||t.pathname.endsWith("/content"));return!(e.props.dirty&&!n)}}),r.a.createElement("div",{className:"u-border-bottom u-pad-tb--xxlarge"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column small-12 large-centered large-8"},r.a.createElement("div",{className:"u-marg-b--medium"},r.a.createElement(V.Field,{name:"name",hasNoInternalLabel:!0,hasLabelAbove:!0,label:Object(le.a)("newsletter.info.name.label"),note:Object(le.a)("newsletter.info.name.note"),maxLength:255,component:gt.a,isRequired:!0,validate:[At.E]})),r.a.createElement("div",{className:"u-marg-b--medium"},r.a.createElement(V.Field,{name:"subject",hasNoInternalLabel:!0,hasLabelAbove:!0,label:Object(le.a)("newsletter.info.subject_line"),maxLength:255,component:gt.a,isRequired:!0,validate:[At.E]})),r.a.createElement("div",{className:"large-6"},r.a.createElement(V.Field,{name:"fromAddressId",hasNoInternalLabel:!0,hasLabelAbove:!0,label:Object(le.a)("newsletter.info.from_address"),component:bt.a,options:m.map((function(e){return{value:e.get("id"),label:e.get("email")}})).toArray(),isRequired:!0,validate:[At.E]}))))),r.a.createElement("div",{className:"u-border-bottom u-pad-tb--xxlarge"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column small-12 Newsletter-contentColumn"},r.a.createElement("div",{className:"u-marg-b--medium"},h),r.a.createElement("div",null,r.a.createElement("h4",{className:"type--h6 type--500 u-marg-b--small"},Object(le.a)("newsletter.builder.introduction.title"),r.a.createElement("span",{className:"note"}," — ",Object(le.a)("common.optional"))),r.a.createElement("div",{className:"has-smallControls"},r.a.createElement(V.Field,{isSmall:!0,name:"introduction",id:"introduction",placeholder:Object(le.a)("newsletter.builder.introduction.placeholder"),maxLength:1200,component:ht.a,enableMentions:!1,config:Bt,validate:[Object(At.B)(15e3)]})))))),r.a.createElement("div",{className:"u-pad-t--xxlarge u-pad-b--large"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column small-12 Newsletter-contentColumn"},r.a.createElement("div",{className:"Box Box--gray u-pad--mediumlarge u-borderRadius--4"},r.a.createElement("h4",{className:"type--h5 type--500 u-marg-b--medium"},Object(le.a)("newsletter.builder.add_content.title")),r.a.createElement(Pt.a,{placeholder:Object(le.a)("newsletter.builder.add_content.placeholder"),exclude:c,siteId:d,filter:"canAddToNewsletter",isMaxWidth:!0,isValueModel:!0,onChange:e.addContentFromSelector}),r.a.createElement("p",{className:"u-marg-t--medium"},Object(le.a)("common.or")," ",r.a.createElement(Z.a,{modal:r.a.createElement(Ct,{site:o,exclude:c.filter((function(e){return"content"===e.type})).map((function(e){return e.getIn(["content","id"])})),onSubmit:e.addContent,excludePrivate:!0})},(function(e){return r.a.createElement(he.a,{label:Object(le.a)("newsletter.select_from_latest"),onClick:e})})))),r.a.createElement(V.FieldArray,{component:ft,name:"items",change:e.props.change,items:c,uploadImageToAWS:e.props.uploadImageToAWS,formName:Ft})))),"sent"!==a&&r.a.createElement("div",{className:"Strip Strip--large"},r.a.createElement("i",{className:"Strip-note"},Object(le.a)("newsletter.builder.will_not_send_note")),p,r.a.createElement(T.a,{to:"/newsletter",className:"Strip-cancel"},Object(le.a)("button_label.cancel"))))})),e}return h()(n,[{key:"UNSAFE_componentWillMount",value:function(){"_new"!==this.props.newsletterId||this.props.recipient||this.props.history.push("/newsletter/_new/recipients")}}]),n}(r.a.Component),Ut=Object(V.formValueSelector)(Ft);var qt=Object(_.connect)((function(e,t){var n=t.match.params.newsletterId,a=Object(Te.c)(e,n),r=new H.a.List(["page","event","album","blog"]),i=Object(Te.b)(e);return{introduction:Ut(e,"introduction"),isScheduled:Ut(e,"isScheduled"),items:Ut(e,"items")||a.get("items")||new H.a.List,newsletter:a,newsletterId:n,numberOfRecipients:a.get("numberOfRecipients"),recipient:a.get("recipient"),membersType:a.get("membersType"),site:a.get("site",new H.a.Map),audience:a.get("audience",new H.a.Map),segment:a.get("segment",new H.a.Map),authoredBy:a.get("authoredBy",new H.a.Map),status:a.get("status","draft"),subject:Ut(e,"subject"),selectedContent:Ut(e,"content"),bannerUrl:Ut(e,"bannerUrl"),bannerFileId:Ut(e,"bannerFileId"),fromAddresses:i,initialValues:{name:a.get("name"),subject:a.get("subject"),introduction:a.get("introduction"),items:a.get("items")||new H.a.List,bannerUrl:a.get("bannerUrl")||null,bannerFileId:null,fromAddressId:a.get("fromAddressId")||i.getIn([0,"id"])},availableTypes:r.filter((function(t){return Object(Tt.I)(e,t)}))}}),{saveDraft:I.g,update:I.m,dangerFlash:J.f,addItem:I.a,uploadImageToAWS:I.o})(Object(V.reduxForm)({form:Ft,enableReinitialize:!0,onSubmitFail:At.H})(Object(i.k)(Mt))),zt=n(290),Wt=n(2593),Ht=n(2583),Vt=n(66),Jt=n(32),Zt=n(42),Gt=n(138);function Kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var Qt=function(e){y()(n,e);var t=Kt(n);function n(){return p()(this,n),t.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var e=this.props.newsletter,t="site"===e.get("recipient")&&r.a.createElement("a",{href:e.getIn(["site","url"])},r.a.createElement(Gt.a,{name:e.getIn(["site","name"]),access:e.getIn(["site","access"])}));if("everyone"===e.get("recipient"))return Object(le.a)("common.all_organization");if("segment"===e.get("recipient"))return e.getIn(["segment","name"]);var n="audience"===e.get("recipient")&&e.getIn(["audience","isDeleted"])?r.a.createElement("div",{className:"type--label"},Object(le.a)("common.deleted_audience")):e.getIn(["audience","name"]);return"audience"===e.get("recipient")?n:t}}]),n}(ye.b);N()(Qt,"propTypes",{newsletter:ve.a.map});var Xt=Qt;function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var $t=function(e){y()(n,e);var t=Yt(n);function n(){return p()(this,n),t.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var e=this.props,t=e.status,n=e.newsletter,a=e.authoredBy;return r.a.createElement("div",{className:L()({"u-neg-t--xlarge":"sent"===t})},r.a.createElement("h1",{className:"type--h5 type--500 u-marg-b--mediumlarge"},n.get("name")),r.a.createElement(Wt.a,{layout:"stacked"},r.a.createElement(Ht.a,{title:Object(le.a)("newsletter.info.recipients"),isBlock:!0},r.a.createElement(Xt,{newsletter:n})),r.a.createElement("div",{className:"u-marg-t--medium"},r.a.createElement(Ht.a,{title:Object(le.a)("newsletter.info.subject_line"),isBlock:!0},n.get("subject"))),r.a.createElement("div",{className:"u-marg-t--medium"},r.a.createElement(Ht.a,{title:Object(le.a)("newsletter.info.from_address"),isBlock:!0},n.get("fromAddress"))),("sent"===t||"scheduled"===t)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"u-marg-t--medium"},a&&r.a.createElement(Ht.a,{title:Object(le.a)("newsletter.info.authored_by"),isBlock:!0},r.a.createElement("a",{href:a.url},a.name))),r.a.createElement("div",{className:"u-marg-t--medium"},n.get("sendAt")&&r.a.createElement(Ht.a,{title:Object(le.a)("sent"===t?"newsletter.info.send":"newsletter.info.send_at"),isBlock:!0},Object(Jt.j)(n.get("sendAt")).format(Object(Jt.o)(Vt.g)))))),"sent"===t&&r.a.createElement("div",{className:"u-marg-t--xxlarge"},r.a.createElement("h2",{className:"type--h5 type--500 u-marg-b--medium"},Object(le.a)("common.analytics")),r.a.createElement(Wt.a,{layout:"lined"},r.a.createElement("div",{className:"u-marg-t--small"},r.a.createElement(Ht.a,{title:Object(le.a)("newsletter.analytics.opens"),isBlock:!0},n.get("openCount")," ",0!==n.get("openPercentage")&&"(".concat(Math.round(n.get("openPercentage")),"%)")),r.a.createElement(Ht.a,{title:Object(le.a)("newsletter.analytics.total_clicks"),isBlock:!0},n.get("totalClickCount")," ",0!==n.get("clickPercentage")&&"(".concat(Math.round(n.get("clickPercentage")),"%)")),r.a.createElement(Ht.a,{title:Object(le.a)("newsletter.analytics.unique_clicks"),isBlock:!0},n.get("uniqueClickCount")),r.a.createElement(Ht.a,{title:Object(le.a)("newsletter.analytics.avg_clicks_per_open"),isBlock:!0},Object(Zt.a)(n.get("clicksPerOpenCount"),2))))))}}]),n}(ye.b);N()($t,"propTypes",{newsletter:C.a.PropTypes.instanceOf(H.a.Map),status:C.a.string,authoredBy:C.a.shape({name:C.a.string,url:C.a.string})});var en=$t,tn=n(242);function nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var an=function(e){y()(n,e);var t=nn(n);function n(){return p()(this,n),t.apply(this,arguments)}return h()(n,[{key:"render",value:function(){var e=this.props,t=e.currentUserEmail,n=e.onClick,a=e.recipient;return r.a.createElement(We.a,{onEnter:n},r.a.createElement("div",{className:"Box Box--gray u-pad--mediumlarge u-borderRadius--4"},r.a.createElement("h2",{className:"type--h5 type--500 u-marg-b--small"},Object(le.a)("newsletter.test.title")),r.a.createElement("p",{className:"type--secondary u-marg-b--medium"},Object(le.a)("newsletter.test.intro")),r.a.createElement("p",{className:"type--500 u-marg-b--small"},Object(le.a)("newsletter.test.send_to"),":"),r.a.createElement(V.Field,{isStacked:!0,isLight:!0,component:tn.a,name:"preview.recipient",options:[{label:Object(le.a)("newsletter.test.option.current_email",{currentUserEmail:t}),value:"current"},{label:Object(le.a)("newsletter.test.option.different_email"),value:"different"}]}),"different"===a&&r.a.createElement("div",{className:"u-marg-t--medium"},r.a.createElement(V.Field,{hasLabelAbove:!0,hasNoInternalLabel:!0,component:gt.a,name:"preview.email",placeholder:"you@companyname.com"})),r.a.createElement("div",{className:"u-textRight u-marg-t--mediumlarge"},r.a.createElement(fe.a,{size:"large",label:Object(le.a)("newsletter.test.button_label"),onClick:n}))))}}]),n}(r.a.PureComponent);N()(an,"propTypes",{onClick:C.a.func.isRequired,currentUserEmail:C.a.string.isRequired,recipient:C.a.oneOf(["current","different"])});var rn=an,ln=n(2032),cn=n(612),on=n(853),sn=n(30),un=n(90),mn=n(2763),dn=n(1004);function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var fn="NEWSLETTER_BUILDER_PREVIEW",hn=function(e){y()(n,e);var t=pn(n);function n(){var e;p()(this,n);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i)),N()(g()(e),"state",{schedulingSlots:[]}),N()(g()(e),"populateSchedulingSlots",m()(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(mn.a)();case 2:n=t.sent,e.setState({schedulingSlots:n});case 4:case"end":return t.stop()}}),t)})))),N()(g()(e),"onSubmit",(function(t,n){var a=t.get("preview"),r=t.merge({listOfItems:e.props.items,recipient:e.props.recipient,site:e.props.site,audience:e.props.audience,segment:e.props.segment,introduction:e.props.introduction,subject:e.props.subject,name:e.props.name,fromAddressId:e.props.fromAddressId}).delete("preview");if(!1===r.has("bannerUrl")&&e.props.newsletter.has("bannerUrl")&&(r=r.set("bannerUrl",e.props.newsletter.get("bannerUrl"))),"sendPreview"===n){if("different"!==a.get("recipient"))return e.props.sendPreview(r,e.props.currentUserEmail);var i=a.get("email").trim();return Object(At.E)(i)||Object(At.m)(i)?(e.props.dangerFlash(Object(le.a)("form_error.notEmail")),!1):e.props.sendPreview(r,i).then(e.clearPreviewEmailField)}return("saveAndExit"===n?e.props.update(r):"sendNow"===n?e.props.sendNow(r):e.props.schedule(r)).then((function(){Object(un.e)({pathname:"/newsletter"})}))})),N()(g()(e),"getBackLink",(function(){return"draft"===e.props.status?"/newsletter/".concat(e.props.newsletterId,"/content"):"/newsletter"})),N()(g()(e),"getSubmitHandler",(function(t){return e.props.handleSubmit((function(n){return e.onSubmit(n,t)}))})),N()(g()(e),"clearPreviewEmailField",(function(){e.props.change("preview.email","")})),N()(g()(e),"renderButtons",(function(){var t=e.props,n=t.submitting,a=t.status,i=t.match.params.newsletterId,l=e.getBackLink(),c=[];return"draft"===a&&("schedule"===e.props.when?c.push(r.a.createElement(fe.a,{size:"large",label:Object(le.a)("newsletter.button_label.schedule"),disabled:n,onClick:e.props.handleSubmit((function(t){return e.onSubmit(t,"schedule")})),appearance:"brand",key:"schedule"})):c.push(r.a.createElement(fe.a,{size:"large",label:Object(le.a)("newsletter.button_label.send_now"),disabled:n,onClick:e.props.handleSubmit((function(t){return e.onSubmit(t,"sendNow")})),appearance:"brand",key:"sendNow"})),"schedule"!==e.props.when&&c.push(r.a.createElement(fe.a,{size:"large",key:"saveAndExit",label:Object(le.a)("newsletter.button_label.save_and_exit"),disabled:n,onClick:e.props.handleSubmit((function(t){return e.onSubmit(t,"saveAndExit")}))}))),"scheduled"===a&&c.push(r.a.createElement(fe.a,{size:"large",label:Object(le.a)("newsletter.button_label.send_now"),appearance:"brand",key:"sendNow",onClick:function(){return Object(un.e)({pathname:"/newsletter/".concat(i,"/edit")})}})),"scheduled"!==a&&"on_hold"!==a||c.push(r.a.createElement(fe.a,{size:"large",label:Object(le.a)("newsletter.button_label.edit"),onClick:function(){return Object(un.e)({pathname:"/newsletter/".concat(i,"/edit")})},key:"edit"})),c.push(r.a.createElement("div",{className:"u-floatLeft",key:"back"},r.a.createElement(fe.a,{size:"large",linkTo:l,label:Object(le.a)("button_label.back")}))),r.a.createElement("div",{className:"Strip Strip--large u-cf"},c.reverse())})),e}return h()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.newsletterId&&this.props.match.params.newsletterId&&e.newsletterId!==this.props.match.params.newsletterId&&this.props.history.push({pathname:"/newsletter/".concat(e.newsletterId,"/preview")})}},{key:"UNSAFE_componentWillMount",value:function(){this.populateSchedulingSlots()}},{key:"componentWillUnmount",value:function(){this.props.removeFlash("unavailable-content-".concat(this.props.match.params.newsletterId))}},{key:"render",value:function(){var e=this.props,t=e.previewRecipient,n=e.submitting,a=e.status,i=e.currentUserEmail,l=this.state.schedulingSlots,c=this.props.items.map((function(e){return"content"===e.type?r.a.createElement("li",null,r.a.createElement(De,{key:e.content.get("id"),item:e})):"divider"===e.type?r.a.createElement("li",{key:e.id},r.a.createElement("hr",null)):"text"===e.type?r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"u-marg--mediumlarge"},r.a.createElement(ln.a,{input:e.get("text")}))):r.a.createElement("li",{key:e.id},r.a.createElement("h2",{className:"type--h3 type--500 u-marg--mediumlarge",key:e.get("newsletterId")},e.get("heading")))}));return r.a.createElement("form",{className:n?"is-disabled":""},r.a.createElement("div",{className:"u-pad-tb--xxlarge"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column small-12 large-centered large-8"},r.a.createElement(en,{newsletter:this.props.newsletter,status:a,recipient:this.props.recipient,site:this.props.site,authoredBy:this.props.newsletter.get("authoredBy",new H.a.Map).toJS(),numberOfRecipients:this.props.numberOfRecipients,subject:this.props.subject,sendAt:this.props.newsletter.sendAt})))),r.a.createElement("div",{className:"u-border-top u-pad-tb--large"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column small-12 Newsletter-contentColumn"},("draft"===a||"scheduled"===a)&&r.a.createElement("div",{className:"u-cf u-marg-b--medium"},r.a.createElement("div",{className:"u-floatRight"},r.a.createElement(fe.a,{size:"large",linkTo:this.getBackLink(),label:Object(le.a)("common.edit")}))),r.a.createElement("div",{className:"type--sans"},this.props.newsletter.get("bannerUrl")&&r.a.createElement("div",{className:"u-marg-b--mediumlarge"},r.a.createElement(cn.b,{src:this.props.newsletter.get("bannerUrl"),size:"568px"})),r.a.createElement("div",{className:"u-marg--mediumlarge Content Content--small",dangerouslySetInnerHTML:{__html:Object(dn.a)(this.props.introductionInlined,{css:!1})}}),r.a.createElement("ul",null,c))))),("draft"===a||"scheduled"===a)&&r.a.createElement("div",{className:"u-border-top u-pad-tb--large"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column small-12 large-centered large-8"},r.a.createElement(rn,{onClick:this.getSubmitHandler("sendPreview"),recipient:t,currentUserEmail:i})))),"draft"===a&&r.a.createElement("div",{className:"u-border-top u-pad-tb--xlarge"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column small-12 large-centered large-8"},r.a.createElement(V.Field,{label:Object(le.a)("newsletter.preview.send_or_schedule_label"),id:"send_or_schedule",isStacked:!0,isLight:!0,component:tn.a,name:"when",options:[{label:Object(le.a)("newsletter.preview.send_it_now"),value:"sendNow"},{label:Object(le.a)("newsletter.preview.schedule_date_and_time"),value:"schedule"}]}),"schedule"===this.props.when&&r.a.createElement("div",{className:"u-marg-t--medium large-8"},r.a.createElement(V.Field,{name:"sendAt",id:"sendAt",label:Object(le.a)("newsletter.preview.send_at"),component:on.a,timeOptions:l,validate:[At.E,At.h]}))))),this.renderButtons())}}]),n}(r.a.Component),bn=Object(V.formValueSelector)(fn);var gn=Object(zt.compose)(Object(_.connect)((function(e,t){var n=Object(Te.c)(e,t.match.params.newsletterId);return{introduction:n.get("introduction"),introductionInlined:n.get("introductionInlined")||n.get("introduction"),when:bn(e,"when"),items:n.get("items",new H.a.List),newsletter:n,newsletterId:n.get("newsletterId"),numberOfRecipients:n.get("numberOfRecipients"),recipient:n.get("recipient"),site:n.get("site",new H.a.Map),audience:n.get("audience",new H.a.Map),segment:n.get("segment",new H.a.Map),status:n.get("status","draft"),fromAddressId:n.get("fromAddressId"),subject:n.get("subject"),name:n.get("name"),previewRecipient:bn(e,"preview.recipient")||"current",initialValues:{sendAt:n.get("sendAt")||Object(Jt.k)(Object(Jt.l)()),when:n.get("sendAt")?"schedule":"sendNow",preview:{recipient:"current"}},currentUserEmail:Object(sn.getCurrentUser)(e).get("email")}}),(function(e,t){var n=t.match.params.newsletterId;return{update:function(t){return e(Object(I.m)(n,t,!0))},sendNow:function(t){return e(Object(I.i)(n,t))},schedule:function(t){return e(Object(I.h)(n,t))},sendPreview:function(t,a){return e(Object(I.j)(n,t,a))},clearFlashType:function(t){return e(Object(J.e)(t))},removeFlash:function(t){return e(Object(J.i)(t))},dangerFlash:function(t){return e(Object(J.f)(t))}}})),Object(V.reduxForm)({form:fn,onSubmitFail:At.H}),i.k)(hn),vn=n(3540),yn=n(140);function wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var En=function(e){y()(a,e);var t,n=wn(a);function a(){var e;p()(this,a);for(var t=arguments.length,i=new Array(t),l=0;l<t;l++)i[l]=arguments[l];return e=n.call.apply(n,[this].concat(i)),N()(g()(e),"calledEditEndpoint",!1),N()(g()(e),"renderSteps",(function(e){return r.a.createElement(U,{currentStep:e,steps:[{name:Object(le.a)("newsletter.section.recipients")},{name:Object(le.a)("newsletter.section.add_content")},{name:Object(le.a)("newsletter.section.preview")}]})})),e}return h()(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.fromAddresses.size||this.props.loadFromAddresses();var e=this.props.newsletterId;e&&"_new"!==e&&this.props.load(e),this.callEditEndpoint(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.callEditEndpoint(e)}},{key:"callEditEndpoint",value:(t=m()(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.calledEditEndpoint||!t.location.pathname.endsWith("/edit")){e.next=7;break}return this.calledEditEndpoint=!0,n=this.props.newsletterId,e.next=5,this.props.edit(n);case 5:!1!==e.sent&&(this.calledEditEndpoint=!1,this.props.history.push("/newsletter/".concat(n,"/content")));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;if(this.props.location.pathname.endsWith("/edit"))return null;var t=this.props,n=t.name,a=t.loading,l=t.match,o=l.path,s=l.params.section,u=t.hasNoAvailableAddresses,m=t.helpUrl,d=t.isCurrentUserSystemManager;return a?r.a.createElement(x.a,null):["recipients","content","preview"].includes(s)&&u?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column"},r.a.createElement(R.a,null,r.a.createElement("p",null,Object(le.a)("newsletter.no_address_error"),r.a.createElement("br",null),d?r.a.createElement("a",{href:m},Object(le.a)("newsletter.no_address_link")):Object(le.a)("newsletter.no_address_contact_system_admin"))))):r.a.createElement("div",null,r.a.createElement(q.a,null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"Page"},r.a.createElement("header",{className:"Page-header"},r.a.createElement("div",{className:"Page-header-inner Page-header-inner--noTabsWithButton"},r.a.createElement("h1",{className:"Page-heading type--h4"},r.a.createElement(i.e,null,r.a.createElement(i.c,{path:"".concat(o,"/view"),render:function(){return n||""}}),r.a.createElement(i.c,{render:function(){return Object(le.a)("newsletter.title")}}))))),r.a.createElement(i.c,{path:"".concat(o,"/(recipients|content|preview|review)"),render:function(){return r.a.createElement("div",{className:"Newsletter-stepsContainer"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column small-12 large-centered large-8"},r.a.createElement(i.e,null,r.a.createElement(i.c,{exact:!0,path:"".concat(o,"/recipients"),render:function(){return e.renderSteps(0)}}),r.a.createElement(i.c,{exact:!0,path:"".concat(o,"/content"),render:function(){return e.renderSteps(1)}}),r.a.createElement(i.c,{exact:!0,path:"".concat(o,"/preview"),render:function(){return e.renderSteps(2)}}),r.a.createElement(i.c,{exact:!0,path:"".concat(o,"/review"),render:function(){return e.renderSteps(2)}})))))}}),this.props.loaded&&(this.props.isReadOnly?r.a.createElement(c.a,null,r.a.createElement(i.c,{path:"".concat(o,"/view"),component:gn})):r.a.createElement(c.a,null,r.a.createElement(i.c,{path:"".concat(o,"/recipients"),component:vn.a}),r.a.createElement(i.c,{path:"".concat(o,"/content"),component:qt}),r.a.createElement(i.c,{path:"".concat(o,"/preview"),component:gn}),r.a.createElement(i.c,{path:"".concat(o,"/review"),component:gn}),r.a.createElement(i.c,{path:"".concat(o,"/view"),component:gn})))))))}}]),a}(r.a.Component);var On=Object(_.connect)((function(e,t){var n=t.match.params.newsletterId,a=Object(Te.b)(e),r=Object(Te.d)(e,n),i="_new"===n||r&&r.get("loaded"),l="_new"!==n&&(r&&r.get("loading"))||Object(Te.i)(e);return{isCurrentUserSystemManager:Object(sn.isCurrentUserSystemManager)(e),hasNoAvailableAddresses:Object(Te.g)(e),isReadOnly:Object(Tt.C)(e,yn.g),fromAddresses:a,loaded:i,loading:l,newsletterId:n,name:r&&r.getIn(["result","name"]),helpUrl:"".concat(Object(Tt.v)(e,"baseUrl"),"/0D2")}}),{load:I.e,edit:I.c,loadFromAddresses:I.f})(En),jn=n(667);function Sn(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,Object(le.a)("modal.confirm.warning.delete_generic",{name:Object(le.a)("common.newsletter")})),r.a.createElement("strong",{className:"type--500"},Object(le.a)("common.cannot_be_undone")))}Sn.propTypes={id:C.a.string.isRequired,onRemove:C.a.func.isRequired};var Nn=Object(_.connect)(null,(function(e,t){var n=t.id,a=t.onRemove;return{delete:function(){return e(Object(I.b)(n)).then(a)}}}))(Object(jn.a)((function(e){return{name:te.tb,id:e.id,title:Object(le.a)("modal.confirm.title.delete_generic",{name:Object(le.a)("common.newsletter")}),buttonText:Object(le.a)("button_label.delete"),onConfirm:e.delete}}))(Sn));function _n(e){var t="/newsletter/".concat(e.newsletter.get("newsletterId")),n=[],a=e.newsletter.get("status"),i=e.newsletter.getIn(["audience","isDeleted"]);return"sent"!==a?("draft"!==a?(n.push(r.a.createElement(Be.a,{key:"view",label:Object(le.a)("button_label.view"),linkTo:"".concat(t,"/review")})),i||n.push(r.a.createElement(Be.a,{key:"editscheduled",label:Object(le.a)("button_label.edit"),linkTo:"".concat(t,"/edit")}))):i||n.push(r.a.createElement(Be.a,{key:"editdraft",label:Object(le.a)("button_label.edit"),linkTo:"".concat(t,"/content")})),n.push(r.a.createElement(Be.a,{key:"delete",label:Object(le.a)("button_label.delete"),onSelect:e.openDeleteModal},r.a.createElement(Nn,{id:e.newsletter.get("newsletterId"),onRemove:e.onRemove}))),"scheduled"!==a||i||n.push(r.a.createElement(Be.a,{key:"sendnow",label:Object(le.a)("newsletter.button_label.send_now"),onSelect:e.sendNow}))):n.push(r.a.createElement(Be.a,{key:"view",label:Object(le.a)("button_label.view"),linkTo:"".concat(t,"/view")})),r.a.createElement(Fe.a,null,n)}_n.propTypes={newsletter:ve.a.map.isRequired,onRemove:C.a.func.isRequired};var In=Object(_.connect)(null,(function(e,t){return{openDeleteModal:function(){return e(Object(Q.open)(te.tb,t.newsletter.get("newsletterId")))},sendNow:function(){return e(Object(I.i)(t.newsletter.get("newsletterId")))}}}))(_n),Rn=n(244),xn=n(1029),kn=n(2764),Cn=n(381),Pn=n(972);function Ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E()(this,n)}}var Tn=function(e){y()(n,e);var t=Ln(n);function n(){return p()(this,n),t.apply(this,arguments)}return h()(n,[{key:"shouldComponentUpdate",value:function(e){return!H.a.is(this.props.newsletters,e.newsletters)||this.props.isLoading!==e.isLoading||this.props.canPaginate!==e.canPaginate||this.props.onLoadMore!==e.onLoadMore}},{key:"render",value:function(){var e=this.props,t=e.newsletters,n=e.onRemove,a=e.isReadOnly;return 0===this.props.newsletters.size?this.props.isLoading?r.a.createElement(yt.a,{hasBorder:!0}):r.a.createElement(R.a,null):r.a.createElement("div",null,r.a.createElement(Pn.a,{data:t,hasNoLastBorder:!0,hAlignment:"right",vAlignment:"middle",keyName:"newsletterId"},r.a.createElement(Cn.a,{label:Object(le.a)("table.heading.name"),whiteSpaceNormal:!0},(function(e){if(a&&"sent"!==e.get("status"))return r.a.createElement("span",{className:"type--title type--h6"},e.get("name"));var t="/newsletter/".concat(e.get("newsletterId"),"/review");return"sent"===e.get("status")?t="/newsletter/".concat(e.get("newsletterId"),"/view"):"draft"===e.get("status")&&(t="/newsletter/".concat(e.get("newsletterId"),"/content")),r.a.createElement(Rn.a,{to:t,className:"type--title type--h6"},e.get("name"))})),r.a.createElement(Cn.a,{label:Object(le.a)("table.heading.recipients"),width:"128px",whiteSpaceNormal:!0},(function(e){return r.a.createElement(Xt,{newsletter:e})})),r.a.createElement(Cn.a,{label:Object(le.a)("table.heading.author"),width:"112px",whiteSpaceNormal:!0},(function(e){return r.a.createElement("a",{href:e.getIn(["authoredBy","url"])},e.getIn(["authoredBy","name"]))})),r.a.createElement(Cn.a,{label:Object(le.a)("table.heading.created"),width:"112px"},(function(e){return r.a.createElement(kn.a,{input:e.get("createdAt"),isCommaSeperated:!0})})),r.a.createElement(Cn.a,{label:Object(le.a)("table.heading.sent"),width:"112px"},(function(e){return r.a.createElement(r.a.Fragment,null,"draft"!==e.get("status")&&e.get("sendAt")?r.a.createElement(kn.a,{input:e.get("sendAt"),includeTime:!0}):r.a.createElement("span",{className:"type--secondary"},Object(le.a)("common.n_a")))})),r.a.createElement(Cn.a,{label:Object(le.a)("table.heading.status"),width:"96px"},(function(e){return r.a.createElement(xn.a,{text:Object(le.a)("status.".concat(e.get("status"))),status:e.get("status")})})),r.a.createElement(Cn.a,{label:Object(le.a)("table.heading.open_clicks"),width:"96px"},(function(e){return r.a.createElement(r.a.Fragment,null,"sent"===e.get("status")?r.a.createElement(r.a.Fragment,null,Object(Zt.c)(e.get("openCount"))," /"," ",Object(Zt.c)(e.get("uniqueClickCount"))):r.a.createElement("span",{className:"type--secondary"},Object(le.a)("common.n_a")))})),!a&&r.a.createElement(Cn.a,{label:Object(le.a)("table.heading.options"),textAlign:"right",width:"64px"},(function(e){return r.a.createElement(In,{onRemove:n,newsletter:e})}))),r.a.createElement(vt.a,{canLoad:this.props.canPaginate,onLoad:this.props.onLoadMore,isLoading:this.props.isLoading}))}}]),n}(r.a.Component);N()(Tn,"propTypes",{newsletters:C.a.instanceOf(H.a.List),isLoading:C.a.bool,isReadOnly:C.a.bool,canPaginate:C.a.bool,onLoadMore:C.a.func,onRemove:C.a.func.isRequired});var An=n(1013),Dn=n(479),Fn=n(212),Bn=n(1001),Mn=n(2808),Un=n(209),qn=n(324);var zn=function(){var e=Object(Mn.a)({initialParams:new H.a.Map({filter:"all",recipient:"any",sortBy:"createdNewest"})}),t=e.newsletters,n=e.loading,a=e.loadMore,i=e.removeId,l=e.canPaginate,c=e.setParams,o=e.params,s=e.filterSites,u=Object(Un.f)(),m=Object(qn.b)().canSendNewsletterToAll,d=n&&0===t.size&&r.a.createElement("div",{className:"u-posRelative u-pad--xlarge"},r.a.createElement(x.a,null)),p=o.get("filter","all")||"all",f=r.a.createElement(Fn.a,{classes:["all"!==p?"is-set":null],selected:p,options:[{value:"all",label:Object(le.a)("common.all")},{value:"draft",label:Object(le.a)("common.draft")},{value:"scheduled",label:Object(le.a)("common.scheduled")},{value:"on_hold",label:Object(le.a)("common.on_hold")},{value:"sent",label:Object(le.a)("common.sent")}],onChange:function(e){c({filter:e})}}),h=o.get("recipient","any"),b=[{value:"any",label:Object(le.a)("common.any_recipients")}];m&&b.push({value:"everyone",label:Object(le.a)("common.all_organization")}),s.forEach((function(e){var t=e.id,n=e.title;b.push({value:t,label:n})}));var g=r.a.createElement(Fn.a,{classes:["any"!==h?"is-set":null],selected:h,options:b,onChange:function(e){c({recipient:e})}}),v=o.get("sortBy"),y=r.a.createElement(Fn.a,{classes:["createdNewest"!==v?"is-set":null],selected:v,options:[{value:"createdNewest",label:Object(le.a)("sort_by.createdNewest")},{value:"createdOldest",label:Object(le.a)("sort_by.createdOldest")},{value:"sendAtNewest",label:Object(le.a)("sort_by.sendAtNewest")},{value:"sendAtOldest",label:Object(le.a)("sort_by.sendAtOldest")}],onChange:function(e){c({sortBy:e})}});return r.a.createElement("div",null,r.a.createElement(q.a,null),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"Page"},r.a.createElement("header",{className:"Page-header"},r.a.createElement("div",{className:"Page-header-inner Page-header-inner--noTabsWithButton"},r.a.createElement("h1",{className:"Page-heading type--h4"},Object(le.a)("newsletter.title")),r.a.createElement(An.a,{name:"newsletter",popperPosition:"right-start",position:{top:-12,left:90,right:"auto"}})),!u&&r.a.createElement("div",{className:"Page-buttonContainer u-floatRight"},r.a.createElement(fe.a,{appearance:"brand",linkTo:"/newsletter/_new/recipients",label:Object(le.a)("newsletter.button_label.add_newsletter")}))),u&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"large-12 column"},r.a.createElement("div",{className:"u-marg-b--xlarge"},r.a.createElement(Bn.a,{type:"warning",size:"small"},Object(le.a)("newsletter.read_only_warning",{link:r.a.createElement(T.a,{to:"/premier-newsletter"})}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"large-4 column"},r.a.createElement("div",{className:"u-marg-b--medium"},r.a.createElement(Dn.a,{placeholder:Object(le.a)("newsletter.search.placeholder"),initialValue:o.get("term"),onSubmit:function(e){c({term:e.get("term")})},ariaLabel:Object(le.a)("newsletter.search.placeholder")}))),r.a.createElement("div",{className:"large-8 column"},r.a.createElement("div",{className:"filter filter-newletter-history"},r.a.createElement("div",{className:"toolbar"},f,g,y)))),d||r.a.createElement(Tn,{newsletters:t,onRemove:i,isLoading:n,canPaginate:l,onLoadMore:a,isReadOnly:u})))))},Wn=n(2611);t.default=Object(Wn.a)("canSendNewsletter",(function(){return r.a.createElement(l.a,{name:"Newsletter",text:Object(le.a)("page_title.newsletter")},r.a.createElement(c.a,null,r.a.createElement(i.c,{exact:!0,path:"/newsletter",component:zn}),r.a.createElement(i.c,{path:"/newsletter/:newsletterId/:section?",component:On})))}))},972:function(e,t,n){"use strict";var a=n(10),r=n.n(a),i=n(11),l=n.n(i),c=n(12),o=n.n(c),s=n(13),u=n.n(s),m=n(8),d=n.n(m),p=n(4),f=n.n(p),h=n(1),b=n.n(h),g=n(0),v=n.n(g),y=n(69),w=n.n(y),E=n(81),O=n(151),j=n(267),S=n(285);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var _=function(e,t){return e.get?e.get(t):e[t]},I=function(e){o()(n,e);var t=N(n);function n(){return r()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.children,a=e.hasNoLastBorder,r=e.isFontInherit,i=e.hAlignment,l=e.vAlignment,c=e.noResultMessage,o=e.keyName,s=v.a.Children.toArray(n).filter((function(e){return!!e})),u=v.a.createElement(j.a,null,s.map((function(e,t){return v.a.createElement(O.a,{key:e.props.name||e.props.label||t,width:e.props.width,textAlign:e.props.textAlign,hasExtraPadding:e.props.hasExtraPadding},e.props.label)})));return v.a.createElement(S.a,{header:u,hasNoLastBorder:a,isFontInherit:r,hAlignment:i,vAlignment:l,noResultMessage:c},t.map((function(e,t){return v.a.createElement(j.a,{key:o?_(e,o):t,testId:"dataGridRow"},s.map((function(t,n){return v.a.cloneElement(t,{item:e,key:t.props.name||t.props.label||n})})))})))}}]),n}(E.b);I.propTypes={children:b.a.node.isRequired,data:b.a.oneOfType([w.a.list,b.a.arrayOf(b.a.shape({}))]),hasNoLastBorder:b.a.bool,isFontInherit:b.a.bool,hAlignment:b.a.oneOf(["left","center","right"]),vAlignment:b.a.oneOf(["top","bottom","middle"]),noResultMessage:b.a.string,keyName:b.a.string.isRequired},I.defaultProps={data:new f.a.List,hasNoLastBorder:!1,isFontInherit:!1,hAlignment:"left",vAlignment:"top",noResultMessage:""},t.a=I}}]);