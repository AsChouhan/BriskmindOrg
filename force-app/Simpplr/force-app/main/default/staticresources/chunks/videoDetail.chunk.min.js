(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{1001:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(15),l=a.n(i),o=a(1),c=a.n(o),s=a(0),m=a.n(s);function d(e){var t,a=e.children,n=e.title,i=e.icon,o=e.type,c=e.size,s=e.hasContentStyles,d=e.isContentValidationBox,u=e.button,p=l()((t={InfoBox:!0,"InfoBox--small":"small"===c,"InfoBox--medium":"medium"===c,"InfoBox--large":"large"===c,"theme--before--bg":!o,"theme--after--border":!o},r()(t,"InfoBox--".concat(o),o),r()(t,"isContentValidationBox",d),r()(t,"u-displayFlex",!0),t)),b=l()({"InfoBox-inner":!0,"u-flex-1":!0,"u-pad-l--xxlarge":!!i,Content:s,"Content--small":s}),f=l()({"InfoBox-heading":!0,"type--h6":!0,"u-marg-b--xsmall":!0,"type--500":!0});return m.a.createElement("div",{className:p},m.a.createElement("div",{className:b},n&&m.a.createElement("h3",{className:f},n),i&&m.a.createElement("div",{className:"InfoBox-icon"},i),a),u&&m.a.createElement("div",{className:"InfoBox-button"},u))}d.propTypes={title:c.a.string,icon:c.a.node,type:c.a.oneOf(["brand","positive","negative","warning","neutral"]),size:c.a.oneOf(["small","medium","large"]),hasContentStyles:c.a.bool,isContentValidationBox:c.a.bool,button:c.a.node,children:c.a.element},d.defaultProps={size:"medium",hasContentStyles:!0,isContentValidationBox:!1},t.a=d},3749:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return m}));var n=a(5),r=a.n(n),i=a(3750),l=a(3751),o=a(275);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(t){return Object(o.a)(s(s({},{endpoint:e.Simpplr.Salesforce.Video.getVideoReferences,itemSelector:l.a,itemActionCreator:i.a,itemName:"references",keyName:"id"}),t))}}).call(this,a(27))},3750:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(4),r=a.n(n),i=a(945);function l(e){return Array.isArray(e)||r.a.Iterable.isIterable(e)?{type:i.b,payload:{references:e}}:(t=e,{type:i.a,payload:{reference:t}});var t}},3751:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(4),r=a.n(n),i=a(19);var l=Object(i.a)([function(e){return e.get("references")}],(function(e){return e.map((function(e){return e.get("result")})).filter((function(e){return!!e}))})),o=Object(i.a)([l,function(e,t){return new r.a.List(t)}],(function(e,t){return t.map((function(t){return e.get(t)})).filter((function(e){return!!e}))}))},3752:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return N}));var n=a(20),r=a.n(n),i=a(34),l=a.n(i),o=a(24),c=a.n(o),s=a(5),m=a.n(s),d=a(0),u=(a(1006),a(560)),p=a(654),b=a(155),f=a(26),g=a(3);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){m()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y="LOAD_VIDEO",O="UPDATE_VIDEO_DETAIL",h="ERROR";function j(e,t){var a=t.type,n=t.payload;switch(a){case y:return{isLoading:!1,data:n,error:!1};case O:var r=e.data.merge({description:n.description,title:n.title,language:n.language});return E(E({},e),{},{data:r});case h:return{isLoading:!1,data:null,error:n};default:throw new Error}}function N(t){var a=t.id,n=Object(p.a)(e.Simpplr.Salesforce.Video.get,a),i=n.loading,o=n.result,s=n.error,m=Object(p.a)(e.Simpplr.Salesforce.Video.getCaptionsLanguages),v=m.loading,N=m.result,_=m.error,w=(v||_?{languages:[]}:N).languages,S=Object(u.a)(),D=S.success,k=S.danger,V=Object(d.useReducer)(j,{isLoading:!0,data:null,error:!1}),x=c()(V,2),L=x[0],I=x[1];Object(d.useEffect)((function(){i||v||I(s?{type:h,payload:s}:_?{type:h,payload:_}:{type:y,payload:Object(b.a)(o||{})})}),[i,v,o,s,_]);var B=Object(d.useCallback)((function(e){I({type:O,payload:e})}),[]),C=Object(d.useCallback)((function(t){return function(){var n=l()(r.a.mark((function n(i){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.Simpplr.Loader.show(),n.next=4,e.Simpplr.Salesforce.File.setDescription(a,"native_video",i.description,i.title,parseInt(i.language,10));case 4:"success"===n.sent.status&&(B(E(E({},i),{},{language:parseInt(i.language,10)})),e.Simpplr.Loader.hide(),t(),D(Object(g.a)("file.edit_video.save.label"))),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),e.Simpplr.Loader.hide(),k(Object(f.a)(n.t0));case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}),[a,k,D,B]);return E(E({},L),{},{languages:w,handleSave:C})}}).call(this,a(27))},3753:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return _}));var n=a(20),r=a.n(n),i=a(34),l=a.n(i),o=a(24),c=a.n(o),s=a(15),m=a.n(s),d=a(0),u=a.n(d),p=a(69),b=a.n(p),f=a(505),g=a(2021),v=a(21),E=a(513),y=a(560),O=a(226),h=a(1132),j=a(26),N=a(3);function _(t){var a=t.video,n=function(t){var a=Object(y.a)().danger,n=t.get("id"),i=t.get("isLiked"),o=t.get("isFavorited"),s=Object(d.useState)(i),m=c()(s,2),u=m[0],p=m[1],b=Object(d.useState)(o),f=c()(b,2),g=f[0],v=f[1];return Object(h.a)((function(){l()(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.Simpplr.Loader.show(),t.next=4,e.Simpplr.Salesforce.File.setLiked(n,u);case 4:"success"===t.sent.status&&e.Simpplr.Loader.hide(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.Simpplr.Loader.hide(),a(Object(j.a)(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}),[a,u,n]),Object(h.a)((function(){l()(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.Simpplr.Loader.show(),t.next=4,e.Simpplr.Salesforce.Video.setFavorited(n,g);case 4:"success"===t.sent.status&&e.Simpplr.Loader.hide(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),e.Simpplr.Loader.hide(),a(Object(j.a)(t.t0));case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()}),[a,g,n]),{liked:u,setLiked:p,favourite:g,setFavourite:v}}(a),i=n.liked,o=n.setLiked,s=n.favourite,p=n.setFavourite,b=Object(O.c)(u.a.createElement(E.a,{file:a,isVideo:!0})).open,_=i?"common.unlike_this_noun":"common.like_this_noun",w=u.a.createElement(g.a,{isLegacy:!0,context:"reply",isLiked:i,onLike:function(){return o(!0)},onUnlike:function(){return o(!1)},id:"videoLike"},(function(e,t){return u.a.createElement("button",{className:m()("ActionBar-button","theme--hover--fill",{"theme--fill":e}),type:"button",onClick:t,title:Object(N.a)(_,{noun:Object(N.a)("common.file")})},u.a.createElement(v.a,{name:e?"like-filled":"like"}))})),S=u.a.createElement(f.a,{hasTooltip:!0,context:"file",isStarred:s,onFavorite:function(){return p(!0)},onUnfavorite:function(){return p(!1)},isLegacy:!1},(function(e,t){return e?u.a.createElement("button",{className:"ActionBar-button ActionBar-button--favorite is-favorited",onClick:t,type:"button",title:Object(N.a)("content.remove_from_favorites")},u.a.createElement(v.a,{name:"star-selected"})):u.a.createElement("button",{className:"ActionBar-button ActionBar-button--favorite",onClick:t,type:"button",title:Object(N.a)("content.add_to_favorites")},u.a.createElement(v.a,{name:"star"}))}));return u.a.createElement("div",{className:"ActionBar u-marg-t--xxlarge-sketchSize u-marg-b--xxlarge-sketchSize"},u.a.createElement("div",{className:"ActionBar-item"},w),u.a.createElement("div",{className:"ActionBar-item"},S),u.a.createElement("div",{className:"ActionBar-item"},u.a.createElement("button",{type:"button",className:"ActionBar-button theme--hover--fill",onClick:b,title:Object(N.a)("file.options.share")},u.a.createElement(v.a,{name:"share"}))))}_.propTypes={video:b.a.map.isRequired}}).call(this,a(27))},4087:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ae}));var n=a(0),r=a.n(n),i=a(190),l=a(129),o=a(1034),c=a(4),s=a.n(c),m=a(1),d=a.n(m),u=a(241),p=a(70),b=a(215),f=a(481),g=a(657),v=a(568),E=a(851),y=a(114),O=a(3);function h(e){var t=e.reference,a=t.get("isContent")||t.get("isBlog"),n=t.get("videoUploadDate"),i=t.get("peopleId"),l=t.get("feedPost"),o=t.get("content"),c=t.get("isHomeFeedPost"),s=a?o.get("authoredBy"):l.get("authoredBy"),m=r.a.createElement(v.a,{createdAt:n,translationKey:"common.on_date",isLowercase:!0}),d=a?o.get("url"):s.get("url"),u=a?r.a.createElement(f.a,{content:o,url:d}):r.a.createElement(y.a,{img:s.get("img"),peopleId:i}),p=a?o.get("title"):s.get("name");return r.a.createElement(E.a,{size:"micro",showSeperator:!1,media:u,url:d,title:p,meta:function(){if(a)return r.a.createElement(g.a,{showDate:!0,showSite:!0,createdAt:n,site:o.get("site"),authoredBy:s});var e=l.get("url");return c?r.a.createElement("p",{className:"type--b3 type--secondary u-textTruncate"},Object(O.a)("references.meta.in_home_feed",{date:m,link:r.a.createElement("a",{href:e})})):r.a.createElement("p",{className:"type--b3 type--secondary u-textTruncate"},Object(O.a)("references.meta.in_site_feed",{date:m,link:r.a.createElement("a",{href:e}),siteName:l.getIn(["site","name"])}))}()})}h.propTypes={reference:d.a.instanceOf(s.a.Map).isRequired};var j=h,N=a(3749);function _(e){var t=e.videoId,a=Object(N.a)({initialParams:new s.a.Map({entryId:t,size:5})}),n=a.references,i=a.loading,l=a.loadMore,o=a.canPaginate;if(!n.size)return i?r.a.createElement(b.a,null):r.a.createElement(p.a,null);var c=n.map((function(e){return r.a.createElement(j,{reference:e,key:e.get("id")})})),m=i&&!n.size;return r.a.createElement(r.a.Fragment,null,m?r.a.createElement(b.a,null):c,!m&&r.a.createElement(u.a,{canLoad:o,onLoad:l,isLoading:i},(function(e){return r.a.createElement("button",{className:"type--fauxLink LoadMore-button",type:"button",onClick:e},Object(O.a)("common.show_more"))})))}_.propTypes={videoId:d.a.string.isRequired};var w=_,S=a(3752),D=a(1997),k=a(409),V=a(1296),x=a(53),L=a(66),I=a(226),B=a(32),C=a(288),P=a(89),A=a(3753),z=a(208),F=a(55),T=a(1001),R=a(245),M=a(1006),q=a(117),H=a(113),U=a(47);var W=Object(H.a)((function(){return{title:Object(O.a)("file.edit_video.modal_title"),classes:["Modal--small"]}}))((function(e){var t=e.close,a=e.video,i=e.languages,l=e.handleSave,o=String(a.get("language")),c=Object(n.useMemo)((function(){return i.map((function(e){var t=e.id,a=e.language,n="file.edit_video.language.".concat(a.replace(/[()]+/g,"").replace(" ","_").toLowerCase()),r=Object(O.a)(n);return r===n&&(r=a),{value:String(t),label:r}})).concat({value:"0",label:Object(O.a)("file.edit_video.language.other")})}),[i]);return r.a.createElement(z.b,{onSubmit:l(t),initialValues:{title:a.get("title"),language:o,description:a.get("description")}},(function(e){var a=e.submitting,n=e.invalid,i=e.handleSubmit,l=(e.form,e.values.language);return r.a.createElement("form",{onSubmit:i},r.a.createElement("div",{className:"Modal-content Modal-content--forms"},r.a.createElement("div",{className:"u-marg-b--large"},r.a.createElement(z.a,{component:q.a,name:"title",label:Object(O.a)("file.edit_video.name"),placeholder:Object(O.a)("file.edit_video.name"),isRequired:!0,hasNoInternalLabel:!0,hasLabelAbove:!0,validate:U.E}),r.a.createElement("p",{className:"type--fs13 type--secondary u-marg-t--small"},Object(O.a)("file.edit_video.name_help"))),r.a.createElement("div",{className:"u-marg-b--large Field--font"},r.a.createElement(z.a,{name:"description",component:R.a,placeholder:Object(O.a)("file.edit_video.description_placeholder"),label:Object(O.a)("file.edit_video.description_label"),hasNoInternalLabel:!0,hasLabelAbove:!0}),r.a.createElement("p",{className:"type--fs13 type--secondary u-marg-t--small"},Object(O.a)("file.edit_video.description_help"))),r.a.createElement("div",{className:"u-marg-b--medium"},r.a.createElement(z.a,{component:M.a,name:"language",label:Object(O.a)("file.edit_video.language_title"),hasLabelAbove:!0,isRequired:!0,validate:U.E,options:c}),r.a.createElement("p",{className:"type--fs13 type--secondary u-marg-t--small"},Object(O.a)("file.edit_video.language_help"))),"0"===l&&r.a.createElement("div",{className:"u-marg-b--medium"},r.a.createElement(T.a,{type:"warning"},r.a.createElement("p",null,Object(O.a)("file.edit_video.language_other_error")))),o!==l&&"0"!==l&&r.a.createElement("div",{className:"u-marg-b--medium"},r.a.createElement(T.a,{type:"warning"},r.a.createElement("p",null,Object(O.a)("file.edit_video.language_new_error"))))),r.a.createElement("div",{className:"Strip Strip--modal u-pad-t--mediumlarge u-pad-b--mediumlarge"},r.a.createElement("button",{type:"button",className:"type--brand Button--large u-pad-l--none",onClick:t},Object(O.a)("button_label.cancel")),r.a.createElement(F.a,{type:"submit",size:"large",label:Object(O.a)("button_label.save"),appearance:"brand",disabled:a||n})))}))})),J=a(24),K=a.n(J),G=a(69),Q=a.n(G),X=a(1018),Y=a(244);var Z=function(e){var t=e.site;return r.a.createElement(Y.a,{to:"/site/".concat(t.get("siteId"))},t.get("name"))};function $(e){var t=e.sites,a=t.size,i=Object(n.useState)(a>5?5:a),l=K()(i,2),o=l[0],c=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(X.a,{delimiter:r.a.createElement("span",{className:"type--brand"},", ")},t.slice(0,o).map((function(e){return r.a.createElement(Z,{site:e,key:e.get("siteId")})})))),a>o&&r.a.createElement("button",{type:"button",className:"type--brand",onClick:function(){c(a)}},Object(O.a)("video_detail_info.show_additional_sites",{count:a-5})))}$.propTypes={sites:Q.a.list.isRequired};var ee=$;var te=function(e){var t,a,n=e.video,i=e.handleSave,l=e.languages,o=Object(I.c)(r.a.createElement(W,{handleSave:i})).openWithProps,c=null===(t=l.find((function(e){var t=e.id;return n.get("language")===t})))||void 0===t?void 0:t.language,s=n.get("sites");return r.a.createElement("div",{className:"VideoDetails-overview"},r.a.createElement("header",{className:"TitleWithDivider u-alignItemsCenter u-marg-b--small-sketchSize"},r.a.createElement("div",{className:"type--h6 type--500"},Object(O.a)("common.details")),n.get("canEdit")&&r.a.createElement("button",{type:"button",className:"type--brand",onClick:function(){return o({video:n,languages:l})}},Object(O.a)("common.edit"))),r.a.createElement("h1",{className:"type--h4 u-lineHeight--1p3 u-pad-b--small-sketchSize u-border-bottom"},n.get("title")),r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",{className:"VideoDetails-item"},r.a.createElement("div",{className:"VideoDetails-body"},r.a.createElement("div",{className:"VideoDetails-body--title"},Object(O.a)("common.owner")),n.get("owner")&&r.a.createElement("div",{className:"VideoDetails-body--info"},r.a.createElement(x.a,{to:Object(P.l)(n.getIn(["owner","id"]))},r.a.createElement("span",null,n.getIn(["owner","name"])))))),r.a.createElement("li",{className:"VideoDetails-item"},r.a.createElement("div",{className:"VideoDetails-body"},r.a.createElement("div",{className:"VideoDetails-body--title"},Object(O.a)("common.type")),r.a.createElement("div",{className:"VideoDetails-body--info"},n.get("type")))),r.a.createElement("li",{className:"VideoDetails-item"},r.a.createElement("div",{className:"VideoDetails-body"},r.a.createElement("div",{className:"VideoDetails-body--title"},Object(O.a)("common.size")),r.a.createElement("div",{className:"VideoDetails-body--info"},Object(C.a)(n.get("size"),2)))),r.a.createElement("li",{className:"VideoDetails-item"},r.a.createElement("div",{className:"VideoDetails-body"},r.a.createElement("div",{className:"VideoDetails-body--title"},Object(O.a)("common.language")),r.a.createElement("div",{className:"VideoDetails-body--info"},Object(O.a)("file.edit_video.language.".concat(c?null==c?void 0:c.replace(/[()]+/g,"").replace(" ","_").toLowerCase():"other"))))),r.a.createElement("li",{className:"VideoDetails-item"},r.a.createElement("div",{className:"VideoDetails-body"},r.a.createElement("div",{className:"VideoDetails-body--title"},Object(O.a)("listing.heading.sites")),r.a.createElement("div",{className:"VideoDetails-body--info"},s.size?r.a.createElement(ee,{sites:s}):Object(O.a)("common.none")))),r.a.createElement("li",{className:"VideoDetails-item"},r.a.createElement("div",{className:"VideoDetails-body"},r.a.createElement("div",{className:"VideoDetails-body--title"},Object(O.a)("video_detail_info.uploaded")),r.a.createElement("div",{className:"VideoDetails-body--info"},null===(a=Object(B.j)(n.get("uploadedAt")))||void 0===a?void 0:a.format(Object(B.o)(L.g))))),r.a.createElement("li",{className:"VideoDetails-item"},r.a.createElement("div",{className:"VideoDetails-body"},r.a.createElement("p",{className:"type--fs13 u-lineHeight--1p3"},n.get("description")||Object(O.a)("video_detail_info.no_description")))))),r.a.createElement(A.a,{video:n}))};function ae(e){var t=e.match.params.id,a=Object(S.a)({id:t}),n=a.isLoading,c=a.data,s=a.languages,m=a.handleSave,d=a.error;if(n)return r.a.createElement(l.a,null);if(d)switch(d){case"404":return r.a.createElement(k.a,null);case"403":return r.a.createElement(D.a,null);default:return r.a.createElement(V.a,null)}if(!c.get("isAccessible"))return r.a.createElement(D.a,null);return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{text:c.get("title")||"",name:"VideoDetail"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"Page u-noFloatRightHack"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"large-8 large-push-4 column"},r.a.createElement("div",{className:"VideoPlayer-preview video-fluid"},r.a.createElement(o.a,{video:c,withTranscript:!0,playerConfig:{playback:{autoplay:!1,startTime:0},plugins:{"playkit-js-transcript":{position:"bottom",showTime:!1,expandMode:"alongside",expandOnFirstPlay:!0,downloadDisabled:!0,printDisabled:!0}}}}))),r.a.createElement("div",{className:"large-4 large-pull-8 column"},r.a.createElement(te,{video:c,handleSave:m,languages:s}),r.a.createElement("div",{className:"TitleWithDivider u-alignItemsCenter"},r.a.createElement("div",{className:"type--h6 type--500"},Object(O.a)("common.reference_plural"))),r.a.createElement(w,{videoId:c.get("id")})))))))}}}]);