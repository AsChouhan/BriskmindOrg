(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{2582:function(e,t,a){e.exports={definitionList:"DefinitionList-module-definitionList___3BZ_6",title:"DefinitionList-module-title___2Pqwr",content:"DefinitionList-module-content___3au59",seperator:"DefinitionList-module-seperator___5WWW5","seperator--dashed":"DefinitionList-module-seperator--dashed___23ZZb",split:"DefinitionList-module-split___3wNvj",squashed:"DefinitionList-module-squashed___1ksg3",stacked:"DefinitionList-module-stacked___3amYU",lined:"DefinitionList-module-lined____K3g9",item:"DefinitionList-module-item___2-bQd",stackedBorder:"DefinitionList-module-stackedBorder___2w8TJ"}},2583:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var n=a(10),r=a.n(n),i=a(11),l=a.n(i),s=a(12),c=a.n(s),o=a(13),u=a.n(o),m=a(8),d=a.n(m),p=a(5),b=a.n(p),h=a(15),f=a.n(h),g=a(1),v=a.n(g),O=a(0),y=a.n(O),j=a(1004),E=a(2582),_=a.n(E);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=d()(e);if(t){var r=d()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return u()(this,a)}}var S=function(e){c()(a,e);var t=w(a);function a(){return r()(this,a),t.apply(this,arguments)}return l()(a,[{key:"render",value:function(){var e,t=this.props,a=t.title,n=t.children,r=t.isBlock,i=t.isHtml,l=t.whiteSpaceNormal,s=f()((e={},b()(e,_.a.item,!0),b()(e,"u-whiteSpaceNormal",l),e));if(!n)return null;var c=i&&"string"==typeof n?y.a.createElement("dd",{className:_.a.content,dangerouslySetInnerHTML:{__html:Object(j.a)(n)}}):y.a.createElement("dd",{className:_.a.content},n),o=y.a.createElement(y.a.Fragment,null,y.a.createElement("dt",{className:_.a.title},a),c);return r?y.a.createElement("div",{className:s},o):o}}]),a}(y.a.PureComponent);b()(S,"propTypes",{title:v.a.node.isRequired,children:v.a.node,isBlock:v.a.bool,isHtml:v.a.bool,whiteSpaceNormal:v.a.bool}),b()(S,"defaultProps",{whiteSpaceNormal:v.a.bool})},2590:function(e,t,a){"use strict";a.d(t,"a",(function(){return O})),a.d(t,"b",(function(){return y}));var n=a(20),r=a.n(n),i=a(5),l=a.n(i),s=a(34),c=a.n(s),o=a(480),u=a.n(o),m=a(1),d=a.n(m),p=a(0),b=a.n(p),h=(a(141),a(1012)),f=a(1252);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function O(e){var t=e.endpoint,a=e.defaultParams,n=e.valueField,i=e.labelField,l=e.itemFactory,s=e.excluded,o=void 0===s?[]:s,u=e.getItemsFromResponse,m=void 0===u?function(e){return e.result.listOfItems}:u;return function(){var e=c()(r.a.mark((function e(s){var c,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=s.trim(),e.next=3,Object(f.b)(t,v(v({},a),{},{term:c,size:9999}));case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",m(u).filter((function(e){return!o.includes(e[n])})).map((function(e){return{value:e[n],label:e[i],item:l(e)}})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function y(e){var t=e.endpoint,a=e.valueField,n=e.labelField,i=e.itemFactory,l=e.getItemFromResponse,s=void 0===l?function(e){return e.result}:l;return function(){var e=c()(r.a.mark((function e(l){var c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Array.isArray(l)?l:[l],e.next=3,Promise.all(c.map((function(e){return Object(f.b)(t,e)})));case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",o.map(s).filter((function(e){return!!e})).map((function(e){return{value:e[a],label:e[n],item:i(e)}})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function j(e){var t=e.load,a=e.loadInitialOptions,n=e.makeOption,r=e.canCreate,i=e.isMulti,l=e.placeholder,s=e.icon,c=e.inputId,o=e.renderOption,m=e.isOptionDisabled,d=e.value,f=e.onChange,g=e.onBlur,v=e.onFocus,O=e.isDisabled,y=e.isValueModel,j=e.createItem,E=e.isValidNewOption,_=e.autoFocus,w=e.isLegacyIcon,S=e.isReduxForm,N=e.hasClearButton,I=e.cacheOptions,P=e.defaultOptions,C=u()(Object(p.useCallback)((function(e,a){t(e).then(a)}),[t]),250);return b.a.createElement(h.a,{loadOptions:C,loadInitialOptions:a,isMulti:i,defaultOptions:P,canCreate:r,makeOption:n,hasClearButton:N,cacheOptions:I,placeholder:l,renderOption:o,inputId:c,icon:s,value:d,onChange:f,onFocus:v,onBlur:g,isDisabled:O,isOptionDisabled:m,isValueModel:y,createItem:j,isValidNewOption:E,autoFocus:_,isLegacyIcon:w,isReduxForm:S})}j.propTypes={load:d.a.func.isRequired,makeOption:d.a.func.isRequired,canCreate:d.a.bool,isMulti:d.a.bool,isValueModel:d.a.bool,cacheOptions:d.a.bool,isDisabled:d.a.bool,isOptionDisabled:d.a.func,placeholder:d.a.string,icon:d.a.string,value:d.a.oneOfType([d.a.string,d.a.shape({}),d.a.arrayOf(d.a.string),d.a.arrayOf(d.a.shape({}))]),onChange:d.a.func,onBlur:d.a.func,onFocus:d.a.func,inputId:d.a.string,isValidNewOption:d.a.func,autoFocus:d.a.bool,isLegacyIcon:d.a.bool,isReduxForm:d.a.bool,hasClearButton:d.a.bool},j.defaultProps={canCreate:!1,isMulti:!1,icon:"search",isLegacyIcon:!1,isReduxForm:!1,hasClearButton:!1,cacheOptions:!0},t.c=j},2591:function(e,t,a){"use strict";var n=a(16),r=a.n(n),i=a(5),l=a.n(i),s=a(71),c=a.n(s),o=a(1),u=a.n(o),m=a(0),d=a.n(m),p=a(123),b=a(380);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){e.icon;var t=c()(e,["icon"]),a=t.id,n=t.pickerComponent,i=t.input,l=t.placeholder,s=t.isMulti,o=t.defaultParams,u=(t.isStaticLabel,t.isValueModel),m=t.isDisabled,h=t.valueField,g=t.isOptionDisabled,v=t.canCreate,O=t.excluded,y=t.autoFocus,j=t.renderOption,E=t.makeOption,_=t.meta,w=t.hasClearButton,S=t.cacheOptions,N=t.isLegacyIcon,I=t.defaultOptions,P="".concat(Object(p.a)(a,i),"_input");return d.a.createElement(b.a,r()({inputType:"reactSelect",id:P},t),d.a.createElement(n,{isMulti:s,placeholder:l,isValueModel:u,input:f({},i),meta:_,valueField:h,renderOption:j,makeOption:E,inputId:P,cacheOptions:S,isDisabled:m,isOptionDisabled:g,defaultParams:o,excluded:O,canCreate:v,autoFocus:y,hasClearButton:w,isLegacyIcon:N,defaultOptions:I}))}g.propTypes={pickerComponent:u.a.elementType.isRequired,isValueModel:u.a.bool,canCreate:u.a.bool,autoFocus:u.a.bool,meta:u.a.shape({}),hasClearButton:u.a.bool,isStaticLabel:u.a.bool,cacheOptions:u.a.bool,renderOption:u.a.func,isOptionDisabled:u.a.func,defaultOptions:u.a.bool},g.defaultProps={autoFocus:!1,hasClearButton:!1,isStaticLabel:!0,cacheOptions:!0,defaultOptions:!1},t.a=g},2593:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(15),l=a.n(i),s=a(1),c=a.n(s),o=a(0),u=a.n(o),m=a(2582),d=a.n(m);function p(e){var t,a=e.children,n=e.layout,i=u.a.Children.toArray(a).filter((function(e){return!!e}));if(0===i.length)return!1;var s=l()((t={},r()(t,d.a.definitionList,!0),r()(t,d.a[n],n),t));return u.a.createElement("dl",{className:s},i)}p.propTypes={children:c.a.node.isRequired,layout:c.a.oneOf(["stacked","squashed","lined","stackedBorder"])},p.defaultProps={layout:null},t.a=p},2600:function(e,t,a){"use strict";var n=a(1),r=a.n(n),i=a(0),l=a.n(i),s=a(18),c=a(21);function o(e){var t=e.message;return l.a.createElement("div",{className:"ErrorPage ErrorPage--fixed"},l.a.createElement("div",{className:"ErrorPage-inner"},l.a.createElement("div",{className:"ErrorPage-iconContainer u-marg-b--medium"},l.a.createElement(c.a,{isLegacy:!0,name:"alert"})),l.a.createElement("h4",{className:"type--h1"},t)))}o.propTypes={message:r.a.string.isRequired};var u=o,m=a(167),d=a(3);function p(e){var t=e.children;return"mobile"===e.viewport?l.a.createElement("div",{className:"u-sm-show"},l.a.createElement(u,{message:Object(d.a)("common.page_not_available_on_mobile")})):t||null}p.propTypes={children:r.a.oneOfType([r.a.arrayOf(r.a.element),r.a.element])};t.a=Object(s.connect)((function(e){return{viewport:Object(m.a)(e)}}))(p)},2611:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(0),l=a.n(i),s=a(18),c=a(1997),o=a(30);t.a=function(e,t){return Object(s.connect)((function(t){return r()({},e,Object(o.getCurrentUserPermissions)(t).get(e))}))((function(a){return a[e]?l.a.createElement(t,a):l.a.createElement(c.a,null)}))}},2636:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(5),r=a.n(n),i=a(15),l=a.n(i),s=a(0),c=a.n(s),o=a(558),u=a.n(o),m=a(923);function d(e){var t=e.size,a=void 0===t?"large":t,n=e.children,i=l()(u.a.spacingBottom,r()({},u.a["spacing-".concat(Object(m.a)(a))],!0));return c.a.createElement("div",{className:i},n)}},2648:function(e,t,a){"use strict";(function(e){var n=a(16),r=a.n(n),i=a(71),l=a.n(i),s=a(0),c=a.n(s),o=a(53),u=a(2649),m=a(324),d=a(654),p=a(284),b=a(3),h=a(1012),f=a(380);function g(t){var a=t.input,n=t.meta,i=t.isDisabled,s=l()(t,["input","meta","isDisabled"]),g=Object(d.a)(e.Simpplr.Salesforce.Audience.search,{size:9999}),v=g.loading,O=g.loaded,y=g.result,j=Object(m.b)(),E=j.isSegmentManager,_=j.isAppManager,w=E||_,S=O&&!y.listOfItems.length;return c.a.createElement(f.a,r()({input:a,meta:n},s),c.a.createElement(h.a,r()({isLoading:v,options:O&&y.listOfItems.map(p.c)||[],makeOption:function(e){var t=e.audienceId,a=e.name,n=e.audienceCount;return{value:t,label:"".concat(a," (").concat(n,")")}},renderOption:function(e){var t=e.data.item;return c.a.createElement(u.a,{audience:t})}},s,{isDisabled:i||S,value:a.value,onChange:a.onChange,onFocus:a.onFocus,onBlur:function(){return a.onBlur(a.value)}})),S&&c.a.createElement("div",{className:"Field-error"},c.a.createElement("span",null,w?Object(b.a)("audiences.no_list_info",{link:c.a.createElement(o.a,{className:"type--error type--fauxLink--alt",to:"/audiences"})}):Object(b.a)("audiences.no_audience_standard_user_info"))))}g.propTypes={},t.a=g}).call(this,a(27))},2649:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(18),l=a(299),s=a(66),c=a(209),o=a(56),u=a(17),m=a(32),d=a(3);function p(e){var t=e.audience,a=Object(c.h)("peopleCustomFieldSingular"),n=Object(i.useSelector)(u.e),o=t.get("segment")&&"Segment:".concat(t.get("segment").name),p=t.get("listOfConditions")&&t.get("listOfConditions").map((function(e){var t=e.name,r=e.values,i="hireDate"===t&&r[0]?Object(d.a)("hireDateAfter"===r[0].id?"common.date_on_or_after":"common.date_on_or_before",{date:Object(m.e)(r[0].name,s.b)}):r.map((function(e){return e.name})).join(", "),l="category"===t&&a;if(!l){var c=n(t);l=c&&c.singular}return l||(l="hireDate"===t?Object(d.a)("profile_fields.hire_date"):Object(d.a)("profile_fields.".concat(t))),"".concat(l,":").concat(i)})).join(", "),b=t.get("listOfPeople")&&t.get("listOfPeople").map((function(e){return e.name})).join(", "),h=p||b,f=o?"".concat(o,", ").concat(h):h;return r.a.createElement(l.a,null,r.a.createElement("div",{className:"Panel-item"},r.a.createElement("span",{className:"type--500 type--b2"},"".concat(t.get("name")," (").concat(t.get("audienceCount"),")")),r.a.createElement("span",{className:"u-displayBlock type--b4 u-textTruncate"},f)))}p.propTypes={audience:o.a.audience.isRequired},t.a=p},2684:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return p})),a.d(t,"a",(function(){return b}));var n=a(5),r=a.n(n),i=a(24),l=a.n(i),s=a(0),c=a(1336),o=a(2685),u=a(478);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p=function(e,t){var a=Object(s.useState)([]),n=l()(a,2),r=n[0],i=n[1];return{filterSites:r,resultExtractor:function(a,n){var r=a.result,l=r.listOfItems,s=r.filterOptions.sites;return n(e(l)),i(s||[]),l.map((function(e){return e[t]}))}}};function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=p(c.j,"alertId"),n=a.resultExtractor,r=a.filterSites,i=Object(u.a)(d({endpoint:e.Simpplr.Salesforce.Alert.search,resultExtractor:n,itemSelector:o.a,itemName:"alerts"},t));return d(d({},i),{},{filterSites:r})}}).call(this,a(27))},2685:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(4),r=a.n(n),i=a(19);function l(e){return e.getIn(["alert","alerts"])}var s=Object(i.a)([l],(function(e){return e.map((function(e){return e.get("result")}))})),c=(Object(i.a)([l,function(e,t){return t}],(function(e,t){return e.get(t)})),Object(i.a)([s,function(e,t){return new r.a.List(t)}],(function(e,t){return t.map((function(t){return e.get(t)})).filter((function(e){return!!e}))})))},2713:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(16),r=a.n(n),i=a(0),l=a.n(i),s=a(2762),c=a(2591);function o(e){return l.a.createElement(c.a,r()({},e,{pickerComponent:s.a}))}},2762:function(e,t,a){"use strict";(function(e){var n=a(1),r=a.n(n),i=a(0),l=a.n(i),s=a(758),c=a(51),o=a(2590);function u(t){var a=t.isMulti,n=t.isValueModel,r=t.placeholder,i=t.icon,u=t.input,m=void 0===u?{}:u,d=t.defaultParams,p=t.hasClearButton,b=t.excluded,h=void 0===b?[]:b,f=Object(o.a)({endpoint:e.Simpplr.Salesforce.Site.search,defaultParams:d,valueField:"siteId",labelField:"name",itemFactory:c.b,excluded:h});return l.a.createElement(o.c,{isMulti:a,isValueModel:n,placeholder:r,icon:i,load:f,makeOption:function(e){return{value:e.siteId||e.get("siteId"),label:e.name||e.get("name")}},renderOption:function(e){var t=e.data.item;return l.a.createElement(s.a,{site:t})},value:m.value,onChange:m.onChange,onBlur:m.onBlur,hasClearButton:p,onFocus:m.onFocus})}u.propTypes={isMulti:r.a.bool,isValueModel:r.a.bool,placeholder:r.a.string,icon:r.a.string,defaultParams:r.a.shape({})},u.defaultProps={isMulti:!1,icon:"search",defaultParams:{}},t.a=u}).call(this,a(27))},2763:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return m}));var n=a(20),r=a.n(n),i=a(31),l=a.n(i),s=a(34),c=a.n(s),o=a(1252),u=a(3);function m(){return d.apply(this,arguments)}function d(){return(d=c()(r.a.mark((function t(){var a,n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.b)(e.Simpplr.Salesforce.Utility.getSchedulingSlots);case 2:return a=t.sent,n=a.result,t.abrupt("return",[{value:null,label:Object(u.a)("common.select_placeholder")}].concat(l()(n)));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}).call(this,a(27))},2764:function(e,t,a){"use strict";var n=a(15),r=a.n(n),i=a(22),l=a.n(i),s=a(1),c=a.n(s),o=a(0),u=a.n(o),m=a(66),d=a(32),p=a(3);function b(e){var t=e.isCommaSeperated,a=e.input,n=e.includeTime;if(!a)return null;var i=Object(d.j)(a),l=i.format(m.d),s=i.format(m.j);return t&&(s=", ".concat(s)),n&&(l=i.format(m.b),s=i.format("[".concat(Object(p.a)("common.date_at_time"),"] ").concat(m.q))),u.a.createElement("div",null,l,u.a.createElement("span",{className:r()({"u-displayBlock":!t})},s))}b.propTypes={includeTime:c.a.bool,isCommaSeperated:c.a.bool,input:c.a.oneOfType([c.a.string,c.a.instanceOf(l.a)])},b.defaultProps={includeTime:!1,isCommaSeperated:!1},t.a=b},4084:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a.n(n),i=a(0),l=a.n(i),s=a(36),c=a(190),o=a(544),u=a(20),m=a.n(u),d=a(34),p=a.n(d),b=a(10),h=a.n(b),f=a(11),g=a.n(f),v=a(7),O=a.n(v),y=a(12),j=a.n(y),E=a(13),_=a.n(E),w=a(8),S=a.n(w),N=a(5),I=a.n(N),P=a(4),C=a.n(P),F=a(22),k=a.n(F),T=a(18),D=a(53),x=a(37),R=a(1336),L=a(14),A=a(32),M=a(3);var B=a(55),V=a(758),q=a(2003),z=a(2648),U=a(225),W=a(853),J=a(242),H=a(656),Z=a(1006),K=a(2713),Q=a(117),Y=a(2600),G=a(66),X=a(30),$=a(17),ee=a(2763),te=a(47),ae=a(1),ne=a.n(ae),re=a(2593),ie=a(2583),le=a(2636);function se(e){return"".concat("site"===e?Object(M.a)("site.member_plural"):Object(M.a)("audience"),":")}function ce(e){var t=e.recipient,a=e.site,n=e.numberOfRecipients,r=e.authoredBy,i=e.status,s=e.displayFrom,c=e.seenCount,o=e.audience,u=e.segment,m=e.membersType,d=Math.round(c/n*100),p=Object(M.a)("site.member_plural");return"site_members_and_followers"===m&&(p=Object(M.a)("dashboard.tile.people.site_members.title")),l.a.createElement(re.a,{layout:"squashed"},l.a.createElement(le.a,{size:"s"},l.a.createElement(ie.a,{title:"".concat(Object(M.a)("alert.form.recipients.heading"),":")},l.a.createElement(l.a.Fragment,null,"site"===t&&p,"audience"===t&&Object(M.a)("audience"),"everyone"===t&&"".concat(Object(M.a)("common.all_organization")," (").concat(n,")"),"segment"===t&&Object(M.a)("common.segment")))),l.a.createElement(le.a,{size:"s"},l.a.createElement(ie.a,{title:"site"===t||"audience"===t?se(t):""},"segment"===t&&Object(M.a)("common.segment"),"site"===t&&"".concat(a.get("name")," (").concat(n,")"),"audience"===t&&"".concat(o.get("name")," (").concat(n,")"),"segment"===t&&"".concat(u.get("name")," (").concat(n,")"))),l.a.createElement(le.a,{size:"s"},l.a.createElement(ie.a,{title:"".concat(Object(M.a)("alert.recipient_info.author"),":")},l.a.createElement("a",{href:r.url},r.name))),"active"===i&&l.a.createElement(le.a,{size:"s"},l.a.createElement(ie.a,{title:"".concat(Object(M.a)("alert.recipient_info.seen_by"),":")},c," (",d,"%)")),s&&"active"===i&&l.a.createElement(le.a,{size:"s"},l.a.createElement(ie.a,{title:"".concat(Object(M.a)("alert.recipient_info.seen_on"),":")},s)))}ce.propTypes={recipient:ne.a.string,status:ne.a.string,displayFrom:ne.a.string,numberOfRecipients:ne.a.number};var oe=ce;function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=S()(e);if(t){var r=S()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return _()(this,a)}}var me="ALERTS_FORM",de=Object(x.formValueSelector)(me),pe=function(e){j()(a,e);var t=ue(a);function a(e){var n;return h()(this,a),n=t.call(this,e),I()(O()(n),"state",{schedulingSlots:[]}),I()(O()(n),"populateSchedulingSlots",p()(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ee.a)();case 2:t=e.sent,n.setState({schedulingSlots:t});case 4:case"end":return e.stop()}}),e)})))),I()(O()(n),"setAlertAudience",(function(e){e.persist(),"everyone"===e.target.value&&(n.props.change("site",void 0),n.props.change("siteId",""),n.props.change("audience",void 0),n.props.change("segment",void 0)),"audience"===e.target.value&&(n.props.change("site",void 0),n.props.change("siteId",""),n.props.change("segment",void 0)),"site"===e.target.value&&(n.props.change("audience",void 0),n.props.change("segment",void 0)),"segment"===e.target.value&&(n.props.change("site",void 0),n.props.change("siteId",""),n.props.change("audience",void 0),n.props.change("segment",new C.a.Map({name:n.props.currentSegmentName}))),n.onPreviewChange()})),n.onSubmit=n.onSubmit.bind(O()(n)),n.onPreviewChange=n.onPreviewChange.bind(O()(n)),n.togglePreview=n.togglePreview.bind(O()(n)),n.renderRecipients=n.renderRecipients.bind(O()(n)),n.renderSidebar=n.renderSidebar.bind(O()(n)),n}return g()(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.match.params.alertId&&"_new"!==this.props.match.params.alertId&&this.props.load(),!this.props.canSendToAll&&this.props.availableSites&&!this.props.availableSites.get("result").size>0&&!this.props.availableSites.get("loaded")&&!this.props.availableSites.get("loading")&&this.props.getAvailableSites(),this.populateSchedulingSlots()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.durationStart&&!e.durationStart&&e.displayTo&&this.props.touch("displayTo"),this.props.loaded||!e.loaded||"scheduled"!==e.status&&"active"!==e.status||(this.props.hideActive(),this.props.showPreview(e.initialValues.get("message"),e.initialValues.get("url"),"true"===e.initialValues.get("isDismissible"),e.initialValues.get("site"),e.initialValues.get("audience"),e.initialValues.get("segment")))}},{key:"componentWillUnmount",value:function(){this.props.showActive(),this.props.hidePreview()}},{key:"onSubmit",value:function(e){var t=this;return this.props.handleSubmit((function(a){var n=t.state.schedulingSlots,r=t.props.site,i="private"===(null==r?void 0:r.access)||"unlisted"===(null==r?void 0:r.access);if("scheduleStart"!==a.get("durationStart")||0!==n.filter((function(e){return!!e.value})).length){var l=a.merge({isDismissible:"true"===a.get("isDismissible"),audience:a.get("audience"),segmentId:t.props.currentSegmentId,siteId:a.getIn(["site","id"])});i&&(l=l.set("membersType","site_members")),"immediately"===a.get("durationStart")&&(l=l.set("displayFrom",Object(A.j)().format()));var s,c="scheduleStart"===a.get("durationStart")?a.get("displayFrom"):void 0;if("custom"!==a.get("duration"))"24hours"===a.get("duration")?s=Object(A.j)(c).add(24,"hours"):"48hours"===a.get("duration")?s=Object(A.j)(c).add(48,"hours"):"7days"===a.get("duration")&&(s=Object(A.j)(c).add(7,"days")),l=l.set("displayTo",s.format());return l=(l=l.delete("segment")).delete("duration").delete("durationStart"),t.props.hasUrl||(l=l.delete("url")),"submit"===e?("_new"!==t.props.match.params.alertId?t.props.update(l):t.props.create(l)).then((function(){t.props.history.push({pathname:"/alerts"})})):Promise.resolve({})}t.props.addFailedToCreateAlertError()}))}},{key:"onPreviewChange",value:function(){var e=this;this.props.isPreviewActive&&setTimeout((function(){e.props.hidePreview(),e.props.showPreview(e.props.message,e.props.hasUrl&&e.props.url,e.props.isDismissible,"site"===e.props.recipient?e.props.site:{},"audience"===e.props.recipient?e.props.audience:{},"segment"===e.props.recipient?e.props.segment:{})}))}},{key:"getSelectedSiteOption",value:function(){var e=this.props.alert.get("site",new C.a.Map);return e.merge({value:e.get("id"),label:e.get("name")}).toJS()}},{key:"togglePreview",value:function(e){e.preventDefault(),this.props.isPreviewActive?this.props.hidePreview():this.props.showPreview(this.props.message,this.props.url,this.props.isDismissible,this.props.site,this.props.audience,this.props.segment)}},{key:"renderSidebar",value:function(){var e=this.props,t=e.durationStart,a=e.status,n=e.match,r="_new"===this.props.match.params.alertId,i=null;if("_new"===n.params.alertId||"scheduled"===a){var s=Object(A.j)(this.props.displayTo);if(this.props.displayTo&&s.isValid()){var c=Object(A.j)();t&&this.props.displayFrom&&c.isValid()&&(c=Object(A.j)(this.props.displayFrom));var o=k.a.duration(s.diff(c));(!t||this.props.displayFrom&&c.isAfter(Object(A.j)()))&&s.isAfter(c)&&o.asDays()<=7&&(i=l.a.createElement("p",{className:"u-marg-b--medium type--secondary"},Object(M.a)("alert.form.active_for_duration",{duration:o.humanize()})))}}return l.a.createElement("div",{className:"Strip u-marg-t--medium u-pad-t--large u-textLeft"},r&&l.a.createElement(l.a.Fragment,null,l.a.createElement("header",{className:"set-header u-marg-b--small u-textLeft"},l.a.createElement("h3",{className:"type--500"},Object(M.a)("alert.form.display_alert.label"))),l.a.createElement("div",{className:"u-marg-b--medium"},l.a.createElement(x.Field,{component:J.a,name:"durationStart",options:[{label:Object(M.a)("content.publish.from.immediately"),value:"immediately"},{label:Object(M.a)("alert.form.schedule_start.label"),value:"scheduleStart"}],onClick:this.onPreviewChange,isStacked:!0,isLight:!0}))),"scheduleStart"===t&&l.a.createElement("div",{className:"u-marg-b--medium u-zIndex--3 u-posRelative medium-9"},l.a.createElement(x.Field,{component:W.a,name:"displayFrom",label:Object(M.a)("common.date"),isRequired:!0,validate:[te.E],timeOptions:this.state.schedulingSlots})),l.a.createElement("header",{className:"set-header u-marg-b--small u-textLeft"},l.a.createElement("h3",{className:"type--500"},r?Object(M.a)("alert.form.alert_duration.label"):Object(M.a)("alert.form.alert_until.label"))),r&&l.a.createElement("div",{className:"u-marg-b--medium"},l.a.createElement(x.Field,{component:J.a,name:"duration",options:[{label:Object(M.a)("alert.form.duration_24.label"),value:"24hours"},{label:Object(M.a)("alert.form.duration_48.label"),value:"48hours"},{label:Object(M.a)("alert.form.duration_7.label"),value:"7days"},{label:Object(M.a)("alert.form.schedule_end.label"),value:"custom"}],onClick:this.onPreviewChange,isStacked:!0,isLight:!0})),l.a.createElement(Y.a,null),l.a.createElement(q.a,{when:this.props.dirty&&!this.props.submitting}),("custom"===this.props.duration||"scheduled"===this.props.status||"active"===this.props.status)&&l.a.createElement("div",{className:"u-marg-b--medium u-zIndex--2 u-posRelative medium-9"},l.a.createElement(x.Field,{component:W.a,name:"displayTo",label:Object(M.a)("common.date"),isRequired:!0,validate:[te.E],timeOptions:this.state.schedulingSlots})),i)}},{key:"renderRecipients",value:function(e,t,a){var n,r,i,s,c=this,o="_new"===this.props.match.params.alertId,u=this.props.alert,m=Object(A.j)(u.get("displayFrom")),d=null===(n=this.props.site)||void 0===n?void 0:n.get("memberCount",0),p=d+(null===(r=this.props.site)||void 0===r?void 0:r.get("followerCount",0)),b="private"===(null===(i=this.props.site)||void 0===i?void 0:i.access)||"unlisted"===(null===(s=this.props.site)||void 0===s?void 0:s.access),h=[{label:Object(M.a)("newsletter.recipients.audience"),value:"audience",icon:"audience"},{label:Object(M.a)("newsletter.recipients.site_members"),value:"site",icon:"sites"}];return t&&h.unshift({label:Object(M.a)("newsletter.recipients.everyone_in_segment",{segmentName:a}),value:"segment"}),t&&e&&h.unshift({label:Object(M.a)("newsletter.recipients.all_org"),value:"everyone",icon:"org",note:Object(M.a)("common.all_segments")}),t||h.unshift({label:Object(M.a)("newsletter.recipients.all_org"),value:"everyone",icon:"org"}),l.a.createElement("div",{className:"alerts-main"},l.a.createElement("div",{className:"set"},o&&l.a.createElement("div",null,l.a.createElement("header",{className:"set-header"},l.a.createElement("h3",{className:"type--500"},Object(M.a)("alert.form.recipients.heading"))),this.props.canSendToAll&&l.a.createElement("div",{className:"u-marg-b--medium"},l.a.createElement(x.Field,{component:t?J.a:H.a,hasLargeIcons:!0,name:"recipient",options:h,onClick:this.setAlertAudience,isFullWidth:!0,isStacked:!0,isLight:!0})),"audience"===this.props.recipient&&l.a.createElement("div",{className:"u-marg-t--large u-marg-b--mediumlarge"},l.a.createElement(x.Field,{component:z.a,name:"audience",isValueModel:!0,hasLabelAbove:!0,label:Object(M.a)("field.audience_selector.label_above"),placeholder:Object(M.a)("common.select_placeholder_audience"),isRequired:!0,validate:[te.E],onChange:function(e,t){c.props.change("audience",new C.a.Map(t)),c.onPreviewChange()}})),("site"===this.props.recipient||!this.props.canSendToAll)&&l.a.createElement("div",null,this.props.canSendToAll?l.a.createElement("div",{className:"u-marg-t--large u-marg-b--medium"},l.a.createElement(x.Field,{component:K.a,name:"siteId",isValueModel:!0,label:Object(M.a)("common.site"),hasLabelAbove:!0,isRequired:!0,hasClearButton:!0,isStaticLabel:!1,defaultParams:{filter:"canCreateAlert"},selectedOption:this.getSelectedSiteOption(),onChange:function(e){e?(c.props.change("site",e),c.onPreviewChange()):c.props.change("site",void 0)}})):l.a.createElement("div",{className:"u-marg-b--medium"},l.a.createElement(x.Field,{component:Z.a,name:"siteId",isValueModel:!0,hasClearButton:!0,label:Object(M.a)("field.site_selector.label_above"),isRequired:!0,placeholder:Object(M.a)("common.select_placeholder"),options:this.props.availableSites.get("result"),makeOption:function(e){return{value:e.siteId||e.get("siteId"),label:e.name||e.get("name")}},renderOption:function(e){var t=e.data.item;return l.a.createElement(V.a,{site:t})},onChange:function(e){e?(c.props.change("site",e),c.onPreviewChange()):c.props.change("site",void 0)}})),this.props.site&&!b&&l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"u-marg-t--large u-marg-b--small type--500 type--h6"},Object(M.a)("site.member_plural")),l.a.createElement("div",{className:"u-marg-b--medium"},l.a.createElement(x.Field,{component:J.a,name:"membersType",options:[{label:Object(M.a)("common.site_members_and_followers"),value:"site_members_and_followers",note:p},{label:Object(M.a)("common.site_members"),value:"site_members",note:d}],isStacked:!0,isLight:!0}))))),("scheduled"===this.props.status||"active"===this.props.status)&&l.a.createElement(oe,{label:Object(M.a)("common.alert"),status:this.props.status,recipient:this.props.recipient,audience:this.props.alert.get("audience"),segment:this.props.alert.get("segment"),membersType:this.props.alert.get("membersType"),site:this.props.alert.get("site"),authoredBy:this.props.alert.get("authoredBy").toJS(),numberOfRecipients:this.props.alert.get("recipientCount"),seenCount:this.props.alert.get("seenCount"),displayFrom:m.isValid()?m.format(Object(A.o)(G.g)):null})),l.a.createElement("div",{className:"set"},l.a.createElement("div",{className:"Strip u-marg-t--medium u-pad-t--large u-textLeft"},l.a.createElement("header",{className:"set-header u-marg-b--small u-textLeft"},l.a.createElement("h3",{className:"type--500"},Object(M.a)("field.message.label")," ",l.a.createElement("span",{className:"type--secondary type--b3 u-posRelative type--400"},"(",Object(M.a)("alert.form.message.label_note"),")"))),l.a.createElement("div",{className:"u-marg-b--medium"},l.a.createElement(x.Field,{component:Q.a,name:"message",id:"message",label:Object(M.a)("alert.form.message.label"),maxLength:80,showRemainingCharactersCount:!0,isRequired:!0,validate:[te.E],onChange:this.onPreviewChange,onBlur:this.onPreviewChange})),l.a.createElement("div",{className:"u-marg-b--medium"},l.a.createElement(x.Field,{name:"hasUrl",id:"hasUrl",label:Object(M.a)("alert.form.hasUrl.label"),component:U.a,onClick:this.onPreviewChange})),this.props.hasUrl&&l.a.createElement("div",{className:"u-marg-b--medium"},l.a.createElement(x.Field,{component:Q.a,name:"url",id:"url",placeholder:Object(M.a)("alert.form.url.placeholder"),label:Object(M.a)("alert.form.url.label"),icon:"link",onChange:this.onPreviewChange,isRequired:!0,validate:[te.E]})),l.a.createElement("header",{className:"set-header u-marg-t--large u-marg-b--small u-textLeft"},l.a.createElement("h3",{className:"type--500"},Object(M.a)("alert.form.alert_options.label"))),l.a.createElement("div",{className:"u-marg-b--medium"},l.a.createElement(x.Field,{component:J.a,name:"isDismissible",options:[{label:Object(M.a)("alert.form.isDismissible.option.true"),note:Object(M.a)("common.recommended"),value:"true"},{label:Object(M.a)("alert.form.isDismissible.option.false"),note:Object(M.a)("alert.form.isDismissible.option.false_note"),value:"false"}],onClick:this.onPreviewChange,isStacked:!0,isLight:!0})),l.a.createElement("div",{className:"u-floatLeft u-pad-b--medium"},l.a.createElement(B.a,{onClick:function(e){return c.togglePreview(e)},fontStyle:"b2",label:this.props.isPreviewActive?Object(M.a)("alert.form.hide_preview"):Object(M.a)("alert.form.show_preview")})))))}},{key:"render",value:function(){if("_new"===this.props.match.params.alertId&&!this.props.canSendToAll&&!this.props.availableSites.get("loaded"))return null;if("_new"!==this.props.match.params.alertId&&!this.props.alertId)return null;var e=this.props,t=e.durationStart,a=e.status,n=e.isAppManager,r=e.isSegmentsEnabled,i=e.currentSegmentName,s="scheduleStart"===t?Object(M.a)("alert.form.schedule_button.label"):Object(M.a)("alert.form.display_alert.label");return("scheduled"===a&&"scheduleStart"===t||"active"===a&&"immediately"!==t)&&(s=Object(M.a)("alert.form.save_exit_button.label")),l.a.createElement("div",null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"column"},l.a.createElement("div",{className:"Page"},l.a.createElement("header",{className:"Page-header"},l.a.createElement("div",{className:"Page-header-inner"},l.a.createElement("h1",{className:"Page-heading type--h4"},"_new"===this.props.match.params.alertId?Object(M.a)("common.alert_plural"):Object(M.a)("alert.form.edit_alert_label")))),l.a.createElement("form",{className:this.props.submitting?"is-disabled":""},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"column medium-8 medium-push-2"},l.a.createElement("div",null,this.renderRecipients(n,r,i),this.renderSidebar()))),l.a.createElement("div",{className:"Strip"},l.a.createElement(B.a,{label:s,type:"submit",disabled:this.props.submitting,onClick:this.onSubmit("submit"),appearance:"brand",size:"large"}),l.a.createElement(D.a,{to:"/alerts",className:"Strip-cancel"},Object(M.a)("button_label.cancel"))))))))}}]),a}(l.a.Component);var be=Object(s.k)(Object(T.connect)((function(e,t){var a=e.getIn(["currentUser","permissions","canSendAlertsToAll"]),n=e.getIn(["alert","alerts",t.match.params.alertId,"result"],new C.a.Map),r=a?"everyone":"site",i=Object($.V)(e),l=Object(X.isCurrentUserAppManager)(e);return{loading:e.getIn(["alert","alerts",t.match.params.alertId,"loading"]),loaded:e.getIn(["alert","alerts",t.match.params.alertId,"loaded"]),canSendToAll:a,alert:n,alertId:n.get("alertId","_new"),recipient:de(e,"recipient"),siteId:de(e,"siteId")||e.getIn(["alert","alerts","_new","site","id"]),site:de(e,"site"),audience:de(e,"audience"),segment:de(e,"segment"),availableSites:e.getIn(["alert","availableSites"],new C.a.Map({loading:!1,loaded:!1,result:new C.a.List})),status:n.get("status","draft"),durationStart:de(e,"durationStart"),duration:de(e,"duration"),hasUrl:de(e,"hasUrl"),message:de(e,"message"),isDismissible:"true"===de(e,"isDismissible"),url:de(e,"url"),isPreviewActive:e.getIn(["alert","alerts",t.match.params.alertId,"isPreviewActive"],!1),displayFrom:de(e,"displayFrom"),displayTo:de(e,"displayTo"),isSegmentsEnabled:i,currentSegmentId:Object(X.getCurrentUserSegmentId)(e),currentSegmentName:Object(X.getCurrentUserSegmentName)(e),isAppManager:l,initialValues:new C.a.Map({hasUrl:!!n.get("url"),recipient:"_new"===t.match.params.alertId?r:n.get("recipient"),siteId:n.getIn(["site","id"]),site:n.get("site"),isDismissible:!0===n.get("isDismissible",!0)?"true":"false",message:n.get("message")||"",url:n.get("url")||"",audience:n.get("audience"),audienceId:n.getIn(["audience","audienceId"]),displayFrom:n.get("displayFrom"),displayTo:Object(A.p)(n.get("displayTo")),durationStart:n.get("status")||"immediately",segment:"segment"===n.get("recipient")&&n.get("segment"),duration:"_new"===t.match.params.alertId?"24hours":"custom",membersType:n.get("membersType")||"site_members_and_followers"})}}),(function(e,t){return{load:function(){return e(Object(R.h)(t.match.params.alertId))},getAvailableSites:function(){return e(Object(R.e)())},showPreview:function(a,n,r,i,l,s){return e(Object(R.l)(t.match.params.alertId,a,n,r,i,l,s))},hidePreview:function(){return e(Object(R.g)(t.match.params.alertId))},showActive:function(){return e(Object(R.k)())},hideActive:function(){return e(Object(R.f)())},create:function(t){return e(Object(R.a)(t))},update:function(a){return e(Object(R.m)(t.match.params.alertId,a))},displayNow:function(){return e(Object(R.c)(t.match.params.alertId))},addFailedToCreateAlertError:function(){return e(Object(L.f)(Object(M.a)("alert.form.create_alert_failed_error")))}}}))(Object(x.reduxForm)({form:me,validate:function(e,t){var a={};"_new"===t.alertId&&(e.get("recipient")||(a.recipient=Object(M.a)("alert.form_error.select_recipient")),"site"!==e.get("recipient")||e.get("siteId")||(a.siteId=Object(M.a)("alert.form_error.select_site")));var n=Object(A.j)();if(["scheduled","draft"].includes(t.status)&&e.get("displayFrom")&&(n=k()(e.get("displayFrom"))).isSameOrBefore(Object(A.j)())&&(a.displayFrom=Object(M.a)("form_error.notInFuture")),e.get("displayTo")){var r=k()(e.get("displayTo"));r.isSameOrBefore(n)&&(a.displayTo=Object(M.a)("alert.form_error.select_later_date")),k.a.duration(r.diff(n)).asDays()>7&&(a.displayTo=Object(M.a)("alert.form_error.select_shorter_date_range"))}return a},enableReinitialize:!0})(pe))),he=a(69),fe=a.n(he),ge=a(94),ve=a(1003),Oe=a(227),ye=a(138),je=a(1029),Ee=a(2764),_e=a(125),we=a(301),Se=a(52),Ne=a(74);function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=S()(e);if(t){var r=S()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return _()(this,a)}}var Pe=function(e){j()(a,e);var t=Ie(a);function a(){var e;h()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),I()(O()(e),"renderOptions",(function(){var t="/alerts/".concat(e.props.alert.get("alertId")),a=[],n=e.props.alert.get("status");return"expired"!==n&&(a.push(l.a.createElement(Oe.a,{key:"edit",label:Object(M.a)("button_label.edit"),linkTo:t})),"scheduled"===n&&a.push(l.a.createElement(Oe.a,{key:"displaynow",label:Object(M.a)("button_label.display_now"),onSelect:e.props.displayNow})),"active"===n&&a.push(l.a.createElement(Oe.a,{key:"expirenow",label:Object(M.a)("button_label.expire"),onSelect:e.props.expireNow})),"scheduled"===n&&a.push(l.a.createElement(Oe.a,{key:"delete",label:Object(M.a)("button_label.delete"),onSelect:e.props.openDeleteModal},l.a.createElement(we.a,{name:Se.h,id:e.props.alert.get("alertId"),onConfirm:e.props.delete,title:Object(M.a)("alert.delete.button_label"),text:Object(M.a)("alert.delete.warning")})))),0===a.length?null:l.a.createElement(ve.a,null,a)})),e}return g()(a,[{key:"render",value:function(){var e=this.props.alert,t=e.get("status"),a=e.get("url"),n="expired"===t?null:"/alerts/".concat(e.get("alertId")),r="active"===t||"expired"===t,i=a&&Object(Ne.a)(a),s=e.get("recipient"),c=Object(M.a)("common.all_organization");return"site"===s&&(c=l.a.createElement("a",{href:e.getIn(["site","url"])},l.a.createElement(ye.a,{name:e.getIn(["site","name"]),access:e.getIn(["site","access"])}))),"audience"===s&&(c=e.getIn(["audience","isDeleted"])?l.a.createElement("div",{className:"type--label"},Object(M.a)("common.deleted_audience")):e.getIn(["audience","name"])),"segment"===s&&(c=e.getIn(["segment","name"])),l.a.createElement("tr",null,l.a.createElement("td",{className:"cell-message"},n?l.a.createElement(D.a,{to:n},e.get("message")):e.get("message"),!!a&&l.a.createElement(_e.a,{hasLegacyIcon:!0,label:a,url:i,icon:"link",color:"secondary",target:"_blank"})),l.a.createElement("td",{className:"cell-author"},l.a.createElement("a",{href:e.getIn(["authoredBy","url"])},e.getIn(["authoredBy","name"]))),l.a.createElement("td",{className:"cell-recipients u-pad-l--medium"},c,!e.getIn(["audience","isDeleted"])&&l.a.createElement(_e.a,{icon:"user",sourceSize:"16",label:e.get("recipientCount")})),l.a.createElement("td",{className:"cell-seen"},l.a.createElement(_e.a,{icon:"user",sourceSize:"16",label:r&&e.get("seenCount")})),l.a.createElement("td",{className:"cell-display-from"},e.get("displayFrom")?l.a.createElement(Ee.a,{input:e.get("displayFrom"),includeTime:!0}):Object(M.a)("common.n_a")),l.a.createElement("td",{className:"cell-display-to"},l.a.createElement(Ee.a,{input:e.get("displayTo"),includeTime:!0})),l.a.createElement("td",{className:"cell-status"},l.a.createElement(je.a,{text:Object(M.a)("status.".concat(t)),status:t})),l.a.createElement("td",{className:"table-options"},this.renderOptions()))}}]),a}(l.a.Component);I()(Pe,"propTypes",{alert:fe.a.map.isRequired});var Ce=Object(T.connect)(null,(function(e,t){var a=t.alert,n=t.onRemove;return{openDeleteModal:function(){return e(Object(ge.open)(Se.h,a.get("alertId")))},displayNow:function(){return e(Object(R.c)(a.get("alertId")))},expireNow:function(){return e(Object(R.d)(a.get("alertId")))},delete:function(){return e(Object(R.b)(a.get("alertId"))).then((function(){n(a.get("alertId"))}))}}}))(Pe);function Fe(e){var t=e.alerts,a=e.onRemove;return l.a.createElement("table",{className:"alerts-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:"cell-message"},Object(M.a)("listing.heading.message")),l.a.createElement("th",{className:"cell-author"},Object(M.a)("listing.heading.author")),l.a.createElement("th",{className:"cell-recipients u-pad-l--medium"},Object(M.a)("listing.heading.recipient")),l.a.createElement("th",{className:"cell-seen"},Object(M.a)("listing.heading.seen")),l.a.createElement("th",{className:"cell-display-from"},Object(M.a)("listing.heading.display_from")),l.a.createElement("th",{className:"cell-display-to"},Object(M.a)("listing.heading.display_to")),l.a.createElement("th",{className:"cell-status"},Object(M.a)("listing.heading.status")),l.a.createElement("th",{className:"table-options"},Object(M.a)("listing.heading.options")))),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement(Ce,{alert:e,key:e.get("alertId"),onRemove:a})}))))}Fe.propTypes={};var ke=Fe,Te=a(241),De=a(70),xe=a(1013),Re=a(479),Le=a(212),Ae=a(215),Me=a(2684),Be=a(324);var Ve=function(){var e=Object(Me.a)({initialParams:new C.a.Map({filter:"all",sortBy:"createdNewest"})}),t=e.alerts,a=e.loading,n=e.loadMore,r=e.removeId,i=e.canPaginate,s=e.setParams,c=e.params,o=e.filterSites,u=Object(Be.b)().canSendAlertsToAll,m=0===t.size,d=a&&m&&l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"column"},l.a.createElement(Ae.a,null))),p=l.a.createElement(B.a,{appearance:"brand",linkTo:"/alerts/_new",label:Object(M.a)("alert.index.add_alert_button.label")}),b=c.get("filter","all")||"all",h=l.a.createElement(Le.a,{classes:["all"!==b?"is-set":null],selected:b,options:[{value:"all",label:Object(M.a)("common.all")},{value:"scheduled",label:Object(M.a)("common.scheduled")},{value:"active",label:Object(M.a)("common.active")},{value:"expired",label:Object(M.a)("common.expired")}],onChange:function(e){s({filter:e})}}),f=c.get("recipient","any"),g=[{value:"any",label:Object(M.a)("common.any_recipients")}];u&&g.push({value:"everyone",label:Object(M.a)("common.all_organization")}),o.forEach((function(e){var t=e.id,a=e.title;g.push({value:t,label:a})}));var v=l.a.createElement(Le.a,{classes:["any"!==(f||"any")?"is-set":null],selected:f||"any",options:g,onChange:function(e){s({recipient:e})}}),O=c.get("sortBy","createdNewest"),y=l.a.createElement(Le.a,{classes:["createdNewest"!==(O||"createdNewest")?"is-set":null],selected:O||"createdNewest",options:[{value:"createdNewest",label:Object(M.a)("sort_by.createdNewest")},{value:"createdOldest",label:Object(M.a)("sort_by.createdOldest")},{value:"displayFromNewest",label:Object(M.a)("sort_by.displayFromNewest")},{value:"displayFromOldest",label:Object(M.a)("sort_by.displayFromOldest")},{value:"displayToNewest",label:Object(M.a)("sort_by.displayToNewest")},{value:"displayToOldest",label:Object(M.a)("sort_by.displayToOldest")}],onChange:function(e){s({sortBy:e})}}),j=l.a.createElement(l.a.Fragment,null,m?l.a.createElement(De.a,null):l.a.createElement(ke,{alerts:t,onRemove:r}),l.a.createElement(Te.a,{canLoad:i,onLoad:n,isLoading:a}));return l.a.createElement("div",null,l.a.createElement(Y.a,null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"column"},l.a.createElement("div",{className:"Page"},l.a.createElement("header",{className:"Page-header"},l.a.createElement("div",{className:"Page-header-inner Page-header-inner--noTabsWithButton"},l.a.createElement("h1",{className:"Page-heading type--h4"},Object(M.a)("common.alert_plural")),l.a.createElement(xe.a,{name:"alerts",popperPosition:"right-start",position:{top:-12,left:47,right:"auto"}}),l.a.createElement("div",{className:"Page-buttonContainer u-floatRight"},p))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"medium-4 large-4 column"},l.a.createElement(Re.a,{placeholder:Object(M.a)("alert.index.search.placeholder"),initialValue:c.get("term"),onSubmit:function(e){s({term:e.get("term")})},ariaLabel:Object(M.a)("alert.index.search.placeholder")})),l.a.createElement("div",{className:"medium-8 large-8 column"},l.a.createElement("div",{className:"filter filter-newletter-history"},l.a.createElement("div",{className:"toolbar"},h,v,y)))),l.a.createElement("div",{className:"index-newsletter-history"},d||j)))))},qe=a(352),ze=a(2611);t.default=Object(ze.a)("canSendAlerts",(function(){return l.a.createElement(c.a,r()({text:Object(M.a)("page_title.alerts")},qe.a),l.a.createElement(o.a,null,l.a.createElement(s.c,{exact:!0,path:"/alerts",component:Ve}),l.a.createElement(s.c,{exact:!0,path:"/alerts/:alertId",component:be})))}))}}]);