(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{2004:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return i}));var n=a(14),r=a(512),l=a(3);function i(){return function(t){return t({type:r.b}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.User.getCustomFields().done((function(e){t({type:r.c,results:e.result.listOfItems})})).fail((function(){t(Object(n.f)(Object(l.a)("common.error_message"))),t({type:r.a})})).always(e.Simpplr.Loader.hide),!0}}}).call(this,a(27))},2005:function(e,t,a){"use strict";(function(e){var n=a(10),r=a.n(n),l=a(11),i=a.n(l),o=a(7),c=a.n(o),s=a(12),u=a.n(s),p=a(13),m=a.n(p),d=a(8),f=a.n(d),g=a(5),v=a.n(g),h=a(15),b=a.n(h),y=a(1),C=a.n(y),O=a(0),E=a.n(O),j=a(18),S=a(2006),F=a(21),w=a(123);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){v()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=f()(e);if(t){var r=f()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var L=function(t){u()(n,t);var a=z(n);function n(){var t;r()(this,n);for(var l=arguments.length,i=new Array(l),o=0;o<l;o++)i[o]=arguments[o];return t=a.call.apply(a,[this].concat(i)),v()(c()(t),"selectize",null),v()(c()(t),"onChange",(function(e){"function"==typeof t.props.onChange&&t.props.onChange(e||null,t.selectize.options[e]||null),"function"==typeof(t.props.input||{}).onChange&&(t.props.input||{}).onChange(e||null),"function"==typeof t.props.onSelect&&t.props.onSelect(e||null,t.selectize.options[e]||null)})),v()(c()(t),"initSelectize",(function(a){if(a){var n=t.props.set,r={loadingClass:"selectize-loading",valueField:"id",labelField:"name",searchField:["name"],closeAfterSelect:!0,placeholder:t.props.placeholder,plugins:{simpplr_loader:{},clear_button:{},maxwidth:{},no_results:{},classCopy:{}}};!0===t.props.canCreate&&(r.create=!0,r.createOnBlur=!0,r.hideSelected=!0,r.addPrecedence=!0),window.$(a).selectize(_(_({},r),{},{load:function(t,a){if(!t.length)return a();var r=this;return e.Simpplr.Loader.show(),e.Simpplr.Salesforce.UserDepartment.search({term:t,size:999999}).fail(a).done((function(e){var t=e.result.listOfItems;r.$control_input.val()&&(a(t),n(t))})).always(e.Simpplr.Loader.hide)}})),t.selectize=a.selectize,t.selectize.on("change",t.onChange)}})),t}return i()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){(this.props.input||{}).value!==(e.input||{}).value&&this.selectize&&(e.input&&e.input.value?(this.selectize.addOption({label:e.input.value,value:e.input.value}),this.selectize.setValue(e.input.value)):this.selectize.setValue(null))}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this.selectize&&(this.selectize.destroy(),this.selectize=null)}},{key:"clear",value:function(){this.selectize&&this.selectize.clear()}},{key:"render",value:function(){var e=this.props,t=e.input,a=e.options,n=e.id,r=t&&t.value||void 0,l=a.find((function(e){return e.value===r}))||{},i=a.map((function(e){return E.a.createElement("option",{value:e.value||"",key:e.value},e.label)})),o=Object(w.a)(n,t),c=b()({Field:!0,"Field--compact":this.props.isCompact});return E.a.createElement("div",{className:c},E.a.createElement("select",{id:o,className:"Field-select",ref:this.initSelectize,defaultValue:(l||{}).value||"",disabled:this.props.isDisabled},i),E.a.createElement("div",{className:"Field-iconContainer Field-iconContainer--search"},E.a.createElement(F.a,{isLegacy:!0,name:"search"})),E.a.createElement("div",{className:"Field-iconContainer Field-iconContainer--navigatedown"},E.a.createElement(F.a,{isLegacy:!0,name:"navigatedown"})))}}]),n}(E.a.Component);v()(L,"propTypes",{placeholder:C.a.string,onChange:C.a.func,input:C.a.shape({}),canCreate:C.a.bool,isCompact:C.a.bool,options:C.a.arrayOf(C.a.shape([]))}),v()(L,"defaultProps",{canCreate:!1,isCompact:!0,options:[]}),t.a=Object(j.connect)(null,(function(e){return{set:function(t){return e(Object(S.a)(t))}}}))(L)}).call(this,a(27))},2006:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return i}));var n=a(4),r=a.n(n),l=(a(14),a(453));a(3);function i(e){return Array.isArray(e)||r.a.Iterable.isIterable(e)?{type:l.e,payload:{departments:e}}:(t=e,{type:l.d,payload:{id:t.id,result:t}});var t}}).call(this,a(27))},2007:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return u}));var n=a(4),r=a.n(n),l=a(14),i=a(364),o=a(30),c=a(3);function s(e){return Array.isArray(e)||r.a.Iterable.isIterable(e)?{type:i.e,locations:e}:(t=e,{type:i.d,id:t.id,result:t});var t}function u(t){return function(a,n){var r=t;"me"===r&&(r=Object(o.getCurrentUser)(n()).get("locationId"));return a({type:i.b,id:t}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.UserLocation.get(r).done((function(e){a({type:i.c,id:t,result:e.result})})).fail((function(){a(Object(l.f)(Object(c.a)("common.error_message"))),a({type:i.a,id:t})})).always(e.Simpplr.Loader.hide),!0}}}).call(this,a(27))},2011:function(e,t,a){"use strict";(function(e){var n=a(10),r=a.n(n),l=a(11),i=a.n(l),o=a(7),c=a.n(o),s=a(12),u=a.n(s),p=a(13),m=a.n(p),d=a(8),f=a.n(d),g=a(5),v=a.n(g),h=a(15),b=a.n(h),y=a(4),C=a.n(y),O=a(1),E=a.n(O),j=a(0),S=a.n(j),F=a(18),w=a(2007),N=a(21);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=f()(e);if(t){var r=f()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var z=function(t){u()(n,t);var a=_(n);function n(){var t;r()(this,n);for(var l=arguments.length,i=new Array(l),o=0;o<l;o++)i[o]=arguments[o];return t=a.call.apply(a,[this].concat(i)),v()(c()(t),"selectize",null),v()(c()(t),"onChange",(function(e){"function"==typeof t.props.onChange&&t.props.onChange(e||null,t.selectize.options[e]||null),"function"==typeof(t.props.input||{}).onChange&&(t.props.input||{}).onChange(e||null),"function"==typeof t.props.onSelect&&t.props.onSelect(e||null,t.selectize.options[e]||null)})),v()(c()(t),"initSelectize",(function(a){if(a){var n=t.props.set;window.$(a).selectize({loadingClass:"selectize-loading",valueField:"id",labelField:"name",searchField:["name"],closeAfterSelect:!0,placeholder:t.props.placeholder,plugins:{simpplr_loader:{},clear_button:{},maxwidth:{},no_results:{},classCopy:{}},load:function(t,a){if(!t.length)return a();var r=this;return e.Simpplr.Loader.show(),e.Simpplr.Salesforce.UserLocation.search({term:t,size:999999}).fail(a).done((function(e){var t=e.result.listOfItems;r.$control_input.val()&&(a(t),n(t))})).always(e.Simpplr.Loader.hide)}}),t.selectize=a.selectize,t.selectize.on("change",t.onChange)}})),t}return i()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){(this.props.input||{}).value!==(e.input||{}).value&&this.selectize&&(e.input&&e.input.value?(this.selectize.addOption({label:e.input.value,value:e.input.value}),this.selectize.setValue(e.input.value)):this.selectize.setValue(null))}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this.selectize&&(this.selectize.destroy(),this.selectize=null)}},{key:"clear",value:function(){this.selectize&&this.selectize.clear()}},{key:"render",value:function(){var e=this.props,t=e.selectedOption,a=e.options,n=t&&t.value||void 0,r=a.find((function(e){return e.value===n}))||{},l=a.map((function(e){return S.a.createElement("option",{value:e.value||"",key:e.value},e.label)})),i=b()({Field:!0,"Field--compact":this.props.isCompact});return S.a.createElement("div",{className:i},S.a.createElement("select",{className:"Field-select",ref:this.initSelectize,defaultValue:(r||{}).value||""},l),S.a.createElement("div",{className:"Field-iconContainer Field-iconContainer--search"},S.a.createElement(N.a,{isLegacy:!0,name:"search"})),S.a.createElement("div",{className:"Field-iconContainer Field-iconContainer--navigatedown"},S.a.createElement(N.a,{isLegacy:!0,name:"navigatedown"})))}}]),n}(S.a.Component);v()(z,"propTypes",{placeholder:E.a.string,selectedOption:E.a.shape({value:E.a.string}),onChange:E.a.func,input:E.a.shape({}),isCompact:E.a.bool,options:E.a.arrayOf(E.a.shape({value:E.a.string,label:E.a.string}))}),v()(z,"defaultProps",{isCompact:!0,options:[]}),t.a=Object(F.connect)((function(e,t){var a=(t.input||{}).value,n=e.getIn(["userLocations",a,"result"],new C.a.Map);return{selectedOption:a&&!n.isEmpty()?n.update((function(e){return e.merge({label:e.get("name"),value:e.get("id")})})).toJS():null}}),(function(e){return{set:function(t){return e(Object(w.b)(t))}}}))(z)}).call(this,a(27))},2584:function(e,t,a){e.exports={panelWrapper:"ListingFilters-module-panelWrapper___E9iuH",panel:"ListingFilters-module-panel___3mAnk",rightFilters:"ListingFilters-module-rightFilters___2rGKV",button:"ListingFilters-module-button___1v-7v",sortBy:"ListingFilters-module-sortBy___2vVVz",activeFilterCount:"ListingFilters-module-activeFilterCount___3F0sC"}},2589:function(e,t,a){"use strict";var n=a(1),r=a.n(n),l=a(0),i=a.n(l),o=a(2584),c=a.n(o),s=a(663),u=a(55),p=a(160),m=a(3);function d(e){var t=e.panel,a=e.filterCount;return i.a.createElement(s.a,{placement:"bottom-end",modifiers:[{name:"flip",enabled:!1},{name:"offset",options:{offset:[0,10]}}],launcher:function(e){var t=e.ref,n=e.toggle,r=e.isActive;return i.a.createElement(u.a,{size:"large",isFieldHeight:!0,appearance:a>0?"brand":"normal",label:"".concat(Object(m.a)("button_label.filters")).concat(a>0?" (".concat(a,")"):""),icon:"filter",buttonRef:t,onClick:function(e){e.preventDefault(),n()},ariaExpanded:r})},popover:function(e){return i.a.createElement("div",{className:"ListingFilters-panelWrapper"},i.a.createElement("div",{className:c.a.panelWrapper,"data-placement":e.placement,style:e.style,ref:e.ref},i.a.createElement(p.a,{hArrowPosition:"right",vArrowPosition:"top",hasArrow:!0},i.a.createElement("div",{className:c.a.panel},t(e)))))}})}d.propTypes={filterCount:r.a.number.isRequired,panel:r.a.func.isRequired},d.defaultProps={};var f=d;function g(e){var t=e.filterField,a=e.termField,n=e.sortField,r=e.panel,l=e.filterCount,o=e.addButton;return i.a.createElement("div",null,i.a.createElement("div",{className:"row u-marg-b--mediumlarge"},i.a.createElement("div",{className:"column medium-6"},i.a.createElement("div",{className:"u-grid"},t&&i.a.createElement("div",{className:"u-grid-item medium-5 large-5"},t),i.a.createElement("div",{className:"u-grid-item medium-7 large-7"},a))),i.a.createElement("div",{className:"column medium-6"},i.a.createElement("div",{className:c.a.rightFilters},n&&i.a.createElement("div",{className:c.a.sortBy},n),r&&i.a.createElement("div",{className:c.a.button},i.a.createElement(f,{filterCount:l,panel:r})),o&&i.a.createElement("div",{className:c.a.button},o)))))}g.propTypes={filterField:r.a.node,termField:r.a.node,sortField:r.a.node,filterCount:r.a.number,panel:r.a.func,addButton:r.a.node},g.defaultProps={};t.a=g},2613:function(e,t,a){"use strict";var n=a(16),r=a.n(n),l=a(24),i=a.n(l),o=a(71),c=a.n(o),s=a(1),u=a.n(s),p=a(0),m=a.n(p),d=a(849);function f(e){var t=e.initialValue,a=e.onChange,n=e.value,l=c()(e,["initialValue","onChange","value"]),o=Object(p.useState)(t),s=i()(o,2),u=s[0],f=s[1],g=Object(p.useCallback)((function(e){var t=e&&e.target?e.target.value:e;f(t),a&&a(t)}),[a]);return m.a.createElement(d.a,r()({},l,{value:n||u,onChange:g}))}f.propTypes={component:u.a.func,isValueModel:u.a.bool,onChange:u.a.func,excluded:u.a.arrayOf(u.a.string),initialValue:u.a.any,value:u.a.any,options:u.a.arrayOf(u.a.shape({value:u.a.string,label:u.a.string})),controlShouldRenderValue:u.a.bool},t.a=f},2627:function(e,t,a){"use strict";var n=a(16),r=a.n(n),l=a(1),i=a.n(l),o=a(0),c=a.n(o),s=a(21),u=a(149),p=a(1019),m=a(380);function d(e){var t=e.input,a=e.onSearch,n=e.hasLegacyIcon,l=e.ariaLabel,i=Object(o.useRef)(null),d=Object(o.useCallback)((function(e){e.keyCode!==u.f||e.shiftKey||(e.preventDefault(),a(i.current.value))}),[]),f=Object(o.useCallback)((function(e){e.preventDefault(),a(i.current.value)}),[]),g=Object(o.useCallback)((function(){t.onChange(""),a("")}),[t]),v="string"!=typeof t.value||""===String(t.value);return c.a.createElement("div",{className:"SearchField"},c.a.createElement(m.a,e,c.a.createElement("div",{className:"SearchField-inputWrapper"},c.a.createElement(p.a,r()({inputType:"text"},e,{onKeyDown:d,ref:i})),c.a.createElement("div",{className:"SearchField-buttonContainer"},c.a.createElement("button",{type:"button",className:"SearchField-submit ".concat(v?"":"SearchField-submit--active"),onClick:f,"aria-label":l},c.a.createElement(s.a,{name:"search",isLegacy:n,sourceSize:"20"})),!v&&c.a.createElement("button",{type:"button",className:"SearchField-clear",onClick:g},c.a.createElement(s.a,{name:"cross",sourceSize:"20"}))))))}d.propTypes={ariaLabel:i.a.string.isRequired},t.a=d},2695:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(2005),i=a(380);function o(e){return r.a.createElement(i.a,e,r.a.createElement(l.a,e))}o.propTypes={},t.a=o},2733:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(19);function r(e){return e.get("userAdditionalFields")}Object(n.a)([r],(function(e){return e.map((function(e){return e.get("result")})).filter((function(e){return!!e}))}))},2840:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return l}));var n=a(778),r=a(26);function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.columnName;return function(l){return l({type:n.b,payload:{columnName:a}}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.User.getFieldValues(t).done((function(e){l({type:n.c,payload:{columnName:a,result:e.result}})})).fail((function(e){var t=Object(r.a)(e);l({type:n.a,payload:{columnName:a,error:t}})})).always(e.Simpplr.Loader.hide)}}}).call(this,a(27))},2869:function(e,t,a){"use strict";var n=a(16),r=a.n(n),l=a(0),i=a.n(l),o=a(2011),c=a(380);function s(e){return i.a.createElement(c.a,e,i.a.createElement(o.a,r()({},e,{selectedOption:{value:e.input.value}})))}s.propTypes={},t.a=s},3732:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return N}));var n=a(10),r=a.n(n),l=a(11),i=a.n(l),o=a(7),c=a.n(o),s=a(12),u=a.n(s),p=a(13),m=a.n(p),d=a(8),f=a.n(d),g=a(5),v=a.n(g),h=a(15),b=a.n(h),y=a(4),C=a.n(y),O=a(1),E=a.n(O),j=a(0),S=a.n(j),F=a(21);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=f()(e);if(t){var r=f()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var N=function(t){u()(n,t);var a=w(n);function n(t){var l;return r()(this,n),l=a.call(this,t),v()(c()(l),"onChange",(function(e){if("function"==typeof l.props.onChange){var t=[];if(e)for(var a=Array.isArray(e)?e:[e],n=0;n<a.length;n+=1){var r=l.selectize.options[a[n]];r={id:r.id,name:r.name},t.push(r)}l.props.onChange(C.a.fromJS(t))}})),v()(c()(l),"setExcluded",(function(e){C.a.Map.isMap(e.exclude)&&(l.excluded=e.exclude.toJS()),C.a.List.isList(e.exclude)&&(l.excluded=e.exclude.reduce((function(e,t){return e.set(t.topic.id,t.toJS())}),new C.a.Map).toObject())})),v()(c()(l),"getSelectize",(function(){return l.selectize})),v()(c()(l),"selectize",null),v()(c()(l),"excluded",{}),v()(c()(l),"initSelectize",(function(t){if(t){var a=l.props,n=a.maxItems,r=a.value,i=n&&1===n?{}:{item:function(e,t){return'\n\t\t\t\t<div class="Tag Tag--plain Tag--noHover Tag--withMargin Tag--hasRemove">\n\t\t\t\t\t<div class="Tag-text type--500 type--b3">\n\t\t\t\t\t\t'.concat(t(e.name),'\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class="Tag-childrenContainer remove">\n\t\t\t\t\t\t<i class="Icon">\n\t\t\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8.65 7.943l3.888 3.889a.5.5 0 0 1-.707.707l-3.889-3.89-3.89 3.89a.5.5 0 0 1-.706-.707l3.889-3.89-3.89-3.889a.5.5 0 1 1 .708-.707l3.889 3.89 3.89-3.89a.5.5 0 1 1 .706.707L8.65 7.943z"/></svg>\n\t\t\t\t\t\t</i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t')}},o=c()(l);window.$(t).selectize({loadingClass:"selectize-loading",valueField:"id",labelField:"name",searchField:["name"],closeAfterSelect:!0,placeholder:l.props.placeholder,maxItems:n,options:r?r.toJS():[],items:r?r.map((function(e){return e.get("id")})).toJS():[],plugins:{simpplr_loader:{},maxwidth:{},remove_button:{append:!1},clear_button:{},classCopy:{}},load:function(t,a){if(!t.length)return a();var n=this;e.Simpplr.Loader.show();var r={term:t,columnName:o.props.input.name};return e.Simpplr.Salesforce.User.getFieldValues(r).fail(a).done((function(e){var t=(e.result.listOfItems||[]).filter((function(e){return void 0===o.excluded[e.id]}));n.$control_input.val()&&a(t)})).always(e.Simpplr.Loader.hide)},render:i}),l.selectize=t.selectize,l.selectize.on("change",l.onChange)}})),v()(c()(l),"clear",(function(){l.selectize&&l.selectize.clear()})),l.setExcluded(t),l}return i()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value,a=e.exclude,n=1===e.maxItems,r=(t||new C.a.List).size;n||r||this.selectize.clearOptions(),C.a.is(a,this.props.exclude)||this.setExcluded(e)}},{key:"shouldComponentUpdate",value:function(){return!this.selectize}},{key:"componentWillUnmount",value:function(){this.selectize&&(this.selectize.destroy(),this.selectize=null)}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.maxItems,n=e.isCompact,r=e.isStaticLabel,l=e.meta,i=e.id,o=(t||[]).map((function(e){return S.a.createElement("option",{value:e.get("id"),key:e.get("id")},e.get("name"))})),c=b()({Field:!0,"Field--hasIcon":!0,"Field--compact":n,"Field--staticLabel":r,"has-error":l.error&&l.touched});return S.a.createElement("div",{className:c},S.a.createElement("select",{ref:this.initSelectize,multiple:1!==a,id:i},o),S.a.createElement("div",{className:"Field-iconContainer Field-iconContainer--search"},S.a.createElement(F.a,{isLegacy:!0,name:"search"})))}}]),n}(S.a.Component);v()(N,"propTypes",{placeholder:E.a.string,maxItems:E.a.number,onChange:E.a.func,isCompact:E.a.bool,isStaticLabel:E.a.bool}),v()(N,"defaultProps",{onChange:function(){}})}).call(this,a(27))},4091:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ge}));var n=a(31),r=a.n(n),l=a(5),i=a.n(l),o=a(4),c=a.n(o),s=a(0),u=a.n(s),p=a(18),m=a(1013),d=a(190),f=a(10),g=a.n(f),v=a(11),h=a.n(v),b=a(12),y=a.n(b),C=a(13),O=a.n(C),E=a(8),j=a.n(E),S=a(1),F=a.n(S),w=a(69),N=a.n(w),_=a(81),z=a(53),L=a(70),x=a(1008),P=a(3);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=j()(e);if(t){var r=j()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return O()(this,a)}}var k=function(e){y()(a,e);var t=R(a);function a(){return g()(this,a),t.apply(this,arguments)}return h()(a,[{key:"render",value:function(){var e=this.props,t=e.users,a=e.loading,n=e.canPaginate,r=e.onLoadMore,l=(e.csvUrl,e.totalRecords),i=(e.isAppManager,e.searchOrgLink),o=u.a.createElement(L.a,{hasNoBorder:!0},u.a.createElement("p",null,i?u.a.createElement(u.a.Fragment,null,Object(P.a)("people_index.no_results_with_link"),u.a.createElement(z.a,{to:i},Object(P.a)("people_index.search_all_org")),"."):Object(P.a)("people_index.no_results")));return u.a.createElement(u.a.Fragment,null,u.a.createElement(x.a,{users:t,isLoading:a,canPaginate:n,onLoadMore:r,showFavorite:!1,showContact:!0,showRemainingCount:!1,total:l,hasBorderedLastChild:!0,noResults:o,showPopovers:!0}))}}]),a}(_.b);i()(k,"propTypes",{users:N.a.list.isRequired,loading:F.a.bool,canPaginate:F.a.bool,totalRecords:F.a.number,csvUrl:F.a.string,isAppManager:F.a.bool,onLoadMore:F.a.func,searchOrgLink:F.a.oneOfType([F.a.string,F.a.bool,F.a.object])}),i()(k,"defaultProps",{isAppManager:!1});var D=a(1007),A=a(2840),U=a(2004),T=a(2007),I=a(2589),V=a(215),M=a(225),B=a(2754),J=a(849),W=a(2613),q=a(655),$=a(16),H=a.n($),K=a(3732),G=a(380);function Q(e){return u.a.createElement(G.a,e,u.a.createElement(K.a,H()({selected:e.input.value},e.input,e,{onChange:function(t){e.input.onChange(t),"function"==typeof e.onChange&&e.onChange(t)},ref:e.selectorRef||null,maxItems:e.maxItems||99})))}Q.propTypes={input:F.a.shape({}).isRequired,selectorRef:F.a.oneOfType([F.a.shape({current:F.a.object}),F.a.func])};var X=Q,Y=a(2627),Z=a(2695),ee=a(2869),te=a(324),ae=a(30),ne=a(17),re=a(2733),le=function(e){var t=e.params,a=e.customFields,n=e.userAdditionalFields,r=e.handleChange,l=e.handleCustomFieldChange;return a.size<=0?null:a.map((function(e){var a=n.get(e.columnName);if(a.get("loading"))return u.a.createElement(V.a,null);var i=a.getIn(["result","results"],[]).map((function(e,t){return{value:t,label:e}})).toList();if(0===i.size)return null;i=i.unshift({value:"all",label:Object(P.a)("people_index.all_categories",{names:e.get("plural")})}).toArray();var o=a.getIn(["result","nextPageToken"],null),s=e.get("columnName");return u.a.createElement("div",{key:s,className:"row u-marg-b--medium"},u.a.createElement("div",{className:"column large-12"},o?u.a.createElement(J.a,{component:X,value:t.get(s)?c.a.fromJS([{id:t.get(s),name:t.get(s)}]):null,name:s,placeholder:e.get("singular"),maxItems:1,onChange:l(s)}):u.a.createElement(J.a,{component:q.a,value:t.get(s),name:s,label:e.get("singular"),options:i,onChange:r(s)})))}))};function ie(e){var t=e.customFields,a=e.userAdditionalFields,n=e.hasUserCategory,r=e.userCategories,l=e.userCategoryLabel,o=e.userCategoryLabelPlural,c=e.hasDepartment,p=e.hasLocation,m=e.isDepartmentEnabled,d=e.isLocationEnabled,f=e.isUserCategoryEnabled,g=e.filterCount,v=e.isSegmentsEnabled,h=e.params,b=e.onReset,y=e.onFilterChange,C=Object(te.a)().subSegment;Object(s.useEffect)((function(){d&&e.getLocation(),f&&e.loadCustomFields(),t.forEach((function(t){e.loadUserAdditionalFieldsData(t.get("columnName"))}))}),[]);var O=function(e){return function(t){var a=t;t&&t.preventDefault&&(t.preventDefault(),a=t.currentTarget.value),a!==h.get(e)&&y(i()({},e,a))}},E=function(e){return function(t){var a=t&&0!==t.size?t.first().get("name"):void 0;y(i()({},e,a))}},j=h.get("department"),S=[{value:"",label:""},{value:"me",label:Object(P.a)("people_index.my_department")}].filter((function(e){return"me"!==e.value||c}));j&&"me"!==j&&"all"!==j&&S.push({value:j,label:j});var F=[{value:"",label:""},{value:"me",label:Object(P.a)("people_index.my_location")}].filter((function(e){return"me"!==e.value||p})),w=r.map((function(e,t){return{value:t,label:e}})).toList();return n&&(w=w.unshift({value:"me",label:Object(P.a)("people_index.my_category",{name:l})})),w=w.unshift({value:"all",label:Object(P.a)("people_index.all_categories",{names:o})}).toArray(),u.a.createElement(u.a.Fragment,null,u.a.createElement(I.a,{filterCount:g,termField:u.a.createElement(W.a,{component:Y.a,name:"term",hasNoInternalLabel:!0,initialValue:h.get("term"),placeholder:Object(P.a)("people_field.search_placeholder_text"),onSearch:function(e){return y({term:e})},onBlur:O("term"),ariaLabel:Object(P.a)("people_field.search_placeholder_text")}),panel:function(e){var n,r=e.deactivate;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"row u-marg-b--medium"},u.a.createElement("div",{className:"column large-8"},u.a.createElement("h3",{className:"type--h5 type--500"},Object(P.a)("button_label.filters"))),u.a.createElement("div",{className:"column large-4 u-textRight"},u.a.createElement(D.a,{appearance:"tertiary",hasInvertedHover:!0,label:Object(P.a)("button_label.reset_all"),onClick:function(){b(),r()}}))),m&&u.a.createElement("div",{className:"row u-marg-b--medium"},u.a.createElement("div",{className:"column large-12"},u.a.createElement(J.a,{component:Z.a,value:h.get("department"),name:"department",label:Object(P.a)("department"),placeholder:Object(P.a)("department"),options:S,isCompact:!1,onChange:O("department")}))),d&&u.a.createElement("div",{className:"row u-marg-b--medium"},u.a.createElement("div",{className:"column large-12"},u.a.createElement(J.a,{component:ee.a,value:h.get("location"),name:"location",label:Object(P.a)("location"),placeholder:Object(P.a)("location"),options:F,isCompact:!1,onChange:O("location")}))),f&&u.a.createElement("div",{className:"row u-marg-b--medium"},u.a.createElement("div",{className:"column large-12"},u.a.createElement(J.a,{component:q.a,value:h.get("userCategory"),name:"userCategory",label:l,options:w,onChange:O("userCategory")}))),u.a.createElement("div",{className:"row u-marg-b--medium"},u.a.createElement("div",{className:"column large-12"},u.a.createElement(J.a,{component:B.a,value:h.get("expertise")?JSON.parse(h.get("expertise")):null,hasClearButton:!0,name:"expertise",placeholder:Object(P.a)("profile.expertise.label"),onChange:(n="expertise",function(e){var t=e?JSON.stringify({id:e.get("id"),name:e.get("name")}):void 0;y(i()({},n,t))}),isStaticLabel:!1,isValueModel:!0}))),u.a.createElement(le,{params:h,customFields:t,userAdditionalFields:a,handleChange:O,handleCustomFieldChange:E}))}}),v&&u.a.createElement("div",{className:"u-marg-b--large"},u.a.createElement(J.a,{component:M.a,value:"true"===h.get("limitToSubsegment","true"),name:"limitToSubsegment",label:Object(P.a)("people_index.limit_filter_label",{subsegment:C}),onChange:function(e){y({limitToSubsegment:e?"true":"false"})}})))}ie.propTypes={isDepartmentEnabled:F.a.bool,isLocationEnabled:F.a.bool,isUserCategoryEnabled:F.a.bool,hasUserCategory:F.a.bool,filterCount:F.a.number,isSegmentsEnabled:F.a.bool,onFilterChange:F.a.func,onReset:F.a.func},ie.defaultProps={filterCount:0,isUserCategoryEnabled:!1,hasUserCategory:!1,isSegmentsEnabled:!1};var oe=Object(p.connect)((function(e){return{isSegmentsEnabled:Object(ne.V)(e),isDepartmentEnabled:Object(ne.ab)(e,"department"),isLocationEnabled:Object(ne.ab)(e,"location"),isUserCategoryEnabled:Object(ne.v)(e,"peopleCustomFieldEnabled"),hasUserCategory:Object(ae.hasUserCategory)(e),userCategoryLabel:Object(ne.v)(e,"peopleCustomFieldSingular"),userCategoryLabelPlural:Object(ne.v)(e,"peopleCustomFieldPlural"),userCategories:e.getIn(["userCustomFields","results"],new c.a.List).sort(),hasDepartment:!!Object(ae.getCurrentUserDepartment)(e),hasLocation:!!Object(ae.getCurrentUserLocation)(e),userAdditionalFields:Object(re.a)(e)}}),(function(e,t){return{loadCustomFields:function(){return e(Object(U.a)())},getLocation:function(){var a=t.params.get("location");a&&e(Object(T.a)(a))},loadUserAdditionalFieldsData:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={term:a,columnName:t};return e(Object(A.a)(n))}}}),null,{forwardRef:!0})(ie),ce=a(1009);function se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?se(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):se(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function pe(e){var t=Object(te.a)();return Object(ce.b)(ue({requestTransformer:function(e){return function(){var e=arguments.length>1?arguments[1]:void 0,t=ue({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});if("me"===t.department&&(t.department=e.get("department")),"me"===t.location&&(t.location=e.get("locationId")),"me"===t.userCategory){var a=e.get("userCategory");t.userCategory=a.id}if(t.expertise)try{var n=JSON.parse(t.expertise);t.expertiseId=n.id}catch(e){t.expertiseId=null}finally{delete t.expertise}return t}(e,t)}},e))}var me=a(42);function de(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?de(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):de(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ge(){var e=Object(p.useSelector)(ae.isCurrentUserAppManager),t=Object(p.useSelector)(ne.V),a=Object(p.useSelector)(ne.A),n=Object(p.useSelector)(re.a),l=function(e){return n.getIn([e,"result","nextPageToken"],null)},i=a.reduce((function(e,t){return e[t.get("columnName")]=l(t.get("columnName"))?null:"all",e}),{}),o=pe({initialParams:new c.a.Map(fe({term:"",department:null,location:null,userCategory:"all",expertise:null,limitToSubsegment:"true",sortBy:"alphabetical",includeTotal:!0},i))}),s=o.users,f=o.loading,g=o.canPaginate,v=o.loadMore,h=o.params,b=o.setParams,y=o.resetParams,C=o.totalRecords,O=o.csvUrl,E=o.getLocationForNewParams,j=[h.get("department"),h.get("location"),"all"!==h.get("userCategory"),h.get("expertise")].concat(r()(a.map((function(e){return l(e.get("columnName"))?h.get(e.get("columnName")):"all"!==h.get(e.get("columnName"))})))).filter((function(e){return e})).length;return u.a.createElement("div",null,u.a.createElement(d.a,{name:"People",text:Object(P.a)("page_title.people")}),u.a.createElement("div",{className:"row"},u.a.createElement("div",{className:"column"},u.a.createElement("div",{className:"Page"},u.a.createElement("header",{className:"Page-header Page-header--noBorder"},u.a.createElement("div",{className:"Page-header-inner"},u.a.createElement("h1",{className:"Page-heading type--h4"},Object(P.a)("page_title.people")),u.a.createElement(m.a,{name:"people",popperPosition:"right-start",position:{top:-12,left:56,right:"auto"}})),u.a.createElement("div",{className:"Page-header-contents u-marg-t--medium u-marg-b--mediumlarge"},u.a.createElement(oe,{customFields:a,onFilterChange:b,onReset:y,filterCount:j,params:h}),!f&&u.a.createElement("div",{className:"u-cf u-border-bottom u-pad-b--small-sketchSize u-marg-b--mediumlarge"},C>0&&u.a.createElement("span",{className:"type--500 u-capitalize"},Object(P.a)("people_index.total_people",{count:C,formattedCount:Object(me.c)(C)})),u.a.createElement("span",{className:"u-sm-hide u-floatRight"},j>0&&u.a.createElement(u.a.Fragment,null,Object(P.a)("manage_content.active_filter_count",{count:j}),u.a.createElement("span",{className:"u-pad-l--xsmall"},u.a.createElement(D.a,{label:Object(P.a)("button_label.reset"),onClick:y}))))))),u.a.createElement(k,{users:s,loading:f,totalRecords:C,csvUrl:O,canPaginate:g,onLoadMore:v,isAppManager:e,searchOrgLink:t&&"true"===h.get("limitToSubsegment")&&E({limitToSubsegment:"false"})})))))}}}]);