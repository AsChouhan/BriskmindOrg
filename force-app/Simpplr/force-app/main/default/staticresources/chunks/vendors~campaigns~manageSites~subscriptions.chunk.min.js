(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1646:function(e,n,t){"use strict";var a=t(5),i=t.n(a),r=t(0),l=t.n(r),o=t(1),s=t.n(o),u=t(16),c=t.n(u);function d(e){var n=e.children,t=e.layout,a=l.a.Children.toArray(n).filter((function(e){return!!e}));if(0===a.length)return!1;var r=c()(i()({DefinitionList:!0},"DefinitionList--".concat(t),t));return l.a.createElement("dl",{className:r},a)}d.propTypes={children:s.a.node.isRequired,layout:s.a.oneOf(["stacked","squashed","lined"])},d.defaultProps={layout:null},n.a=d},1647:function(e,n,t){"use strict";t.d(n,"a",(function(){return h}));var a=t(9),i=t.n(a),r=t(8),l=t.n(r),o=t(10),s=t.n(o),u=t(11),c=t.n(u),d=t(12),m=t.n(d),p=t(5),f=t.n(p),g=t(0),b=t.n(g),v=t(1),y=t.n(v),h=function(e){function n(){return i()(this,n),s()(this,c()(n).apply(this,arguments))}return m()(n,e),l()(n,[{key:"render",value:function(){var e=this.props,n=e.title,t=e.children,a=e.isBlock,i=e.isHtml;if(!t)return null;var r=i&&"string"==typeof t?b.a.createElement("dd",{className:"DefinitionList-content",dangerouslySetInnerHTML:{__html:t}}):b.a.createElement("dd",{className:"DefinitionList-content"},t),l=b.a.createElement(b.a.Fragment,null,b.a.createElement("dt",{className:"DefinitionList-title"},n),r);return a?b.a.createElement("div",{className:"DefinitionList-item"},l):l}}]),n}(b.a.PureComponent);f()(h,"propTypes",{title:y.a.node.isRequired,children:y.a.node,isBlock:y.a.bool,isHtml:y.a.bool})},1684:function(e,n,t){"use strict";var a=t(0),i=t.n(a),r=t(1),l=t.n(r),o=t(16),s=t.n(o),u=t(23);function c(e){var n=e.children,t=e.onClick,a=e.hasButton,r=s()({RemovableField:a});return i.a.createElement("div",{className:r},n,a&&i.a.createElement("button",{className:"RemovableField-button",type:"button",onClick:t,tabIndex:-1},i.a.createElement(u.a,{name:"circle-close",sourceSize:"24"})))}c.propTypes={children:l.a.node.isRequired,onClick:l.a.func,hasButton:l.a.bool},c.defaultProps={hasButton:!0},n.a=c},1685:function(e,n,t){"use strict";var a=t(0),i=t.n(a),r=t(1),l=t.n(r),o=t(19),s=t(18),u=t(4),c=t(51),d=t(1646),m=t(1647);function p(e){var n=e.segment,t=e.audience,a=e.customFieldLabel,r=e.showAudienceCount,l=e.showMandatory,o=e.isSegmentsEnabled,s=e.showSegment&&o;return s||0!==t.listOfConditions.size?i.a.createElement(d.a,{layout:"squashed"},l&&i.a.createElement("div",{className:"u-marg-b--small"},i.a.createElement(m.a,{title:Object(u.a)("common.subscription")},Object(u.a)("field.mandatory.label"))),s&&i.a.createElement("div",null,i.a.createElement(m.a,{title:"".concat(Object(u.a)("common.segment"),":")},n?n.name:Object(u.a)("all_segments.label"))),t&&t.isDeleted?i.a.createElement("div",{className:"type--note type--b2 type--500"},Object(u.a)("common.deleted_audience")):t&&t.listOfConditions.map((function(e,n){var t="category"!==e.name?Object(u.a)(e.name):a;return i.a.createElement("div",{key:t},i.a.createElement(m.a,{title:s||n>0?"& ".concat(t,":"):t,key:e.name},e.values.map((function(e){return e.get("name")})).join(", ")))})),r&&i.a.createElement("div",{className:"u-marg-t--small"},i.a.createElement(m.a,{title:Object(u.a)("common.user_plural")},t.get("audienceCount")))):i.a.createElement("strong",null,Object(u.a)("common.everyone_in_org"))}p.propTypes={segment:c.a.segmentLite,audience:c.a.audience.isRequired,showAudienceCount:l.a.bool,showMandatory:l.a.bool,showSegment:l.a.bool,isSegmentsEnabled:l.a.bool},p.defaultProps={showAudienceCount:!1,showMandatory:!1,isSegmentsEnabled:!1,showSegment:!0},n.a=Object(o.connect)((function(e){return{customFieldLabel:Object(s.s)(e,"peopleCustomFieldSingular"),isSegmentsEnabled:Object(s.K)(e)}}))(p)},1686:function(e,n,t){"use strict";t.d(n,"b",(function(){return c})),t.d(n,"a",(function(){return d})),t.d(n,"c",(function(){return m}));var a=t(2),i=t.n(a),r=t(17),l=t(18),o=t(4);function s(e){return e.get("subscriptions")}Object(r.a)([s,function(e,n){return n}],(function(e,n){return e.getIn([n,"result"])}));var u=Object(r.a)([s],(function(e){return e.map((function(e){return e.get("result")})).filter((function(e){return!!e}))})),c=Object(r.a)([u,function(e,n){return new i.a.List(n)}],(function(e,n){return n.map((function(n){return e.get(n)})).filter((function(e){return!!e}))}));function d(e){var n=new i.a.List(["company","department","division","city","state","country"]);return Object(l.s)(e,"peopleCustomFieldEnabled")&&(n=n.push("category")),Object(l.s)(e,"profileFields").filter((function(e){return n.includes(e.get("name"))})).map((function(n){return t=n.get("name"),a="category"===n.get("name")?Object(l.s)(e,"peopleCustomFieldSingular"):Object(o.a)(n.get("name")),r=!n.get("isUserDisplay")||n.get("isUserEditable"),new i.a.Map({value:t,label:a,isDisabled:r});var t,a,r}))}function m(e,n){return e.filter((function(e){return"listOfSites"===e.action.itemKey})).groupBy((function(e){return e.action.listOfItems.find((function(e){return e.getIn(["item","id"])===n})).get("status")}))}},1703:function(e,n,t){"use strict";(function(e){t.d(n,"b",(function(){return u})),t.d(n,"c",(function(){return c})),t.d(n,"a",(function(){return d}));var a=t(2),i=t.n(a),r=t(246),l=t(4),o=t(15),s=t(28);function u(n){return function(t){return t({type:r.g,payload:{segmentId:n||"org"}}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Audience.getFieldValues({segmentId:n}).done((function(e){t({type:r.h,payload:{values:e.result.listOfItems,segmentId:n||"org"}})})).fail((function(){t({type:r.f,error:!0,payload:{segmentId:n||"org"}})})).always(e.Simpplr.Loader.hide)}}function c(e){return Array.isArray(e)||i.a.Iterable.isIterable(e)?{type:r.e,payload:{audiences:e}}:(n=e,{type:r.d,payload:{audience:n}});var n}function d(n){return function(t){var a={audienceId:n};return t({type:r.b,payload:a}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Audience.delete(n).done((function(){t({type:r.c,payload:a});var e=Object(l.a)("audiences.delete.success_flash");t(Object(o.j)(e))})).fail((function(e){var n=Object(s.a)(e);t(Object(o.f)(n)),t({type:r.a,error:a})})).always(e.Simpplr.Loader.hide)}}}).call(this,t(25))},1730:function(e,n,t){"use strict";t.d(n,"c",(function(){return o})),t.d(n,"b",(function(){return s})),t.d(n,"a",(function(){return u}));var a=t(2),i=t.n(a),r=t(17);function l(e,n){return e.getIn(["audience","values",n])||new i.a.Map}var o=Object(r.a)([l,function(e,n){return n}],(function(e){return e.get("loading",!1)})),s=Object(r.a)([l,function(e,n){return n}],(function(e){return e.get("loaded",!1)})),u=Object(r.a)([l,function(e,n){return n}],(function(e){return e.get("result")}))},1766:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var a=t(2),i=t.n(a);function r(e,n,t){var a=function(e){return!!e.values&&!!e.values.size};return e.update("listOfConditions",(function(e){return t?[]:e.map((function(e){return e.set("values",i.a.fromJS(e.get("values")))})).filter(a).map((function(e){return e.set("values",e.get("values").map((function(t){var a=n.getIn([e.get("name"),"values"]).find((function(e){return e.get("id")===t}));return!!a&&{id:a.get("id")===a.get("name")?null:a.get("id"),name:a.get("name")}})).filter((function(e){return!!e})))})).filter(a)}))}},1783:function(e,n,t){"use strict";var a=t(47),i=t.n(a),r=t(9),l=t.n(r),o=t(8),s=t.n(o),u=t(10),c=t.n(u),d=t(11),m=t.n(d),p=t(7),f=t.n(p),g=t(12),b=t.n(g),v=t(5),y=t.n(v),h=t(0),E=t.n(h),O=t(1),j=t.n(O),F=t(2),S=t.n(F),C=t(19),N=t(71),I=t(60),L=t.n(I),w=t(42),_=t(388),k=t(18),D=t(114),V=t(1686),R=t(1730),q=t(26),A=t(1703),z=t(659),T=t(627),B=t(343),M=t(401),x=t(4),P=t(1684),J=t(124),U=t(16),H=t.n(U),K=t(52),W=function(e){function n(){return l()(this,n),c()(this,m()(n).apply(this,arguments))}return b()(n,e),s()(n,[{key:"render",value:function(){var e=this.props,n=e.fieldName,t=e.options,a=e.values,i=H()({"u-displayFlex":!0}),r=a?a.map((function(e){return{value:e.get("id"),label:e.get("name")}})):new S.a.List;return E.a.createElement("div",{className:i},E.a.createElement(w.Field,{component:M.a,name:"".concat(n,".name"),label:Object(x.a)("common.type"),options:t.toJS(),validate:[K.p]}),E.a.createElement("div",{className:"u-sizeFillAlt u-neg-l--1"},E.a.createElement(w.Field,{component:M.a,name:"".concat(n,".values"),placeholder:Object(x.a)("common.select_placeholder"),options:r.sortBy((function(e){return e.label.toLowerCase()})).toJS(),isMulti:!0,hasClearButton:!0})))}}]),n}(N.b);W.propTypes={fieldName:j.a.string.isRequired,options:L.a.list.isRequired,values:L.a.list.isRequired},W.defaultProps={};var G=W,Q=function(e){function n(){return l()(this,n),c()(this,m()(n).apply(this,arguments))}return b()(n,e),s()(n,[{key:"render",value:function(){var e=this.props,n=e.fields,t=e.allConditionFields,a=e.audienceFieldNames,i=e.audienceValues,r=e.isSegmentsEnabled,l=n.map((function(e,t){return n.get(t).name})),o=t.filter((function(e){return!l.includes(e.get("value"))&&!e.get("isDisabled")}));return E.a.createElement("div",{className:"u-marg-b--medium"},n.map((function(e,o){var s=l.filter((function(e){return e!==n.get(o).name})),u=a&&a.get(o);if(!u)return null;if(!t.find((function(e){return e.get("value")===u})))return null;var c=t.filter((function(e){return!s.includes(e.get("value"))}));return E.a.createElement("div",{key:e},r&&E.a.createElement("div",{className:"u-marg-b--xsmall"},E.a.createElement("div",{className:"TextOnLine"},Object(x.a)("common.and"))),E.a.createElement("div",{className:"u-marg-b--xsmall"},E.a.createElement(P.a,{onClick:function(){return n.remove(o)}},E.a.createElement(G,{fieldName:e,options:c,audienceFieldName:u,values:i.getIn([u,"values"])}))))})),o.size>0&&E.a.createElement("div",{className:"u-marg-t--medium"},E.a.createElement(J.a,{icon:"circle-plus",iconSourceSize:17,fontStyle:"brand",hasCurrentColorIcon:!0,label:Object(x.a)("button_label.add_another"),onClick:function(){return n.push(Object(_.b)({name:o.getIn([0,"value"]),label:o.getIn([0,"label"])}))}})))}}]),n}(N.b);y()(Q,"propTypes",{segmentId:j.a.string.isRequired,fields:j.a.object.isRequired,allConditionFields:L.a.list,audienceFieldNames:L.a.list,audienceValues:L.a.map.isRequired});var X=t(188),Y=t(658);var Z=function(e){function n(){var e,t;l()(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return t=c()(this,(e=m()(n)).call.apply(e,[this].concat(i))),y()(f()(t),"resetAudience",(function(){var e=t.props,n=e.allConditionFields,a=e.sectionName,i=n.find((function(e){return!e.get("isDisabled")}));if(i){var r=new _.a({listOfConditions:new S.a.List([Object(_.b)({name:i.get("value"),label:i.get("label")})])});t.props.updateFormValue("".concat(a,".audience"),r)}})),y()(f()(t),"renderFields",(function(){var e=t.props,n=e.isSegmentsEnabled,a=e.allConditionFields,i=e.segmentId,r=e.audienceFieldNames,l=e.audienceValues,o=e.sectionName;return!n&&r.isEmpty()?E.a.createElement(Y.a,{type:"warning"},E.a.createElement("p",null,Object(x.a)("audiences.no_fields_available"))):E.a.createElement(w.FieldArray,{name:"".concat(o,".audience.listOfConditions"),component:Q,allConditionFields:a,segmentId:i,audienceFieldNames:r,audienceValues:l,isSegmentsEnabled:n})})),t}return b()(n,e),s()(n,[{key:"componentDidMount",value:function(){var e=this.props,n=e.valuesLoaded,t=e.valuesLoading,a=e.segmentId,i=e.isSegmentsEnabled,r=e.canChangeSegment;n||t||this.props.loadValues(a),i&&r&&this.props.loadSegments()}},{key:"componentDidUpdate",value:function(e){var n=this.props,t=n.valuesLoaded,a=n.valuesLoading,i=n.segmentId;t||a||this.props.loadValues(i),t&&e.segmentId!==i&&this.resetAudience()}},{key:"render",value:function(){var e=this.props,n=e.title,t=e.description,a=e.isSegmentsEnabled,i=e.everyone,r=e.valuesLoaded,l=e.size;return E.a.createElement(E.a.Fragment,null,n&&E.a.createElement("div",{className:"type--h6 type--500 u-marg-b--small"},n),t&&E.a.createElement("div",{className:"u-marg-b--medium"},t),E.a.createElement("div",{className:"u-marg-b--small"},function(e,n){var t=E.a.createElement(w.Field,{component:M.a,name:"".concat(n.sectionName,".segment.segmentId"),label:Object(x.a)("common.segment"),options:n.segmentOptions,isDisabled:!n.canChangeSegment,isRequired:!0});return n.isSegmentsEnabled&&"small"===n.size?t:"small"===e?E.a.createElement(w.Field,{component:B.a,name:"everyone",options:[{label:Object(x.a)("subscription.modal.option_everyone.label"),value:"yes"},{label:Object(x.a)("subscription.modal.option_select_audience.label"),value:"no",isDisabled:0===n.allConditionFields.size}],isStacked:!0,isLight:!0}):E.a.createElement(E.a.Fragment,null,E.a.createElement(w.Field,{component:T.a,name:"everyone",validate:[K.p],isFullWidth:!1,hasLargeIcons:!0,options:[{label:Object(x.a)("campaign.create.audience_option.all_org"),value:"yes",icon:"org"},{label:Object(x.a)("campaign.create.audience_option.audience"),value:"no",icon:"audience"}]}),n.isSegmentsEnabled&&!n.everyone&&E.a.createElement("div",{className:"u-marg-t--xlarge"},t))}(l,this.props)),(a&&"small"===l||!i)&&(r?this.renderFields():E.a.createElement("div",{className:"u-posRelative u-pad--large"},E.a.createElement(X.a,null))))}}]),n}(N.b);y()(Z,"propTypes",{isSegmentsEnabled:j.a.bool,segmentOptions:j.a.arrayOf(j.a.object),canChangeSegment:j.a.bool,allConditionFields:L.a.list,everyone:j.a.bool,valuesLoaded:j.a.bool,segmentId:j.a.string,audienceValues:L.a.map,audienceFieldNames:L.a.list,getFormValue:j.a.func,updateFormValue:j.a.func,size:j.a.oneOf(["small","large"])}),y()(Z,"defaultProps",{isSegmentsEnabled:!1,segmentOptions:[],getFormValue:function(){return null},updateFormValue:function(){},size:"small"});n.a=Object(C.connect)((function(e,n){var t=n.getFormValue,a=n.sectionName,r=Object(D.e)(e).map((function(e){return{label:e.name,value:e.segmentId}})),l=[{label:Object(x.a)("all_segments.label_full"),value:"org"}].concat(i()(r)),o=t(e,"".concat(a,".audience.listOfConditions"))||new S.a.List,s=(t(e,"".concat(a,".segment"))||{}).segmentId;return{segmentId:s||n.segmentId,segmentOptions:l,userSegmentId:Object(q.getCurrentUserSegmentId)(e),allConditionFields:Object(V.a)(e),isSegmentsEnabled:Object(k.K)(e),audienceFieldNames:o.map((function(e){return e.get("name")})),everyone:"yes"===t(e,"everyone"),valuesLoading:Object(R.c)(e,s),valuesLoaded:Object(R.b)(e,s)}}),(function(e){return{loadValues:function(n){return e(Object(A.b)("org"===n?null:n))},loadSegments:function(){return e(Object(z.c)())}}}))(Z)}}]);
//# sourceMappingURL=../sourcemaps-not-for-upload/chunks/vendors~campaigns~manageSites~subscriptions.chunk.min.js.map