(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{2035:function(e,t,n){var a=n(2230),r=n(122),o=/[&<>"']/g,i=RegExp(o.source);e.exports=function(e){return(e=r(e))&&i.test(e)?e.replace(o,a):e}},2230:function(e,t,n){var a=n(633)({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});e.exports=a},2569:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n.n(a),o=n(11),i=n.n(o),l=n(7),s=n.n(l),c=n(12),u=n.n(c),d=n(13),p=n.n(d),m=n(8),f=n.n(m),h=n(5),b=n.n(h),g=n(1),y=n.n(g),v=n(0),E=n.n(v),O=n(81),j=n(18),C=n(1010),_=n(82),S=n(660),N=n(1165),k=n(70),w=n(1013),F=n(129),R=n(140),I=n(296),T=n(855),x=n(17),P=n(63),D=n(298),M=n(3),A=n(212),L=n(21),B=n(123),U=n(479),z=n(125);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var q=function(e){u()(n,e);var t=V(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).state={open:!!e.value},a.wrapper=null,a.onBlur=a.onBlur.bind(s()(a)),a.setWrapper=a.setWrapper.bind(s()(a)),a.reveal=a.reveal.bind(s()(a)),a}return i()(n,[{key:"onBlur",value:function(e){e||this.setState({open:!1})}},{key:"setWrapper",value:function(e){this.wrapper=e}},{key:"reveal",value:function(){this.setState({open:!0})}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.onSubmit;return E.a.createElement("div",{className:"FeedSearch",ref:this.setWrapper},!this.state.open&&E.a.createElement("button",{type:"button",className:"FeedSearch-button",onClick:this.reveal,"aria-expanded":this.state.open},E.a.createElement(z.a,{label:Object(M.a)("feed.search.button_label"),icon:"search",color:"primary",fontStyle:"b2",hasCurrentColorIcon:!0})),this.state.open&&E.a.createElement(U.a,{placeholder:Object(M.a)("feed.search.placeholder"),value:t,onSubmit:n,onBlur:this.onBlur,autoFocus:!0,ariaExpanded:this.state.open,ariaLabel:Object(M.a)("feed.search.placeholder")}))}}]),n}(E.a.Component);b()(q,"propTypes",{value:y.a.string,onSubmit:y.a.func});var W=q;function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var G=function(e){u()(n,e);var t=H(n);function n(e){var a;return r()(this,n),a=t.call(this,e),b()(s()(a),"getFeedFilters",(function(e){return I.f.filter((function(t){return e!==I.d.TIMELINE_COMMENT||t!==I.b.TO&&t!==I.b.FAVORITES}))})),a.onSearchSubmit=a.onSearchSubmit.bind(s()(a)),a}return i()(n,[{key:"onSearchSubmit",value:function(e){this.props.onSearchSubmit(e.get("term"))}},{key:"render",value:function(){var e=this.props,t=e.term,n=e.sort,a=e.filter,r=e.canFilter,o=e.onFilterChange,i=e.onSortChange,l=e.feedMode,s=r?E.a.createElement("div",{className:"FeedOptions-dropdown FeedOptions-dropdown--filter"},E.a.createElement("span",{className:"u-sm-hide"},Object(M.a)("common.show"))," ",E.a.createElement("div",{className:"Field Field--hasIcon Field--noTextInput Field--compact Field--noBackground"},E.a.createElement(A.a,{className:"Field-select",selected:a,hasClearButton:!1,canCreate:!1,placeholder:Object(M.a)("common.select_placeholder"),options:Object(B.c)(this.getFeedFilters(l),"feed.filter_by"),onChange:o,hasNoBorder:!0}),E.a.createElement("div",{className:"Field-iconContainer Field-iconContainer--navigatedown"},E.a.createElement(L.a,{isLegacy:!0,name:"navigatedown"})))):null;return E.a.createElement("div",{className:"u-marg-b--small u-cf Feed-searchForm"},E.a.createElement(W,{value:t,onSubmit:this.onSearchSubmit}),E.a.createElement("div",{className:"FeedOptions"},s,l!==I.d.TIMELINE&&E.a.createElement("div",{className:"FeedOptions-dropdown FeedOptions-dropdown--sort u-sm-hide"},E.a.createElement("span",null,Object(M.a)("common.sort_by"))," ",E.a.createElement("div",{className:"Field Field--hasIcon Field--compact Field--noTextInput Field--noBackground"},E.a.createElement(A.a,{className:"Field-select",selected:n,options:Object(B.c)(["date","activity"],"feed.sort_by"),onChange:i,hasNoBorder:!0}),E.a.createElement("div",{className:"Field-iconContainer Field-iconContainer--navigatedown"},E.a.createElement(L.a,{isLegacy:!0,name:"navigatedown"}))))))}}]),n}(E.a.PureComponent);b()(G,"propTypes",{filter:y.a.string,sort:y.a.string,term:y.a.string,canFilter:y.a.bool,onSearchSubmit:y.a.func.isRequired,onFilterChange:y.a.func.isRequired,onSortChange:y.a.func.isRequired,feedMode:y.a.string}),G.defaultValues={sort:"date"};var Z=G,Y=n(3441),J=n(3442),Q=n(15),K=n.n(Q),$=n(31),X=n.n($),ee=n(24),te=n.n(ee),ne=n(150),ae=n(30),re=n(88),oe=n(3443),ie=n.n(oe);function le(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ce(e){var t,n=e.children,a=e.dropzoneRef,r=e.isOpen,o=e.canAddFiles,i=e.canUploadAllFileTypes,l=void 0!==i&&i,s=Object(v.useState)(!1),c=te()(s,2),u=c[0],d=c[1],p=Object(v.useState)(!1),m=te()(p,2),f=m[0],h=m[1],g=Object(j.useSelector)((function(e){return Object(ae.getFileUploadPermissions)(e,l)})),y=function(e,t){return g!==ne.a.NONE&&!(t&&!Object(re.k)(t,e))},O=function(e){var t=e.event,n=e.isDraggingOver;if(r&&n){var o=function(e){var t,n=X()(e),r=a.current,o=null==r?void 0:r.getAccepts(),i=le(n);try{for(i.s();!(t=i.n()).done;){var l=t.value;if(!y(l,o))return!1}}catch(e){i.e(e)}finally{i.f()}return!0}(t.dataTransfer.items);h(o)}d(n)},C=function(e){e.stopPropagation(),e.preventDefault(),d(!0),O({event:e,isDraggingOver:!0})},_=K()(ie.a.empty,b()({},ie.a.isOver,u&&r)),S=K()(b()({emptyWrapper:r},ie.a.emptyContainer,r)),N=f&&o&&a.current,k=K()((t={},b()(t,ie.a.successOverState,N),b()(t,ie.a.restrictedOverState,!N),t));return E.a.createElement("div",{className:S},E.a.createElement("div",{onDragOver:C,onDragEnter:C,onDragLeave:function(){d(!1)},onDrop:function(e){if(r){var t=e.dataTransfer.files;if(t.length>0&&a.current)e.preventDefault(),e.stopPropagation(),a.current.handleFiles(Array.from(t))}d(!1)},className:_},E.a.createElement("div",null,E.a.createElement("div",{className:k},E.a.createElement("div",{className:ie.a.overStateIcon},E.a.createElement(L.a,{name:N?"dropzone-drop-file":"circle-close",sourceSize:"60"}))),n({handleDragAndDrop:O}))))}ce.prototype={dropzoneRef:y.a.oneOfType([y.a.node,y.a.shape({current:y.a.instanceOf(Element)})]).isRequired,isOpen:y.a.bool,canAddFiles:y.a.bool,children:y.a.func.isRequired},ce.defaultProps={isOpen:!1,canAddFiles:!1};var ue=ce,de=n(16),pe=n.n(de),me=n(4),fe=n.n(me),he=n(74);var be=n(2035),ge=n.n(be),ye=n(37),ve=n(14),Ee=n(55),Oe=n(114),je=n(2003),Ce=n(50),_e=n(167),Se=n(266),Ne=n(139),ke=n(47),we=n(658),Fe=n(1023),Re=n(2721),Ie=n(1171),Te=n(2791);function xe(){return E.a.createElement("div",{className:"PostForm-options"},E.a.createElement(ye.FieldArray,{component:Te.a,name:"choices",maxFields:10,minFields:2,getPlaceholder:function(e){return Object(M.a)("feed.poll.placeholder.option",{number:e})},addLabel:Object(M.a)("feed.poll.add_choice"),showDeleteButton:!0,inputMaxLength:100,isCompact:!0,ariaLabel:Object(M.a)("button_label.remove_poll_option")}))}function Pe(e){var t=e.get("choices",new fe.a.List).filter((function(e){return""!==(e||"").trim()}));return t.size<2?{choices:{1:[Object(M.a)("form_error.poll.rangeUnderflow",{min:2})]}}:t.size>10?{choices:[Object(M.a)("form_error.poll.rangeOverflow",{max:10})]}:{}}xe.defaultProps={PollTypeOptions:y.a.func};var De=xe;function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var Be="FEED_POST";var Ue=function(e){u()(n,e);var t=Le(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).state={selectedFileIds:new fe.a.List,isOpen:e.isOpen,bodyValues:{text:"",poll:""}},a.removeUnloadHandler=null,a.onSelectFile=a.onSelectFile.bind(s()(a)),a.onReplaceFile=a.onReplaceFile.bind(s()(a)),a.onRemoveFile=a.onRemoveFile.bind(s()(a)),a.onSubmit=a.onSubmit.bind(s()(a)),a.isButtonDisabled=a.isButtonDisabled.bind(s()(a)),a}return i()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;this.props.isOpen!==e.isOpen&&this.setState({isOpen:e.isOpen}),this.props.postType!==e.postType&&this.props.body!==this.state.bodyValues[this.props.postType]&&this.setState((function(e){return{bodyValues:Ae(Ae({},e.bodyValues),{},b()({},t.props.postType,t.props.body))}}))}},{key:"componentDidUpdate",value:function(e){this.props.postType!==e.postType&&this.props.change("body",this.state.bodyValues[this.props.postType]||"")}},{key:"onSelectFile",value:function(e){Array.isArray(e)?this.setState((function(t){return{selectedFileIds:t.selectedFileIds.concat(e)}})):this.setState((function(t){return{selectedFileIds:t.selectedFileIds.push(e)}}))}},{key:"onReplaceFile",value:function(e,t){var n=this.state.selectedFileIds;this.setState({selectedFileIds:n.set(n.indexOf(e),t)})}},{key:"onRemoveFile",value:function(e){var t=this.state.selectedFileIds;this.setState({selectedFileIds:t.remove(t.indexOf(e))})}},{key:"onSubmit",value:function(e){var t=this;"content"===this.props.feedContext?Object(Se.b)("Publish Content"):Object(Se.b)("Publish Feed Post");var n=this.props.onSubmit(e);return n?Promise.resolve(n).then((function(e){e&&"success"===e.status&&(t.props.reset(),t.setState({isOpen:!1,selectedFileIds:new fe.a.List,bodyValues:{post:"",poll:""}}),"function"==typeof t.props.onReset&&t.props.onReset())})):null}},{key:"getPlaceholder",value:function(){var e=this.props,t=e.postType,n=e.placeholder,a=e.currentUser;return"poll"===t?Object(M.a)("feed.poll.placeholder.form"):Object(Ne.j)(n,{userfirstname:a.get("firstName")})}},{key:"isButtonDisabled",value:function(){return this.props.invalid||this.props.submitting}},{key:"render",value:function(){var e=this.props,t=e.postType,n=e.type,a=e.enableTopics,r=e.handleSubmit,o=e.change,i=e.dirty,l=e.submitting,s=e.currentUser,c=e.viewport,u=e.width,d=e.isNativeVideoEnabled,p=this.state,m=p.isOpen,f=p.selectedFileIds,h="poll"!==t,b=d?Object(M.a)("dropzone.drop_type_media_and_file_or_plural"):Object(M.a)("dropzone.drop_type_photo_and_file_or_plural"),g=K()({"PostForm-fieldContainer":!0,"has-smallControls":!0,"has-hiddenControls":!m,"is-post":"poll"!==t,"is-poll":"poll"===t}),y=K()({"u-border":m,"u-borderRadius--2":!0,"u-marg-b--small":"poll"===t,"u-marg-b--medium":"poll"!==t}),v={width:u,instanceId:"feed-post",selectedIds:f,onSelect:this.onSelectFile,onReplace:this.onReplaceFile,onRemove:this.onRemoveFile,onFilesChange:function(e){return o("files",e)},maxFiles:10,dropzoneRef:this.props.dropzoneRef,isNativeVideoEnabled:this.props.isNativeVideoEnabled,feedPostformType:this.props.feedPostformType,canUploadAllFileTypes:this.props.canUploadAllFileTypes};return E.a.createElement("form",{method:"post",encType:"multipart/form-data",onSubmit:r(this.onSubmit)},E.a.createElement(je.a,{when:i&&!l}),E.a.createElement("div",{className:g},E.a.createElement("div",{className:"Post-header ".concat(m?"":"u-marg-b--xxlarge")},E.a.createElement("div",{className:"Post-avatarContainer"},E.a.createElement(Oe.a,{img:s.get("img"),name:s.get("name"),showTitle:!0})),E.a.createElement("div",{className:"Post-headerInner"},m?E.a.createElement("div",{className:"type--500"},s.get("name")):E.a.createElement("span",{className:"type--secondary Post-placeholder"},this.getPlaceholder()))),E.a.createElement("div",{className:y},E.a.createElement(ye.Field,{component:Fe.a,name:"body",placeholder:ge()(this.getPlaceholder()),onFocus:this.props.onEditorFocus,enableTopics:a,isInitOnClick:!1,isRichText:"poll"!==t,showError:!1,showErrorOutline:!1,showEmojiPicker:m,hasNoBorder:!0,dropzoneRef:this.props.dropzoneRef,handleDragAndDrop:this.props.handleDragAndDrop}),"mobile"===c&&m&&E.a.createElement("div",{className:"u-border-top--formBorder"},E.a.createElement(Re.a,pe()({},v,{isButtonsLayout:!0,customAddMessage:E.a.createElement("span",{className:"type--500"},b),isSmall:!0})))),E.a.createElement("div",{className:"u-marg-b--medium"},"poll"===t&&E.a.createElement(ye.FormSection,{name:t},E.a.createElement(De,{changeField:o}))),h&&m&&"mobile"!==c&&E.a.createElement("div",{className:"u-marg-b--medium"},E.a.createElement(Re.a,pe()({},v,{isButtonsLayout:!0,customAddMessage:b,handleDragAndDrop:this.props.handleDragAndDrop}))),m&&E.a.createElement("div",{className:"PostForm-strip u-cf"},E.a.createElement(Ie.a,{type:n,change:o,formName:Be}),E.a.createElement("div",{className:"u-floatRight"},E.a.createElement(Ee.a,{type:"submit",label:Object(M.a)("button_label.post"),appearance:"brand",disabled:this.isButtonDisabled()})))))}}]),n}(E.a.Component);b()(Ue,"propTypes",{feedContext:y.a.string,feedPostformType:y.a.string,postType:y.a.oneOf(["text","poll"]).isRequired,type:y.a.string,placeholder:y.a.string,enableTopics:y.a.bool,onReset:y.a.func,isOpen:y.a.bool,isUnlistedSite:y.a.bool,handleDragAndDrop:y.a.func,dropzoneRef:y.a.oneOfType([y.a.node,y.a.object]).isRequired,canUploadAllFileTypes:y.a.bool}),b()(Ue,"defaultProps",{enableTopics:!0,isOpen:!1,isUnlistedSite:!1,handleDragAndDrop:function(){},canUploadAllFileTypes:!1});var ze=Object(ye.formValueSelector)(Be);var Ve=Object(j.connect)((function(e){return{viewport:Object(_e.a)(e),body:ze(e,"body"),currentUser:Object(ae.getCurrentUser)(e),initialValues:new fe.a.Map({shareSubject:"news",files:new fe.a.List,poll:new fe.a.Map({choices:new fe.a.List(["",""])})})}}),(function(e,t){return{onSubmit:function(n){if(n.get("files").size>10)return e(Object(ve.l)(Object(M.a)("feed.post_form.max_files_reached",{max:10}))),!1;if(Object(we.b)("feed-post"))return e(Object(ve.l)(Object(M.a)("file.upload.still_uploading.files"))),!1;var a=function(e,t,n,a,r,o,i,l){var s="poll"===t,c="content"===n&&r&&o&&!l,u=e.get("shareSubject"),d=(e.get("files")||new fe.a.List).size>0,p=i,m=t;"site"===u?p=e.get("shareSite"):"person"===u&&(p=e.get("sharePerson"));var f=new fe.a.Map({body:Object(D.b)(e.get("body"),s,c,o),listOfTopics:e.get("topics")||[],listOfFiles:s?[]:e.get("files")||[],type:"site"===u||"person"===u?"record":a,subjectId:p});if(o&&(f=f.set("chatterGroupId",o)),s)f=f.set("choices",e.getIn(["poll","choices"]).filter((function(e){return!!e})));else{var h=Object(he.c)(f.get("body")).filter(he.i);h.length>0&&!d&&(m="text",f=f.set("url",h[0]))}return[m,f]}(n,t.postType,t.feedContext,t.type,t.canMention,t.chatterGroupId,t.subjectId,t.isUnlistedSite),r=te()(a,2),o=r[0],i=r[1];return Object(D.c)(i.get("body"))>Ce.k?e(Object(ve.f)(Object(M.a)("feed.create.too_many_mentions"))):e(Object(C.a)(o,i.toJS()))}}}))(Object(ye.reduxForm)({form:Be,enableReinitialize:!0,destroyOnUnmount:!1,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fe.a.Map,t=arguments.length>1?arguments[1]:void 0,n=(e.get("files")||new fe.a.List).filter((function(e){return!!e})),a="poll"===t.postType||0===n.size?Object(ke.g)(e,{requiredHtml:["body"]}):{};return"poll"===t.postType&&(a.poll=Pe(e.get("poll")||new fe.a.Map)),a},shouldValidate:function(){return!0}})(Ue));function qe(e){var t=e.selected,n=e.onSelect,a=[{name:"text",label:Object(M.a)("feed.post_type.post")},{name:"poll",label:Object(M.a)("feed.post_type.poll")}];return E.a.createElement("div",{className:"u-border-bottom"},E.a.createElement("ul",{className:"Filter-pills Filter-pills--medium u-marg-b--xsmall"},a.map((function(e){return E.a.createElement("li",null,E.a.createElement("label",{htmlFor:e.name,className:K()({active:t===e.name,"PostForm-pills":e.name===t})},E.a.createElement("button",{type:"button",value:e.name,id:e.name,name:e.name,onClick:function(t){return function(e,t){e.preventDefault(),n(t)}(t,e.name)},role:"tab","aria-selected":e.name===t?"true":"false"},E.a.createElement("span",null,e.label))))}))))}qe.propTypes={selected:y.a.oneOf(["text","file","link","poll"]).isRequired,onSelect:y.a.func.isRequired};var We=qe;function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var Ge=function(e){u()(n,e);var t=He(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).state={postType:"text",isOpen:!1},a.dropzoneRef=E.a.createRef(),a.onSelectType=a.onSelectType.bind(s()(a)),a.onReset=a.onReset.bind(s()(a)),a.onEditorFocus=a.onEditorFocus.bind(s()(a)),a.onOpen=a.onOpen.bind(s()(a)),a}return i()(n,[{key:"onSelectType",value:function(e){this.setState({postType:e})}},{key:"onReset",value:function(){this.setState({postType:"text",isOpen:!1})}},{key:"onEditorFocus",value:function(){this.state.isOpen||this.setState({isOpen:!0},(function(){document.querySelector(".PostForm-pills").focus()}))}},{key:"onOpen",value:function(){this.setState({isOpen:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.postType,a=t.isOpen,r=this.props,o=r.feedContext,i=r.placeholder,l=r.type,s=r.subjectId,c=r.subjectName,u=r.canMention,d=r.chatterGroupId,p=r.enableTopics,m=r.canChangeShareOptions,f=r.width,h=r.isUnlistedSite,b=r.feedPostformType,g=r.canUploadAllFileTypes,y=K()({PostForm:!0,"u-hidePrint":!0,"u-posRelative":!0,"is-closed":!a});return E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:y,role:"button"},E.a.createElement(ue,{dropzoneRef:this.dropzoneRef,isOpen:this.state.isOpen,canAddFiles:"poll"!==n,canUploadAllFileTypes:g},(function(t){var r=t.handleDragAndDrop;return E.a.createElement(E.a.Fragment,null,e.state.isOpen&&E.a.createElement(We,{selected:n,onSelect:e.onSelectType}),E.a.createElement(D.e.Consumer,null,(function(t){var y=t.isNativeVideoEnabled;return E.a.createElement(Ve,{feedContext:o,feedPostformType:b,postType:n,placeholder:i,type:l,subjectId:s,subjectName:c,canMention:u,chatterGroupId:d,enableTopics:p,canChangeShareOptions:m,canUploadAllFileTypes:g,onOpen:e.onOpen,isOpen:a,onReset:e.onReset,onEditorFocus:e.onEditorFocus,width:f,isUnlistedSite:h,isNativeVideoEnabled:y,dropzoneRef:e.dropzoneRef,handleDragAndDrop:r})})))}))))}}]),n}(O.b);Ge.propTypes={feedContext:y.a.string,placeholder:y.a.string,type:y.a.string,subjectId:y.a.string,subjectName:y.a.string,chatterGroupId:y.a.string,enableTopics:y.a.bool,canChangeShareOptions:y.a.bool,width:y.a.number,isUnlistedSite:y.a.bool,feedPostformType:y.a.string,canUploadAllFileTypes:y.a.bool},Ge.defaultProps={canChangeShareOptions:!1,isUnlistedSite:!1,canUploadAllFileTypes:!1};var Ze=Ge,Ye=n(241),Je=n(178);var Qe=function(){return E.a.createElement("div",{className:"Post"},E.a.createElement("div",{className:"Post-body"},E.a.createElement("div",{className:"Post-header"},E.a.createElement("div",{className:"Post-avatarContainer"},E.a.createElement(Je.a,{isImage:!0,isRound:!0})),E.a.createElement("div",{className:"Post-headerInner"},E.a.createElement("span",{className:"type--title"},E.a.createElement(Je.a,{width:"170px"})),E.a.createElement("div",{className:"Post-headerDate"},E.a.createElement("div",{className:"type--b3"},E.a.createElement(Je.a,{width:"80px"}))))),E.a.createElement(Je.a,null),E.a.createElement(Je.a,{width:"70%"}),E.a.createElement(Je.a,{width:"90%"})))},Ke=n(115),$e=n(762),Xe=n(1166),et=n(287),tt=function(e){var t=e.file,n=Object(et.a)(),a=n.isActive,r=n.activate;return E.a.createElement(E.a.Fragment,null,a?E.a.createElement("div",{className:"video-fluid ImageOptions-trigger","data-video-id":t.get("id")},E.a.createElement($e.a,{mediaFile:t,showInfoIcon:!0,isAutoplay:!0})):E.a.createElement("div",{className:"u-posRelative"},E.a.createElement("div",{className:"video-fluid ImageOptions-trigger"},E.a.createElement(Xe.a,{clickHandler:r,videoFile:t,showInfoIcon:!0}))))};tt.propTypes={file:y.a.instanceOf(fe.a.Map).isRequired};var nt=tt,at=n(143),rt=n.n(at),ot=n(2770),it=n(2771),lt=n(240),st=/(login|log in|signin|sign in|register|sign up|signup)/i;var ct=n(1004);function ut(e){var t=e.url,n=e.hasSmallImage,a=e.isCompact;return E.a.createElement(ot.a,{url:t},(function(e){var r=e.isLoading,o=e.isLoaded,i=e.embed;if(r||!o||!i||function(e,t){var n=new rt.a(e),a=new rt.a(t.get("url"));return(n.hostname!==a.hostname||n.pathname!==a.pathname)&&!t.get("thumbnail_url")&&!t.get("html")&&(st.test(t.get("title"))||st.test(t.get("description"))||st.test(t.get("url")))}(t,i))return null;if("video"===i.get("type")&&"https://www.instagram.com"===i.get("provider_url"))return E.a.createElement("div",{className:"video-fluid"},E.a.createElement("a",{className:"u-marg-b--small u-posFit PlayButton-trigger PlayButton-trigger--darkBackground",href:t},E.a.createElement("img",{src:lt.b,style:{backgroundImage:i.get("thumbnail_url")?"url(".concat(i.get("thumbnail_url"),")"):null},className:"u-imageContain",alt:""}),E.a.createElement("div",{className:"PlayButton"},E.a.createElement(L.a,{isLegacy:!0,name:"play"}))));if(i.get("html")){var l=E.a.createElement("div",{className:"Feed-iframeContainer",dangerouslySetInnerHTML:{__html:Object(ct.a)(i.get("html"))}});return E.a.createElement("div",{className:"u-marg-b--small IframeWrapper"},"video"===i.get("type")?E.a.createElement("div",{className:"video-fluid"},l):l)}return"photo"===i.get("type")?E.a.createElement("div",{className:"u-marg-b--medium"},E.a.createElement("img",{src:i.get("url"),role:"presentation",alt:"",className:n?"FileSingle-image FileSingle-image--small":""})):i.get("title")?E.a.createElement("div",{className:"u-marg-t--small"},E.a.createElement(it.a,{isCompact:a,url:t,title:i.get("title"),img:i.get("thumbnail_url"),description:i.get("description"),domain:i.get("provider_url")})):null}))}ut.propTypes={url:y.a.string.isRequired,hasSmallImage:y.a.bool,isCompact:y.a.bool},ut.defaultProps={isCompact:!1};var dt=ut;function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}function mt(e,t){var n=Object(he.c)(e).filter((function(e){return!Object(he.i)(e)}));return t&&!function(e){try{return!["docs.google.com","cloud.box.com"].includes(new rt.a(e).hostname)}catch(e){return!0}}(n[0])?null:n[0]||null}var ft=function(e){u()(n,e);var t=pt(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).state={url:[]},a}return i()(n,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({url:mt(this.props.body,this.props.isMobileViewport)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.body!==e.body&&this.setState({url:mt(e.body,e.isMobileViewport)})}},{key:"shouldComponentUpdate",value:function(e,t){return this.state.url!==t.url}},{key:"render",value:function(){var e=this.state.url,t=this.props,n=t.hasSmallImage,a=t.isCompact;return e?E.a.createElement(dt,{isCompact:a,url:e,hasSmallImage:n}):null}}]),n}(E.a.Component);ft.propTypes={body:y.a.string,hasSmallImage:y.a.bool,isMobileViewport:y.a.bool,isCompact:y.a.bool},ft.defaultProps={hasSmallImage:!1,isMobileViewport:!1,isCompact:!1};var ht=ft,bt=n(1021),gt=n(3444),yt=n(161);function vt(e){var t=e.fileTransports;return E.a.createElement(bt.a,pe()({files:t},e))}vt.propTypes={fileIds:y.a.instanceOf(fe.a.Iterable)};var Et=Object(j.connect)((function(e,t){return{fileTransports:Object(yt.d)(e,t.fileIds)}}))(vt),Ot=n(311);function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var Ct=function(e){u()(n,e);var t=jt(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).state={selectedFileId:null,stripOpen:e.stripOpen||!1},a.removeUnloadHandler=null,a.editorRef=null,a.dropzoneRef=E.a.createRef(),a.onEditorFocus=a.onEditorFocus.bind(s()(a)),a.onSubmit=a.onSubmit.bind(s()(a)),a.onSelectFile=a.onSelectFile.bind(s()(a)),a.onReplaceFile=a.onReplaceFile.bind(s()(a)),a.onRemoveFile=a.onRemoveFile.bind(s()(a)),a.scrollIntoView=a.scrollIntoView.bind(s()(a)),a}return i()(n,[{key:"onEditorFocus",value:function(){this.state.stripOpen||this.setState({stripOpen:!0})}},{key:"onSubmit",value:function(e){var t=this,n=this.props.onSubmit(e),a=this.props,r=a.feedContext,o=a.postTypeForTracking;return Object(Se.b)("Create Reply",{postType:r,pType:o}),n?Promise.resolve(n).then((function(e){e&&"success"===e.status&&(t.props.reset(),t.setState({stripOpen:!1,selectedFileId:null}),"function"==typeof t.props.onReset&&t.props.onReset())})):null}},{key:"onSelectFile",value:function(e){Array.isArray(e)?this.setState({selectedFileId:e.shift()}):this.setState({selectedFileId:e})}},{key:"onReplaceFile",value:function(e,t){this.onSelectFile(t)}},{key:"onRemoveFile",value:function(){this.setState({selectedFileId:null})}},{key:"scrollIntoView",value:function(e){if(this.props.scrollIntoViewOnMount){var t=this.editorRef&&this.editorRef.getRenderedComponent();if(t&&e){var n=t;if(n&&n.froalaInstance){var a=n.froalaInstance.el,r=a.offsetHeight,o=a.offsetTop,i=e.offsetHeight;Object(Ot.d)(a,{mustBeCompletelyVisible:!0,marginBottom:i-o-r})}}}}},{key:"isButtonDisabled",value:function(){return this.props.invalid||this.props.submitting}},{key:"render",value:function(){var e=this,t=this.props,n=t.postId,a=t.handleSubmit,r=t.change,o=t.isAutoFocus,i=t.dirty,l=t.submitting,s=t.currentUser,c=t.canUploadAllFileTypes,u=this.state,d=u.selectedFileId,p=u.stripOpen,m=K()({Reply:!0,"Reply--form":!0,"Reply--hiddenAvatar":p,"has-smallControls":!0,"has-smallTextArea":!p,"has-hiddenControls":!p});return E.a.createElement(D.e.Consumer,null,(function(t){var u=t.isNativeVideoEnabled;return E.a.createElement("div",{className:m},E.a.createElement("div",{className:"Reply-inner"},E.a.createElement("div",{className:"Reply-avatarContainer"},E.a.createElement(Oe.a,{url:s.get("url"),img:s.get("img"),name:s.get("name")})),E.a.createElement("form",{className:"Reply-body",onSubmit:a(e.onSubmit),ref:e.scrollIntoView},E.a.createElement(je.a,{when:i&&!l}),E.a.createElement(ue,{dropzoneRef:e.dropzoneRef,isOpen:e.state.stripOpen,canAddFiles:!0,canUploadAllFileTypes:c},(function(t){var a=t.handleDragAndDrop;return E.a.createElement("div",{className:"u-border u-borderRadius--2 u-posRelative u-zIndex--1"},E.a.createElement(ye.Field,{component:Fe.a,name:"body",placeholder:Object(M.a)("feed.reply.placeholder"),onFocus:e.onEditorFocus,showError:!1,isInitOnClick:!1,isAutoFocus:o,showEmojiPicker:!0,hasNoBorder:!0,forwardRef:!0,ref:function(t){e.editorRef=t||e.editorRef},dropzoneRef:e.dropzoneRef,handleDragAndDrop:a}),p&&E.a.createElement("div",{className:"u-border-top--formBorder"},E.a.createElement(Re.a,{canUploadAllFileTypes:c,dropzoneRef:e.dropzoneRef,isButtonsLayout:!0,instanceId:"feed-reply-".concat(n),selectedIds:new fe.a.List([d]),onSelect:e.onSelectFile,onReplace:e.onReplaceFile,onRemove:e.onRemoveFile,onFilesChange:function(e){return r("listOfFiles",e)},maxFiles:1,showPreviews:!1,customAddMessage:E.a.createElement("span",{className:"type--500"},u?Object(M.a)("dropzone.drop_type_media_and_file_or_plural"):Object(M.a)("dropzone.drop_type_photo_and_file_or_plural")),isSmall:!0,isNativeVideoEnabled:u,handleDragAndDrop:a})),d&&E.a.createElement("div",{className:"Reply-fileList"},E.a.createElement(Et,{fileIds:new fe.a.List([d]),onClear:e.onRemoveFile,enableLightbox:!1,enableDownload:!1,isEditing:!0})))})),p&&E.a.createElement("div",{className:"Strip Strip--reply"},E.a.createElement(Ee.a,{type:"submit",label:Object(M.a)("button_label.reply"),appearance:"brand",disabled:e.isButtonDisabled()})))))}))}}]),n}(E.a.Component);b()(Ct,"propTypes",{postId:y.a.string.isRequired,feedContext:y.a.string.isRequired,onReset:y.a.func,isAutoFocus:y.a.bool,scrollIntoViewOnMount:y.a.bool,canUploadAllFileTypes:y.a.bool}),b()(Ct,"defaultProps",{isAutoFocus:!1,scrollIntoViewOnMount:!1,canUploadAllFileTypes:!1});var _t=Object(j.connect)((function(e,t){return{currentUser:Object(ae.getCurrentUser)(e),form:"".concat("FEED_REPLY","-").concat(t.postId),initialValues:{listOfFiles:new fe.a.List}}}))(Object(ye.reduxForm)({validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new fe.a.Map,t=(e.get("listOfFiles")||new fe.a.List).filter((function(e){return!!e}));return t.size>0?{}:Object(ke.g)(e,{requiredHtml:["body"]})}})(Object(j.connect)(null,(function(e,t){return{onSubmit:function(n){if(Object(we.b)("feed-reply-".concat(t.postId)))return e(Object(ve.l)(Object(M.a)("file.upload.still_uploading.files"))),!1;var a=n.set("body",Object(D.b)(n.get("body")));return Object(D.c)(a.get("body"))>Ce.k?e(Object(ve.f)(Object(M.a)("feed.create.too_many_mentions"))):e(Object(C.b)(t.postId,a.toJS()))}}}))(Ct)));function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var Nt=function(e){u()(n,e);var t=St(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).state={isOpen:!1},a.replaceForm=a.replaceForm.bind(s()(a)),a.reset=a.reset.bind(s()(a)),a}return i()(n,[{key:"replaceForm",value:function(){this.setState({isOpen:!0})}},{key:"reset",value:function(){this.setState({isOpen:!1})}},{key:"render",value:function(){return this.state.isOpen?E.a.createElement(_t,pe()({stripOpen:!0,scrollIntoViewOnMount:!0},this.props,{onReset:this.reset,isAutoFocus:!0})):E.a.createElement("div",{className:"Reply Reply--form"},E.a.createElement("div",{className:"Reply-inner"},E.a.createElement("div",{className:"Reply-avatarContainer"},E.a.createElement(Oe.a,{url:this.props.currentUser.get("url"),name:this.props.currentUser.get("name"),img:this.props.currentUser.get("img")})),E.a.createElement("div",{className:"Reply-body"},E.a.createElement("button",{className:"FakeInput",onClick:this.replaceForm},Object(M.a)("feed.reply.placeholder")))))}}]),n}(E.a.Component);var kt=Object(j.connect)((function(e){return{currentUser:Object(ae.getCurrentUser)(e)}}),null,null,{forwardRef:!0})(Nt);var wt=function(){return E.a.createElement("div",{className:"Reply"},E.a.createElement("div",{className:"Reply-inner"},E.a.createElement("div",{className:"Reply-avatarContainer"},E.a.createElement(Je.a,{isImage:!0,isRound:!0})),E.a.createElement("div",{className:"Reply-body u-pad-l--small"},E.a.createElement("p",null,E.a.createElement(Je.a,{width:"20%"})),E.a.createElement("p",null,E.a.createElement(Je.a,{width:"80%"})),E.a.createElement("p",null,E.a.createElement(Je.a,{width:"90%"})),E.a.createElement("p",null,E.a.createElement(Je.a,{width:"30%"})))))},Ft=n(1999),Rt=n(850),It=n(518),Tt=n(2691),xt=n(192),Pt=n(128),Dt=n(1022),Mt=n(484),At=n(66),Lt=n(860),Bt=n(3445),Ut=n(165),zt=n(2021);function Vt(e){var t=e.like,n=e.unlike,a=e.id;return E.a.createElement(zt.a,{isLegacy:!0,context:"reply",isLiked:e.isLiked,onLike:t,onUnlike:n,id:a},(function(e,t){return e?E.a.createElement("button",{className:"Reply-like type--title theme--color",type:"button",onClick:t},Object(M.a)("common.like")):E.a.createElement("button",{className:"Reply-like type--title",type:"button",onClick:t},Object(M.a)("common.like"))}))}Vt.propTypes={id:y.a.string.isRequired,isLiked:y.a.bool.isRequired};var qt=Object(j.connect)(null,(function(e,t){return{like:function(){return Object(Se.b)("Like Reply",{postType:t.feedContext,pType:t.postTypeForTracking}),e(Object(C.q)(t.postId,t.id))},unlike:function(){return e(Object(C.r)(t.postId,t.id))}}}))(Vt),Wt=n(1008),Ht=n(1014),Gt=n(52),Zt=n(113),Yt=n(3446);function Jt(e){var t=e.postId,n=e.replyId,a=Object(Yt.a)(t,n),r=a.users,o=a.loading,i=a.canPaginate,l=a.loadMore;return E.a.createElement("div",{className:"Modal-content"},E.a.createElement(Wt.a,{itemComponent:Ht.a,users:r,isLoading:o,canPaginate:i,onLoadMore:l,showPopovers:!1,showContact:!0,showFullSeperator:!0}))}Jt.propTypes={postId:y.a.string.isRequired,replyId:y.a.string};var Qt=Object(Zt.a)((function(e){var t=e.postId,n=e.replyId;return{name:n?Gt.db:Gt.ab,id:n||t,title:Object(M.a)("feed.people_liked"),classes:["Modal--mini"]}}))(Jt);function Kt(e){var t=e.post,n=e.reply,a=e.feedContext;return!!t.get("canLike")&&E.a.createElement(Pt.a,null,E.a.createElement(D.a.Consumer,null,(function(e){var r=e.postTypeForTracking;return E.a.createElement(qt,{id:n.get("id"),postId:t.get("id"),isLiked:n.get("isLiked"),feedContext:a,postTypeForTracking:r})})),n.get("likeCount")>0&&E.a.createElement(Ut.a,{modal:E.a.createElement(Qt,{postId:t.get("id"),replyId:n.get("id")})},(function(e){return E.a.createElement("button",{type:"button",className:"Reply-likeCount type--secondary type--b5",onClick:e,"aria-label":Object(M.a)("feed.reply.like_count_label")},n.get("likeCount"))})))}Kt.propTypes={post:y.a.instanceOf(fe.a.Map).isRequired,reply:y.a.instanceOf(fe.a.Map).isRequired};var $t=Kt,Xt=n(1003),en=n(227),tn=n(301);function nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var an=function(e){u()(n,e);var t=nn(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.delete,n=e.reply,a=e.onEdit,r=n.get("canEdit"),o=n.get("canDelete");return r||o?E.a.createElement(Ut.a,{modal:E.a.createElement(tn.a,{name:Gt.cb,id:n.get("id"),title:Object(M.a)("feed.reply.delete_label"),buttonText:Object(M.a)("common.delete"),onConfirm:t},E.a.createElement("p",null,Object(M.a)("feed.reply.delete_warning")),E.a.createElement("strong",{className:"type--500"},Object(M.a)("common.cannot_be_undone")))},(function(e){return E.a.createElement("div",{className:"Reply-optionsContainer"},E.a.createElement(Xt.a,{icon:"more",hasArrow:!0,isTile:!0,hasLegacyIcon:!1},r&&E.a.createElement(en.a,{label:Object(M.a)("common.edit"),title:Object(M.a)("feed.reply.edit_label"),onSelect:a,key:"edit"}),o&&E.a.createElement(en.a,{key:"delete",label:Object(M.a)("common.delete"),title:Object(M.a)("feed.reply.delete_label"),onSelect:e})))})):null}}]),n}(E.a.PureComponent);b()(an,"propTypes",{post:y.a.instanceOf(fe.a.Map).isRequired,reply:y.a.instanceOf(fe.a.Map).isRequired});var rn=Object(j.connect)(null,(function(e,t){return{delete:function(){return e(Object(C.d)(t.post.get("id"),t.reply.get("id")))}}}))(an);function on(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var ln=function(e){u()(n,e);var t=on(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),b()(s()(e),"state",{isEditing:!1}),b()(s()(e),"openEdit",(function(){e.state.isEditing||e.setState({isEditing:!0})})),b()(s()(e),"closeEdit",(function(){e.state.isEditing&&e.setState({isEditing:!1})})),b()(s()(e),"renderVideoFile",(function(e){return e.get("isAccessible")?E.a.createElement("div",{className:"u-marg-t--small"},E.a.createElement(nt,{file:e})):E.a.createElement("div",{className:"u-marg-t--small"},E.a.createElement(It.a,{isSingle:!0}))})),b()(s()(e),"renderFiles",(function(t){if(!t.size)return null;var n=t.first();return 1===t.size&&n.get("isVideo")?e.renderVideoFile(n):E.a.createElement("div",{className:"u-marg-t--small"},E.a.createElement(bt.a,{hasSmallPreview:!0,files:t.map((function(e){return e.set("result",e)}))}))})),e}return i()(n,[{key:"render",value:function(){var e=this.state.isEditing,t=this.props,n=t.reply,a=t.post,r=t.isMobileViewport,o=t.feedContext,i=n.get("authoredBy");return E.a.createElement("div",{className:"Reply"},E.a.createElement("div",{className:"Reply-inner"},E.a.createElement("div",{className:"Reply-avatarContainer"},E.a.createElement(Dt.a,{user:i})),E.a.createElement("div",{className:"Reply-body"},E.a.createElement(E.a.Fragment,null,e?E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"Content Content--small"},E.a.createElement(Bt.a,{id:n.get("id"),postId:a.get("id"),body:n.get("body"),listOfFiles:n.get("files"),onCancel:this.closeEdit})),n.get("files").size>0&&E.a.createElement(bt.a,{hasSmallPreview:!0,files:n.get("files").map((function(e){return e.set("result",e)}))})):E.a.createElement("div",{className:"Reply-content"},E.a.createElement("div",{className:"Reply-contentInner"},E.a.createElement("div",{className:"Content Content--small"},i.get("url")?E.a.createElement(E.a.Fragment,null,E.a.createElement("a",{href:i.get("url"),className:"type--title u-floatLeft"},i.get("name"))," "):E.a.createElement("span",{className:"u-floatLeft"},i.get("name")," "),E.a.createElement(Tt.a,{html:Object(Lt.a)(n.get("body"),!1),className:"u-inline"}))),Mt.c.has(n.getIn(["link","type"]))&&E.a.createElement("ul",{className:"Reply-contentPreview u-marg-t--small u-marg-b--xsmall u-bg-wash"},E.a.createElement(Ft.a,{size:"small",showSite:!0,isGrouped:!1,isSingleLineDescription:!1,isSingleLineTitle:!1,content:n.get("link"),excerpt:n.getIn(["link","description"]),truncateDescription:140,showExplicitMustRead:!1,hasSiteImageFallback:!0})),E.a.createElement(ht,{isCompact:!0,body:n.get("body"),hasSmallImage:!0,isMobileViewport:r}),this.renderFiles(n.get("files")))),!e&&E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"Reply-actionBarContainer u-hidePrint"},E.a.createElement(xt.a,{isDotted:!0,hasNoBottom:!0},E.a.createElement($t,{post:a,reply:n,feedContext:o}),E.a.createElement(Pt.a,null,E.a.createElement(Rt.a,{input:n.get("createdAt"),type:At.g})))),E.a.createElement(rn,{post:a,reply:n,onEdit:this.openEdit})))))}}]),n}(O.b);function sn(e){var t=e.post,n=e.replies,a=e.total,r=e.load,o=e.loading,i=e.isMobileViewport,l=e.feedContext;return 0===a?null:E.a.createElement(E.a.Fragment,null,a>n.size&&E.a.createElement("button",{type:"button",className:"Replies-viewMore theme--color",onClick:r},Object(M.a)("feed.reply.show_more")),o&&E.a.createElement("div",{className:"Replies-loader"},E.a.createElement(wt,null)),E.a.createElement("div",{className:"Replies-list"},n.map((function(e){return E.a.createElement(ln,{reply:e,post:t,isMobileViewport:i,key:e.get("id"),feedContext:l})})).toArray()))}b()(ln,"propTypes",{feedContext:y.a.string.isRequired,post:y.a.instanceOf(fe.a.Map).isRequired,reply:y.a.instanceOf(fe.a.Map).isRequired,isMobileViewport:y.a.bool}),sn.propTypes={feedContext:y.a.string.isRequired,post:y.a.instanceOf(fe.a.Map).isRequired,replies:y.a.instanceOf(fe.a.Iterable),total:y.a.number,load:y.a.func,loading:y.a.bool};var cn=Object(j.connect)((function(e){return{isMobileViewport:Object(_e.c)(e)}}),(function(e,t){return{load:function(){return e(Object(C.k)(t.post.get("id")))}}}))(sn),un=n(2048),dn=n(2722),pn=n(2900);function mn(e){var t=e.post.get("campaign");return t?E.a.createElement("div",{className:"u-marg-b--small u-posRelative u-zIndex--1"},E.a.createElement(dn.a,{campaign:t},(function(e){return E.a.createElement(pn.a,pe()({},e,{hasPrimaryButton:!1,showCounts:!1}))}))):null}mn.propTypes={post:y.a.instanceOf(fe.a.Map)},mn.defaultProps={};var fn=mn,hn=n(220);function bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var gn=function(e){u()(n,e);var t=bn(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).state={isOpen:!1},a.onExpandClick=a.onExpandClick.bind(s()(a)),a}return i()(n,[{key:"onExpandClick",value:function(){this.setState({isOpen:!0})}},{key:"render",value:function(){var e=this.props.post,t=this.state.isOpen,n=e.get("changes")||new fe.a.Map;return E.a.createElement("div",{className:"Content Content--small u-marg-b--medium"},E.a.createElement("p",null,n.get("summary"),n.get("amountNotInSummary")>0&&!t&&E.a.createElement(hn.a,{onClick:this.onExpandClick,label:"…".concat(Object(M.a)("common.and_count_more",{count:n.get("amountNotInSummary")}))})),n.get("amountNotInSummary")>0&&t&&E.a.createElement("ul",null,n.get("listOfChanges").map((function(e,t){return E.a.createElement("li",{key:t},e)}))))}}]),n}(E.a.Component);gn.propTypes={post:y.a.instanceOf(fe.a.Map)};var yn=gn,vn=n(224);function En(e){var t=e.post,n=e.feedContext,a=t.get("postType"),r=t.get("link"),o=r.get("video"),i=t.get("site"),l=r.get("isFromPromoteModal"),s=i&&(l||"timeline"===a);return r.get("type")?E.a.createElement(un.a,{post:t,showSite:!s,feedContext:n}):o?E.a.createElement("div",null,E.a.createElement("div",{className:"video-fluid"},E.a.createElement($e.a,{mediaFile:o})),E.a.createElement("div",{className:"Box Box--large Box--wash u-neg-t--1"},E.a.createElement("h2",{className:"type--h4"},E.a.createElement("a",{className:"type--title",href:r.get("url")},r.get("title"))),E.a.createElement("p",{className:"type--b3 type--secondary"},E.a.createElement(vn.a,{length:250},r.get("description"))))):Object(he.i)(r.get("url"))?null:E.a.createElement(dt,{url:r.get("url")})}En.propTypes={post:y.a.instanceOf(fe.a.Map)};var On=En;function jn(e){var t=e.post,n=t.get("isRichText")?t.get("body"):Object(Lt.a)(t.get("body"),!1);return E.a.createElement(Tt.a,{html:n,className:"Content Content--small u-marg-b--medium u-hideIfEmpty"})}jn.propTypes={post:y.a.instanceOf(fe.a.Map).isRequired};var Cn=jn,_n=n(208),Sn=n(242);function Nn(e){var t=e.answers,n=e.totalVotes,a=e.onVote,r=e.legend,o=Object(v.useCallback)((function(e){"function"==typeof a&&a(e.answer)}),[a]);return E.a.createElement(_n.b,{onSubmit:o},(function(e){var a=e.handleSubmit,o=e.invalid,i=e.submitting;return E.a.createElement("form",{onSubmit:a},E.a.createElement("div",null,E.a.createElement(_n.a,{component:Sn.a,name:"answer",validate:ke.E,options:t.map((function(e){return{value:e.get("id"),label:e.get("title")}})).toArray(),isLight:!0,isStacked:!0,hasBorderBottom:!0,legend:r})),E.a.createElement("div",{className:"u-textRight type--b5 u-neg-t--small"},E.a.createElement("div",{className:"u-inlineBlock type--secondary u-marg-r--small"},Object(M.a)("feed.vote_count",{count:n})),E.a.createElement(Ee.a,{appearance:"brand",type:"submit",label:Object(M.a)("button_label.vote"),disabled:o||i})))}))}Nn.propTypes={answers:y.a.instanceOf(fe.a.List),totalVotes:y.a.number,onVote:y.a.func};var kn=Nn,wn=n(215),Fn=n(272);function Rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var In=function(e){u()(n,e);var t=Rn(n);function n(e){var a;return r()(this,n),a=t.call(this,e),b()(s()(a),"handle",null),b()(s()(a),"checkForTick",(function(){a.props.post.getIn(["poll","hasVoted"])&&!a.state.hasTicked&&(a.handle=setTimeout((function(){return a.setState({hasTicked:!0})}),1))})),b()(s()(a),"castVote",(function(e){var t=a.props;return(0,t.onVote)(t.post.get("id"),e)})),a.state={hasTicked:!1},a}return i()(n,[{key:"componentDidMount",value:function(){this.checkForTick()}},{key:"componentDidUpdate",value:function(e){fe.a.is(this.props.post.get("poll"),e.post.get("poll"))||this.setState({hasTicked:!1}),this.checkForTick()}},{key:"componentWillUnmount",value:function(){clearInterval(this.handle)}},{key:"render",value:function(){var e=this.props,t=e.post,n=e.onRefresh,a=this.state.hasTicked,r=t.get("poll"),o=t.get("id"),i=E.a.createElement("div",{className:"u-marg-b--medium"},E.a.createElement("div",{dangerouslySetInnerHTML:{__html:Object(ct.a)(Object(Lt.a)(r.get("title")))}}));return r.get("hasVoted")?r.get("isLoading")?E.a.createElement(E.a.Fragment,null,i,E.a.createElement(wn.a,{hasBorder:!0})):E.a.createElement(E.a.Fragment,null,i,E.a.createElement("ul",null,r.get("answers").map((function(e){return E.a.createElement("li",{className:"u-marg-b--small",key:e.get("id")},E.a.createElement("div",{className:"u-marg-b--xsmall",tabIndex:"0"},e.get("title")),E.a.createElement(Fn.a,{isRounded:!0,height:11,value:a?e.get("percentage"):0}),E.a.createElement("span",{className:"type--b5 type--secondary",tabIndex:"0"},Object(M.a)("feed.vote_count",{count:e.get("voteCount")})," (".concat(e.get("percentage"),"%)")))}))),E.a.createElement("div",{className:"u-textRight type--b5 Post-pollFooter"},E.a.createElement("div",{className:"u-inlineBlock type--secondary u-marg-r--small"},Object(M.a)("feed.vote_count",{count:r.get("totalVotes")})),E.a.createElement("button",{type:"button",className:"type--fauxLink",onClick:function(e){e.preventDefault(),n(o)}},Object(M.a)("button_label.refresh")))):E.a.createElement(E.a.Fragment,null,E.a.createElement(kn,{answers:r.get("answers"),totalVotes:r.get("totalVotes"),onVote:this.castVote,legend:i}))}}]),n}(E.a.Component);b()(In,"propTypes",{post:y.a.instanceOf(fe.a.Map)});var Tn={link:[Cn,On],timeline:[Cn,On],campaign:[Cn,fn],file:[Cn],poll:[Object(j.connect)(null,{onVote:C.z,onRefresh:C.p})(In)],changes:[yn],default:[Cn]},xn=n(69),Pn=n.n(xn),Dn=n(505);function Mn(e){var t=e.isStarred,n=e.favorite,a=e.unfavorite,r=e.children;return E.a.createElement(Dn.a,{isLegacy:!0,hasTooltip:!0,context:"post",isStarred:t,onFavorite:n,onUnfavorite:a},r)}Mn.propTypes={isStarred:y.a.bool.isRequired,children:y.a.func};var An=Object(j.connect)(null,(function(e,t){return{favorite:function(){return Object(Se.b)("Favorite Feed Post",{postType:t.feedContext,pType:t.postTypeForTracking}),e(Object(C.l)(t.id))},unfavorite:function(){return Object(Se.b)("Unfavorite Feed Post",{postType:t.feedContext,pType:t.postTypeForTracking}),e(Object(C.n)(t.id))}}}))(Mn),Ln=n(138),Bn=n(254);function Un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var zn=function(e){u()(n,e);var t=Un(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.post,n=e.canFavorite,a=e.feedContext,r=e.subjectId,o=e.children,i=t.get("isFileNewVersion"),l=t.get("postType"),s=t.get("originalPost"),c=t.get("addressedTo"),u=t.get("postedOn"),d=t.get("createdSite"),p=t.get("authoredBy"),m=t.get("site"),f=t.get("createdAt"),h=t.get("url"),b=t.get("id"),g=t.get("isStarred"),y=t.getIn(["link","type"])?t.getIn(["link","type"]).toLowerCase():null,v=t.getIn(["link","site"]),O=t.getIn(["link","isFromPromoteModal"])||"timeline"===l,j=("link"===l||"timeline"===l)&&Mt.c.has(y),C=j&&m&&O,_=[];if(j)if(c)"person"===a&&r===c.get("id")||_.push(E.a.createElement("span",{key:"addressedTo"}," ",Object(M.a)("feed.post_statements.shared_from_content_detail.addressed_to_a_".concat(y),{name:c.get("name"),link:E.a.createElement("a",{href:c.get("url"),className:"type--title"})})));else if(m){var S="feed.post_statements.shared_from_content_detail.".concat("site"!==a?"site_":"","from_promote_model_to_a_").concat(y),N=O?S:"feed.post_statements.shared_from_content_detail.site_to_".concat(y);_.push(E.a.createElement("span",{key:"site"}," ",Object(M.a)(N,{link:m.get("isActive")?E.a.createElement("a",{href:m.get("url"),className:"type--title"}):E.a.createElement(E.a.Fragment,null),name:E.a.createElement(Ln.a,{name:m.get("name"),access:m.get("access")})}),!m.get("isActive")&&" (".concat(Object(M.a)("common.inactive"),")")))}else if("blog_post"===y){var k=O?"feed.post_statements.shared_from_content_detail.from_promote_model_to_a_".concat(y):"feed.post_statements.shared_from_content_detail.shared_content_label_to_".concat(y);_.push(E.a.createElement("span",{key:""}," ",Object(M.a)(k)))}else v&&_.push(E.a.createElement("span",{key:"site"}," ",Object(M.a)("feed.post_statements.shared_from_content_detail.follower_to_a_".concat(y),{link:v.get("isActivated")?E.a.createElement("a",{href:v.get("url"),className:"type--title"}):E.a.createElement(E.a.Fragment,null),name:E.a.createElement(Ln.a,{name:v.get("name"),access:v.get("access")})}),!v.get("isActivated")&&" (".concat(Object(M.a)("common.inactive"),")")));else s&&_.push(E.a.createElement("span",{key:"originalPost"}," ",Object(M.a)("feed.post_statements.original_post",{name:s.getIn(["authoredBy","name"]),authorLink:E.a.createElement("a",{href:s.getIn(["authoredBy","url"]),className:"type--title"}),postLink:E.a.createElement("a",{href:s.get("url"),className:"type--title"})}))),"site"!==a&&m&&_.push(E.a.createElement("span",{key:"site"}," ",Object(M.a)("feed.post_statements.site",{link:m.get("isActive")?E.a.createElement("a",{href:m.get("url"),className:"type--title"}):E.a.createElement(E.a.Fragment,null),name:E.a.createElement(Ln.a,{name:m.get("name"),access:m.get("access")})}),!m.get("isActive")&&" (".concat(Object(M.a)("common.inactive"),")"))),c&&("person"===a&&r===c.get("id")||_.push(E.a.createElement("span",{key:"addressedTo"}," ",Object(M.a)("feed.post_statements.addressed_to",{name:c.get("name"),link:E.a.createElement("a",{href:c.get("url"),className:"type--title"})})))),i&&_.push(E.a.createElement("span",{className:"statement",key:"fileNewVersion"}," ",Object(M.a)("feed.post_statements.added_a_new_version"))),"changes"===l&&_.push(E.a.createElement("span",{key:"changes"}," ",Object(M.a)("feed.post_statements.made_changes"))),"content"!==a&&u&&_.push(E.a.createElement("span",{key:"postedOn"}," ",Object(M.a)("feed.post_statements.postedOn",{title:u.get("title"),link:E.a.createElement("a",{href:u.get("url"),className:"type--title"})}))),d&&_.push(E.a.createElement("span",{key:"createdSite"}," ",Object(M.a)("feed.post_statements.createdSite",{link:d.get("isActive")?E.a.createElement("a",{href:d.get("url"),className:"type--title"}):E.a.createElement(E.a.Fragment,null),name:E.a.createElement(Ln.a,{name:d.get("name"),access:d.get("access")})}),!d.get("isActive")&&" (".concat(Object(M.a)("common.inactive"),")")));var w=K()({"Post-optionsContainer":!0,"Post-optionsContainer--hasFavorite":n}),F=K()({"Post-headerInner":!0,"Post-headerInner--hasFavorite":n}),R=C?E.a.createElement(Bn.a,{url:m.get("url"),img:m.get("imgThumbnail")||m.get("img"),imageSize:"64px",ariaLabel:p.get("name")}):E.a.createElement(Dt.a,{user:p}),I="";return I=C?"":p.get("url")?E.a.createElement("a",{href:p.get("url"),className:"type--title"},p.get("name")):E.a.createElement("span",{className:"name"},p.get("name")),E.a.createElement("div",{className:"Post-header"},E.a.createElement("div",{className:"Post-avatarContainer"},R),E.a.createElement("div",{className:F},E.a.createElement("div",null,I,_),E.a.createElement("div",{className:"Post-headerDate"},E.a.createElement(Rt.a,{input:f,type:At.g,url:"timeline"!==l?h:"",title:Object(M.a)("feed.view_on_own_page")})),o&&"timeline"!==l&&E.a.createElement("div",{className:w},o),n&&"timeline"!==l&&E.a.createElement("div",{className:"Post-favoriteContainer"},E.a.createElement(D.a.Consumer,null,(function(e){var t=e.postTypeForTracking;return E.a.createElement(An,{id:b,isStarred:g,feedContext:a,postTypeForTracking:t})})))))}}]),n}(O.b);zn.propTypes={post:Pn.a.map,feedContext:y.a.string,subjectId:y.a.string,canFavorite:y.a.bool,children:y.a.node};var Vn=zn,qn=function(e){var t=e.iconName,n=e.text,a=e.onClick,r=e.iconContainerClass,o=e.title,i=e.className,l=e.ariaLabel;return E.a.createElement("div",{className:"ActionBar-item theme--hover--fill ".concat(i),title:o},E.a.createElement("button",{type:"button",onClick:a},E.a.createElement("span",{className:"ActionBar-iconContainer ".concat(r)},E.a.createElement(L.a,{name:t,ariaLabel:l})),E.a.createElement("span",{className:"ActionBar-text type--title","aria-hidden":"true"},n)))};qn.defaultProps={text:y.a.string.isRequired},qn.defaultProps={className:"",iconContainerClass:"",title:""};var Wn=qn,Hn=Object(j.connect)(null,(function(e,t){var n=t.post,a=t.groupingId;return{toggleLike:function(t){var r=n.get("id"),o=t?null:n.get("likeId"),i=t;return e(Object(C.x)(r,a,o,i,"post"))}}}))((function(e){var t=e.post,n=e.toggleLike,a=e.feedContext,r=e.postTypeForTracking,o=Object(v.useState)(t.get("isLiked")),i=te()(o,2),l=i[0],s=i[1],c=t.get("likeCount"),u=K()({"Post-actionBarContainer":c>0});return E.a.createElement("div",{className:"Post-footer u-cf"},c>0&&E.a.createElement("div",{className:"Post-actionCounts"},E.a.createElement(xt.a,{isDotted:!0,hasNoBottom:!0},t.get("canLike")&&c>0&&E.a.createElement(Pt.a,null,E.a.createElement(Ut.a,{modal:E.a.createElement(Qt,{postId:t.get("id")})},(function(e){return E.a.createElement("button",{type:"button",className:"type--b4 type--secondary",onClick:e},Object(M.a)("feed.number_of_likesWithCount",{count:c}))}))))),E.a.createElement("div",{className:u},E.a.createElement("div",{className:"ActionBar ActionBar--small ActionBar--noBorder u-textLeft"},E.a.createElement(Wn,{iconName:"".concat(l?"like-filled":"like"),text:Object(M.a)("common.like"),onClick:function(){Object(Se.b)("".concat(l?"Unlike Comment":"Like Comment"),{postType:a,pType:r}),s(!l),n(!l)},iconContainerClass:l?"theme--fill":"",ariaLabel:"".concat(l?Object(M.a)("feed.post_not_liked_label"):Object(M.a)("feed.post_liked_label"))}),E.a.createElement("a",{href:t.get("url")},E.a.createElement(Wn,{iconName:"comments",key:"comments",text:Object(M.a)("common.reply")})))))})),Gn=n(53),Zn=n(89),Yn=function(e){var t=e.replyDetails,n=e.replyTotal,a=e.post,r=t.last().get("authoredBy"),o=n;return E.a.createElement(Gn.a,{to:Object(Zn.o)(a),className:"type--fauxLink--noStyle"},E.a.createElement("div",{className:"Post-body--commentReply"},E.a.createElement("div",{className:"Post-body--commentReply-author"},E.a.createElement(Dt.a,{user:r,className:"Post-body--commentReply-avatar"}),E.a.createElement("a",{className:"type--title u-marg-l--small u-marg-r--small",href:r.get("url")},r.get("name"))),E.a.createElement(Tt.a,{html:t.last().get("body"),className:"Post-body--comentReply-body Content--small u-marg-r--xxxlarge is-ellipsis make-inline"}),E.a.createElement("span",{className:"Post-body--commentReply-count type--b3 type--secondary"},o," ",Object(M.a)(o>1?"common.reply_plural":"common.reply"))))},Jn={1:[{width:1,height:1,perRow:3}],2:[{width:1,height:1,perRow:3},{width:1,height:1,perRow:3}],3:[{width:1,height:1,perRow:3},{width:1,height:1,perRow:3},{width:1,height:1,perRow:3}]},Qn=Object(j.connect)((function(e,t){var n=t.post;return{post:Object(T.g)(e,n)}}))((function(e){var t=e.post,n=e.groupingId,a=e.feedContext,r=(Tn[t.get("type")]||Tn.default).map((function(e){return E.a.createElement(e,{post:t,key:t.get("id")})})),o=t.get("recentCommentsTotal");return E.a.createElement("div",{className:"Post-body--comment"},E.a.createElement(Vn,{post:t,feedContext:I.a.content}),r,t.get("files").size>0&&E.a.createElement("div",{className:"u-marg-b--small"},E.a.createElement(bt.a,{imageRatios:Jn,isNotFullWidth:!1,files:t.get("files"),enableLightbox:!0,enableDownload:!0,isPreviewing:!0,isEditing:!1})),"link"!==t.get("postType")&&E.a.createElement("div",{className:"u-marg-b--small"},E.a.createElement(ht,{body:t.get("body"),isMobileViewport:!1})),E.a.createElement(D.a.Consumer,null,(function(e){var r=e.postTypeForTracking;return E.a.createElement(Hn,{post:t,groupingId:n,feedContext:a,postTypeForTracking:r})})),o>0&&E.a.createElement(Yn,{replyDetails:t.get("replies"),replyTotal:o,post:t}))})),Kn=n(3447),$n=n.n(Kn),Xn=function(e){var t,n=e.groupedPosts,a=e.preview,r=e.feedContext,o=$n()(n.toJS(),(function(e){return e.authoredBy.sfUserId})),i=a.get("type"),l="site"!==r&&a.getIn(["site","siteId"]);t=o.length>1?l?"feed.post.grouped.multiple_people_commented_on_a_".concat(i,"_in_site"):"feed.post.grouped.multiple_people_commented_on_a_".concat(i):l?"feed.post.grouped.commented_on_a_".concat(i,"_in_site"):"feed.post.grouped.commented_on_a_".concat(i);var s=o[o.length-1].authoredBy,c=E.a.createElement(Gn.a,{to:Object(Zn.m)(s.sfUserId),className:"type--title"},s.name),u=o.slice(0,-1).map((function(e,t){var n=e.authoredBy;return E.a.createElement(v.Fragment,{key:n.sfUserId},t>0&&", ",E.a.createElement(Gn.a,{to:Object(Zn.m)(n.sfUserId),className:"type--title"},n.name))}));return E.a.createElement("div",{className:"PostHeader--grouped"},E.a.createElement("p",null,Object(M.a)(t,{user:c,users:u,siteName:E.a.createElement(Gn.a,{to:Object(Zn.q)(a.getIn(["site","siteId"])),className:"type--title"},E.a.createElement(Ln.a,{name:a.getIn(["site","name"]),access:a.getIn(["site","access"])}))})))},ea=function(e){var t=e.groupedPosts,n=e.groupingId,a=e.preview,r=e.feedContext;return E.a.createElement("div",{className:"Post"},E.a.createElement("div",{className:"Post-body Post-body--grouped-or-timeline u-marg-b--none"},E.a.createElement(Xn,{groupedPosts:t,preview:a,feedContext:r}),E.a.createElement(un.a,{showSite:!1,isGrouped:!0,post:new fe.a.Map({link:a}),showExplicitMustRead:!1,feedContext:r}),E.a.createElement("div",{className:"Post-body--grouped-allComments"},E.a.createElement("a",{href:a.get("url")},Object(M.a)("feed.post.grouped.all_comments"))),t.map((function(e){return E.a.createElement(Qn,{post:e,key:e.get("id"),groupingId:n,feedContext:r})})).toArray()))},ta=n(62),na=n(67),aa=n(73),ra=n(2720),oa=function(e){var t=e.previews,n=e.feedContext,a=e.feedFilter,r=Object(v.useState)(!1),o=te()(r,2),i=o[0],l=o[1],s=Object(ta.b)().getState(),c=Object(_e.c)(s),u=K()({"Tile-Body":!0,showAllItems:i}),d=K()({"Tile-Box":!0,"Tile-Box-maxHeight--xsmall":t.size<=8}),p=E.a.createElement("div",{className:"List-show-more"},E.a.createElement("button",{type:"button",className:"u-textCenter type--500",onClick:function(){return e=i?na.Z:na.ab,Object(aa.b)(e),void l(!i);var e}},i?E.a.createElement(E.a.Fragment,null,E.a.createElement(L.a,{name:"show-less-arrow",sourceSize:"10"})," ",Object(M.a)("feed.combined_timeline.button.show_less")):E.a.createElement(E.a.Fragment,null,E.a.createElement(L.a,{name:"show-more-arrow",sourceSize:"13"})," ",Object(M.a)("feed.combined_timeline.button.show_more"))));return E.a.createElement(ra.a,{header:a===I.b.NEWS?Object(M.a)("feed.post.combined_timeline.title.recently_published_post_i_follow"):Object(M.a)("feed.post.combined_timeline.title.recently_published"),additionalClasses:["Content-two-col"]},E.a.createElement("div",{className:u},E.a.createElement("ul",{className:d},t.map((function(e,t){var a=Object(Zn.c)("site"===n?"site_feed":"home_feed",{term:"site"===n?"combined_timeline_content_in_site":"combined_timeline_content",content:e.get("id")});return E.a.createElement(E.a.Fragment,{key:e.get("id")},E.a.createElement(Ft.a,{content:e,utmParams:a,hideMeta:"event"===e.get("type"),hideExcerpt:"event"!==e.get("type"),isSingleLineTitle:!1,hasSiteImageFallback:!0,size:"small"}),(c||t%2==1)&&E.a.createElement("li",{className:"line"}))})))),t.size>8&&p)};function ia(e){var t=e.isLiked,n=e.like,a=e.unlike,r=e.id,o=e.children;return E.a.createElement(zt.a,{isLegacy:!0,hasTooltip:!0,context:"post",isLiked:t,onLike:n,onUnlike:a,id:r},o)}function la(e,t){"content"===t?Object(Se.b)("Like Reply",{postType:e}):Object(Se.b)("Like Feed Post")}ia.propTypes={id:y.a.string.isRequired,isLiked:y.a.bool.isRequired,children:y.a.func};var sa=Object(j.connect)(null,(function(e,t){return{like:function(){return la(t.feedContext,t.postType),e(Object(C.m)(t.id))},unlike:function(){return la(),e(Object(C.o)(t.id))}}}))(ia),ca=n(929);function ua(e){var t=e.post,n=e.feedContext,a=e.subjectId,r=e.site,o=e.onShare;return E.a.createElement(ca.a,{name:Gt.bb,id:t.get("id"),type:r&&r.get("isPrivate")?"record":"news",subjectId:r&&r.get("isPrivate")?r.get("chatterGroupId"):"me",typeLabel:Object(M.a)("common.post"),url:t.get("url"),onShare:o,hasSmallAvatar:!0},E.a.createElement(Ea,{isInModal:!0,post:t,feedContext:n,subjectId:a,canReply:!1,showReplies:!1,showOptions:!1,isPreviewing:!0,hasFavoriteButton:!1}))}ua.propTypes={post:y.a.instanceOf(fe.a.Map).isRequired};var da=Object(j.connect)((function(e){return{feedContext:Object(T.a)(e),subjectId:Object(T.e)(e),site:Object(P.l)(e,Object(T.d)(e))}}),(function(e,t){return{onShare:function(n){var a=n.set("body",Object(D.b)(n.get("body")));return Object(D.c)(a.get("body"))>Ce.k?e(Object(ve.f)(Object(M.a)("feed.create.too_many_mentions"))):e(Object(C.t)(t.post.get("id"),a.merge({feedOnPageType:a.get("type"),feedOnPageSubjectId:a.get("subjectId")})))}}}))(ua);function pa(e){var t=e.post,n=e.canReply,a=e.replyFormRef,r=e.feedContext,o=[],i=function(){a.current&&a.current.replaceForm()};if(t.get("canLike")&&o.push(E.a.createElement(sa,{id:t.get("id"),isLiked:t.get("isLiked"),key:"like",feedContext:r,postType:t.get("postType")},(function(e,t){return E.a.createElement(Wn,{iconName:"".concat(e?"like-filled":"like"),text:Object(M.a)("common.like"),onClick:t,iconContainerClass:e?"theme--fill":"",ariaLabel:"".concat(e?Object(M.a)("feed.post_not_liked_label"):Object(M.a)("feed.post_liked_label"))})}))),n&&o.push(E.a.createElement(Wn,{iconName:"comments",key:"comments",text:Object(M.a)("common.reply"),onClick:i})),t.get("canShare")&&o.push(E.a.createElement(Ut.a,{modal:E.a.createElement(da,{post:t}),key:"share"},(function(e){return E.a.createElement(Wn,{iconName:"share",text:Object(M.a)("common.share"),onClick:e,title:Object(M.a)("common.share_this_noun",{noun:Object(M.a)("common.post")}),className:"u-floatRight"})}))),0===o.length)return!1;var l=t.get("replyCount"),s=t.get("likeCount"),c=K()({"Post-actionBarContainer":s>0||l>0});return E.a.createElement("div",{className:"Post-footer u-cf"},(l>0||s>0)&&E.a.createElement("div",{className:"Post-actionCounts"},E.a.createElement(xt.a,{isDotted:!0,hasNoBottom:!0},t.get("canLike")&&s>0&&E.a.createElement(Pt.a,null,E.a.createElement(Ut.a,{modal:E.a.createElement(Qt,{postId:t.get("id")})},(function(e){return E.a.createElement("button",{type:"button",className:"type--b4 type--secondary",onClick:e},Object(M.a)("feed.number_of_likesWithCount",{count:s}))}))),l>0&&E.a.createElement(Pt.a,null,n?E.a.createElement("button",{type:"button",className:"type--b4 type--secondary",onClick:i},Object(M.a)("feed.number_of_repliesWithCount",{count:l})):E.a.createElement("span",{className:"type--b4 type--secondary"},Object(M.a)("feed.number_of_repliesWithCount",{count:l}))))),E.a.createElement("div",{className:c},E.a.createElement("div",{className:"ActionBar ActionBar--small ActionBar--noBorder u-textLeft"},o)))}pa.propTypes={post:y.a.instanceOf(fe.a.Map).isRequired,replyFormRef:y.a.shape({current:y.a.object}).isRequired,canReply:y.a.bool.isRequired,feedContext:y.a.string.isRequired};var ma=pa,fa=n(1167);function ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var ba=function(e){u()(n,e);var t=ha(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),b()(s()(e),"deletePost",(function(){var t=e.props,n=t.post;(0,t.deletePost)(n.get("id"))})),b()(s()(e),"showSuccessMessage",(function(){(0,e.props.success)(Object(M.a)("feed.post.copy_link.success_flash"))})),e}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.post,n=e.onEdit,a=e.isTouchDevice,r=e.postUrl,o=t.get("canEdit"),i=t.get("canDelete");return o||i||!a?E.a.createElement(Xt.a,{icon:"more",hasLegacyIcon:!1,hasArrow:!0,isTile:!0},o&&E.a.createElement(en.a,{label:Object(M.a)("common.edit"),title:Object(M.a)("feed.post_options.edit"),onSelect:n,key:"edit"}),i&&E.a.createElement(Ut.a,{key:"delete",modal:E.a.createElement(tn.a,{name:Gt.Z,id:t.get("id"),title:Object(M.a)("feed.post_options.delete"),buttonText:Object(M.a)("common.delete"),onConfirm:this.deletePost},E.a.createElement("p",null,Object(M.a)("feed.post_options.delete_warning")),E.a.createElement("strong",{className:"type--500"},Object(M.a)("common.cannot_be_undone")))},(function(e){return E.a.createElement(en.a,{label:Object(M.a)("common.delete"),title:Object(M.a)("feed.post_options.delete"),onSelect:e})})),!a&&E.a.createElement(fa.a,{text:r,onAfterCopy:this.showSuccessMessage},E.a.createElement(en.a,{label:Object(M.a)("feed.post.copy_link.label"),title:Object(M.a)("feed.post.copy_link.title")}))):null}}]),n}(O.b);b()(ba,"propTypes",{post:y.a.instanceOf(fe.a.Map).isRequired,onEdit:y.a.func.isRequired});var ga=Object(j.connect)((function(e,t){var n=t.post;return{isTouchDevice:e.getIn(["viewMode","isTouchDevice"],!1),postUrl:Object(x.y)(e,"/feed/".concat(n.get("id")))}}),{success:ve.j,deletePost:C.c})(ba);function ya(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var va=function(e){u()(n,e);var t=ya(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),b()(s()(e),"state",{isEditing:!1}),b()(s()(e),"replyFormRef",E.a.createRef()),b()(s()(e),"openEdit",(function(){e.state.isEditing||e.setState({isEditing:!0})})),b()(s()(e),"closeEdit",(function(){e.state.isEditing&&e.setState({isEditing:!1})})),b()(s()(e),"legacyBind",(function(t){t&&(e.hasBound||(Ke.a.bind(window.$(t)),e.hasBound=!0))})),b()(s()(e),"renderFiles",(function(t,n){var a=t.postFiles,r=t.isInModal,o=t.showOptions,i=t.isPreviewing,l=t.width;if(!a.size)return null;var s=a.first();return 1===a.size&&s.get("isVideo")?e.renderVideoFile(s):E.a.createElement("div",{className:"u-marg-b--small"},E.a.createElement(bt.a,{isNotFullWidth:r,files:a.map((function(e){return e.set("result",e)})),enableLightbox:o,enableDownload:o,isPreviewing:i,isEditing:n,width:l}))})),b()(s()(e),"renderInner",(function(){var t=e.props,n=t.post,a=t.postFiles,r=t.feedContext,o=t.subjectId,i=t.canReply,l=t.showReplies,s=t.showOptions,c=t.isTouchDevice,u=t.isMobileViewport,d=t.isInModal,p=t.feedFilter,m=e.state.isEditing,f="timeline"===n.get("postType");if("content"===n.get("postType"))return E.a.createElement(ea,{showOptions:s,groupedPosts:n.get("groupedPosts"),groupingId:n.get("groupingId"),preview:n.get("preview"),feedContext:r});if("groupedtimelines"===n.get("postType"))return E.a.createElement(oa,{previews:n.get("groupedTimelinePreviews"),feedContext:r,feedFilter:p});var h=K()({Post:!0,"Post--plain":d}),b=K()({"Post-body":!0,"u-marg-b--none":f,"Post-body--grouped-or-timeline":f}),g=c?_t:kt,y=!!e.props.hasFavoriteButton&&n.get("canFavorite");return E.a.createElement("div",{className:h,ref:e.legacyBind},E.a.createElement("div",{className:b},E.a.createElement(Vn,pe()({},n.toObject(),{post:n,canFavorite:y,feedContext:r,subjectId:o}),s&&E.a.createElement(ga,{post:n,onEdit:e.openEdit})),m?E.a.createElement(gt.a,{id:n.get("id"),body:n.get("body"),postType:n.get("postType"),listOfFiles:a,onCancel:e.closeEdit}):(Tn[n.get("postType")]||Tn.default).map((function(e){return E.a.createElement(e,{post:n,key:e.name+n.get("id"),feedContext:r})})),e.renderFiles(e.props,m),"link"!==n.get("postType")&&E.a.createElement(ht,{body:n.get("body"),isMobileViewport:u})),s&&!f&&E.a.createElement(ma,{post:n,canReply:i,replyFormRef:e.replyFormRef,feedContext:r}),!f&&E.a.createElement("div",{className:"Replies u-hideIfEmpty u-collapsingMarginHack"},l&&E.a.createElement(cn,{post:n,replies:n.get("replies"),loading:n.get("repliesLoading"),total:n.get("replyCount"),feedContext:r}),i&&n.getIn(["site","isActive"],!0)&&E.a.createElement("div",{className:"Replies-formContainer"},E.a.createElement(D.a.Consumer,null,(function(t){var a=t.postTypeForTracking;return E.a.createElement(g,{postId:n.get("id"),canUploadAllFileTypes:n.get("canUploadAllFileTypes"),ref:c?void 0:e.replyFormRef,feedContext:r,postTypeForTracking:a})})))))})),e}return i()(n,[{key:"renderVideoFile",value:function(e){return e.get("isAccessible")?E.a.createElement(nt,{file:e}):E.a.createElement(It.a,{isSingle:!0})}},{key:"render",value:function(){var e,t,n;return E.a.createElement(D.a.Provider,{value:{postTypeForTracking:null!==(e=this.props)&&void 0!==e&&null!==(t=e.post)&&void 0!==t&&t.get("site")||null!==(n=this.props)&&void 0!==n&&n.post.getIn(["link","site"])?"siteFeedPost":"homeFeedPost"}},this.renderInner())}}]),n}(O.b);b()(va,"propTypes",{post:y.a.instanceOf(fe.a.Map).isRequired,postFiles:y.a.shape([]),feedContext:y.a.string,subjectId:y.a.string,canReply:y.a.bool,showReplies:y.a.bool,showOptions:y.a.bool,isPreviewing:y.a.bool,isInModal:y.a.bool,hasFavoriteButton:y.a.bool}),b()(va,"defaultProps",{canReply:!0,showReplies:!0,showOptions:!0,isPreviewing:!1,isInModal:!1,hasFavoriteButton:!0});var Ea=Object(j.connect)((function(e,t){var n=t.post;return{isTouchDevice:Object(_e.d)(e),isMobileViewport:Object(_e.c)(e),postFiles:Object(yt.e)(e,n.get("files").map((function(e){return e.get("id")})))}}))(va),Oa=n(3448),ja=n(3450);function Ca(e){var t=e.onClick;return E.a.createElement("div",{className:"u-textCenter u-marg-b--medium u-marg-t--small"},E.a.createElement(Ee.a,{appearance:"rounded",label:Object(M.a)("feed.view_new_post"),onClick:function(e){e.preventDefault(),t()}}))}Ca.propTypes={onClick:y.a.func.isRequired};var _a=Ca;function Sa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var Na=function(e){u()(n,e);var t=Sa(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),b()(s()(e),"state",{loaderPosition:""}),b()(s()(e),"handleReload",(function(t){e.setState({loaderPosition:"top"}),e.props.onReload(t)})),b()(s()(e),"handlePaginate",(function(t){var n=e.props.feedFilter===I.b.NEWS?"Posts I Follow":"Homepage Feed Viewed";Object(Se.b)(n),e.setState({loaderPosition:"bottom"}),e.props.onLoadMore(t)})),e}return i()(n,[{key:"componentDidUpdate",value:function(e){e.loading&&!this.props.loading&&this.setState({loaderPosition:""})}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.posts,a=e.feedContext,r=e.subjectId,o=e.canReply,i=e.canPaginate,l=e.outdated,s=e.width,c=e.isSearching,u=e.showNoResultsMessage,d=e.feedFilter,p=e.site,m=e.isfeedNotInSearchMode,f=this.state.loaderPosition;if(0===n.size&&!t&&(c||u))return E.a.createElement(k.a,null);var h="top"===f||!f&&t,b="bottom"===f,g=E.a.createElement(Oa.a,{feedContext:a,feedFilter:d,key:"peoplePost"}),y=E.a.createElement(ja.a,{site:p,feedContext:a,feedFilter:d,key:"upcomingEvents"}),v=n.map((function(e){return E.a.createElement(Ea,{post:e,feedContext:a,feedFilter:d,subjectId:r,canReply:o,key:e.get("groupingId"),width:s})})).toArray();return m&&Object(D.g)(a)&&(v.splice(6,0,y),v.splice(12,0,g)),E.a.createElement("div",null,l&&E.a.createElement(_a,{onClick:this.handleReload}),E.a.createElement("div",{className:"Feed-list"},h&&E.a.createElement(Qe,null),v,b&&E.a.createElement(Qe,null)),E.a.createElement(Ye.a,{canLoad:i,isLoading:t,onLoad:this.handlePaginate}))}}]),n}(O.b);Na.propTypes={loading:y.a.bool,posts:y.a.instanceOf(fe.a.Iterable),feedContext:y.a.string,feedFilter:y.a.string,subjectId:y.a.string,isSearching:y.a.bool.isRequired,canReply:y.a.bool,canPaginate:y.a.bool,onLoadMore:y.a.func.isRequired,outdated:y.a.bool,showNoResultsMessage:y.a.bool,onReload:y.a.func.isRequired};var ka=Na;function wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var Fa=function(e){u()(n,e);var t=wa(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),b()(s()(e),"width",0),b()(s()(e),"init",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.props,a=n.init,r=n.type,o=n.subjectId,i=n.subjectName,l=n.feedContext,s=n.siteId,c=n.sort,u=n.term,d=n.postId,p=n.keepPosts,m=n.siteTransport,f=n.loadSite;a({type:r,subjectId:o,subjectName:i,feedContext:l,siteId:s,sort:c,term:u,postId:d,keepPosts:t||p}),!s||m&&(m.get("loading")||m.get("loaded"))||f(s)})),b()(s()(e),"reload",(function(){return e.init(!0)})),e}return i()(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e){this.props.type===e.type&&this.props.subjectId===e.subjectId&&this.props.subjectName===e.subjectName&&this.props.feedContext===e.feedContext&&this.props.siteId===e.siteId&&this.props.postId===e.postId||this.init()}},{key:"componentWillUnmount",value:function(){this.props.stopPoller(),this.props.destroyOnUnmount&&this.props.destroy()}},{key:"render",value:function(){var e=this,t=this.props,n=t.feed,a=t.feedContext,r=t.type,o=t.siteId,i=t.subjectId,l=t.subjectName,s=t.canMention,c=t.chatterGroupId,u=t.postPlaceholder,d=t.cannotPostMessage,p=t.canPost,m=t.canReply,f=t.enableTopics,h=t.showOptions,b=t.onLoadMore,g=t.onSearchSubmit,y=t.onSortChange,v=t.onFilterChange,O=t.siteTransport,j=t.popularSiteId,C=t.lazyMount,_=t.showNoResultsMessage,R=t.postId,T=t.feedMode,x=t.isfeedNotInSearchMode,P=t.isNativeVideoEnabled,A=t.feedPostformType,L=n.get("filter"),B=!(o&&o!==j||"content"===a||"topic"===a||R),U=T===I.d.TIMELINE_COMMENT_POST||T===I.d.TIMELINE_COMMENT&&"content"===a,z=E.a.createElement("div",{className:"Feed-inner u-posRelative z-index--1",ref:function(t){e.width=t?t.offsetWidth:e.width}},Object(D.g)(a)&&E.a.createElement(Y.a,{site:O,feedContext:a}),p&&U?E.a.createElement(Ze,{feedPostformType:A,feedContext:a,placeholder:u,type:r,subjectId:i,subjectName:l,canMention:s,canUploadAllFileTypes:O&&O.getIn(["result","canUploadAllFileTypes"],!1),chatterGroupId:c,enableTopics:f,canChangeShareOptions:n.get("canFilter"),width:this.width,isUnlistedSite:O&&"unlisted"===O.getIn(["result","access"])}):d&&E.a.createElement("div",{className:"u-marg-b--medium"},E.a.createElement(k.a,{message:d})),h&&T!==I.d.TIMELINE&&E.a.createElement("div",null,E.a.createElement(Z,{term:n.get("term"),filter:L,sort:n.get("sort"),canFilter:n.get("canFilter"),onSearchSubmit:g,onSortChange:y,onFilterChange:v,feedMode:T})),Object(D.g)(a)&&E.a.createElement(J.a,{site:O,feedContext:a}),E.a.createElement(ka,{loading:n.get("loading"),loaded:n.get("loaded"),posts:n.get("posts"),feedContext:a,feedFilter:L,subjectId:i,isSearching:void 0!==n.get("term"),canReply:m,canPaginate:!!n.get("nextPageToken"),onLoadMore:b,outdated:n.get("outdated"),onReload:this.reload,width:this.width,showNoResultsMessage:_,site:O,isfeedNotInSearchMode:x}));if(C){var V=E.a.createElement("div",{className:"u-pad-b--xsmall u-marg-b--medium"},E.a.createElement(F.a,null));z=E.a.createElement(N.a,{placeholder:V,offset:0},z)}return E.a.createElement(S.a,{renderOnError:function(){return E.a.createElement(k.a,null,Object(M.a)("feed.failed_load"))}},E.a.createElement("div",{className:"u-posRelative z-index--1"},B&&E.a.createElement(w.a,{name:o?"siteFeed":"feed"}),E.a.createElement(D.e.Provider,{value:{isNativeVideoEnabled:P}},z)))}}]),n}(O.b);b()(Fa,"propTypes",{type:y.a.string,subjectId:y.a.string,subjectName:y.a.string,chatterGroupId:y.a.string,feedContext:y.a.string,term:y.a.string,siteId:y.a.string,postId:y.a.string,sort:y.a.string,cannotPostMessage:y.a.string,canPost:y.a.bool,canReply:y.a.bool,enableTopics:y.a.bool,showOptions:y.a.bool,popularSiteId:y.a.string,lazyMount:y.a.bool,showNoResultsMessage:y.a.bool,destroyOnUnmount:y.a.bool,feedPostformType:y.a.string}),b()(Fa,"defaultProps",{canPost:!0,canReply:!0,enableTopics:!0,showOptions:!0,subjectName:null,lazyMount:!1,showNoResultsMessage:!1,destroyOnUnmount:!0});t.default=Object(j.connect)((function(e,t){var n=Object(T.f)(e);if("favorites"===t.type){var a=n.get("posts").filter((function(e){return e.get("isFavorited")}));n=n.set("posts",a)}return{feed:n,siteTransport:t.siteId?Object(P.n)(e,t.siteId):null,popularSiteId:Object(x.v)(e,"popularSiteId"),postPlaceholder:Object(x.j)(e),feedMode:Object(x.i)(e),isfeedNotInSearchMode:!Object(T.c)(e),isNativeVideoEnabled:Object(x.C)(e,R.e)}}),(function(e){return{init:function(t){return e(Object(C.i)(t)).then((function(){return!t.postId&&e(Object(C.v)())}))},loadSite:function(t){return e(Object(_.load)(t))},stopPoller:function(){return e(Object(C.w)())},onLoadMore:function(){return e(Object(C.j)(!1))},onSearchSubmit:function(t){return e(Object(C.s)(t))},onSortChange:function(t){return e(Object(C.u)(t))},onFilterChange:function(t){return e(Object(C.h)(t))},destroy:function(){return e(Object(C.e)())}}}),null,{forwardRef:!0})(Fa)},2582:function(e,t,n){e.exports={definitionList:"DefinitionList-module-definitionList___3BZ_6",title:"DefinitionList-module-title___2Pqwr",content:"DefinitionList-module-content___3au59",seperator:"DefinitionList-module-seperator___5WWW5","seperator--dashed":"DefinitionList-module-seperator--dashed___23ZZb",split:"DefinitionList-module-split___3wNvj",squashed:"DefinitionList-module-squashed___1ksg3",stacked:"DefinitionList-module-stacked___3amYU",lined:"DefinitionList-module-lined____K3g9",item:"DefinitionList-module-item___2-bQd",stackedBorder:"DefinitionList-module-stackedBorder___2w8TJ"}},2583:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var a=n(10),r=n.n(a),o=n(11),i=n.n(o),l=n(12),s=n.n(l),c=n(13),u=n.n(c),d=n(8),p=n.n(d),m=n(5),f=n.n(m),h=n(15),b=n.n(h),g=n(1),y=n.n(g),v=n(0),E=n.n(v),O=n(1004),j=n(2582),C=n.n(j);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var S=function(e){s()(n,e);var t=_(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e,t=this.props,n=t.title,a=t.children,r=t.isBlock,o=t.isHtml,i=t.whiteSpaceNormal,l=b()((e={},f()(e,C.a.item,!0),f()(e,"u-whiteSpaceNormal",i),e));if(!a)return null;var s=o&&"string"==typeof a?E.a.createElement("dd",{className:C.a.content,dangerouslySetInnerHTML:{__html:Object(O.a)(a)}}):E.a.createElement("dd",{className:C.a.content},a),c=E.a.createElement(E.a.Fragment,null,E.a.createElement("dt",{className:C.a.title},n),s);return r?E.a.createElement("div",{className:l},c):c}}]),n}(E.a.PureComponent);f()(S,"propTypes",{title:y.a.node.isRequired,children:y.a.node,isBlock:y.a.bool,isHtml:y.a.bool,whiteSpaceNormal:y.a.bool}),f()(S,"defaultProps",{whiteSpaceNormal:y.a.bool})},2593:function(e,t,n){"use strict";var a=n(5),r=n.n(a),o=n(15),i=n.n(o),l=n(1),s=n.n(l),c=n(0),u=n.n(c),d=n(2582),p=n.n(d);function m(e){var t,n=e.children,a=e.layout,o=u.a.Children.toArray(n).filter((function(e){return!!e}));if(0===o.length)return!1;var l=i()((t={},r()(t,p.a.definitionList,!0),r()(t,p.a[a],a),t));return u.a.createElement("dl",{className:l},o)}m.propTypes={children:s.a.node.isRequired,layout:s.a.oneOf(["stacked","squashed","lined","stackedBorder"])},m.defaultProps={layout:null},t.a=m},2650:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(18),i=n(2583),l=n(66),s=n(209),c=n(17),u=n(32),d=n(3);t.a=function(e){var t=e.name,n=e.values,a=Object(s.h)("peopleCustomFieldSingular"),p=Object(o.useSelector)(c.e),m="hireDate"===t&&n[0]?Object(d.a)("hireDateAfter"===n[0].id?"common.date_on_or_after":"common.date_on_or_before",{date:Object(u.e)(n[0].name,l.b)}):n.map((function(e){return e.name})).join(", "),f="category"===t&&a;if(!f){var h=p(t);f=h&&h.singular}return f||(f="hireDate"===t?Object(d.a)("profile_fields.hire_date"):Object(d.a)("profile_fields.".concat(t))),r.a.createElement("div",{key:f,className:"u-whiteSpaceNormal"},r.a.createElement(i.a,{title:"".concat(f,":"),whiteSpaceNormal:!0},m))}},2652:function(e,t,n){"use strict";var a=n(15),r=n.n(a),o=n(1),i=n.n(o),l=n(0),s=n.n(l),c=n(1027),u={pageDots:!1,setGallerySize:!0,wrapAround:!1,cellAlign:"left",contain:!0,groupCells:!0};function d(e){var t=e.children,n=e.isFlush,a=e.columnWidth,o=s.a.Children.toArray(t).map((function(e){return s.a.createElement("div",{className:"TileSlider-item",key:e.key},e)}));if(0===o.length)return null;var i=o.length<3?o:s.a.createElement(c.a,{options:u},o),l=r()({TileSlider:!0,"TileSlider--flush":n,"TileSlider--flushNarrow":"narrow"===a,"TileSlider--2":2===o.length,"TileSlider--3plus":o.length>2});return s.a.createElement("div",{className:l},i)}d.propTypes={children:i.a.node,isFlush:i.a.bool},d.defaultProps={isFlush:!1},t.a=d},2665:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(0),i=n.n(o),l=n(18),s=n(53),c=n(2650),u=n(2593),d=n(2583),p=n(56),m=n(17),f=n(42),h=n(3),b=n(89);function g(e){var t=e.segment,n=e.audience,a=e.showAudienceCount,r=e.showMandatory,l=e.isSegmentsEnabled,p=e.showSegment&&l;return"everyone"===e.recipient?i.a.createElement("strong",null,Object(h.a)("common.everyone_in_org")):i.a.createElement(u.a,{layout:"squashed"},r&&i.a.createElement("div",{className:"u-marg-b--small"},i.a.createElement(d.a,{title:Object(h.a)("common.subscription")},Object(h.a)("field.mandatory.label"))),p&&i.a.createElement("div",null,i.a.createElement(d.a,{title:"".concat(Object(h.a)("common.segment"),":")},t?t.name:Object(h.a)("all_segments.label"))),n&&n.isDeleted?i.a.createElement("div",{className:"type--note type--b2 type--500"},Object(h.a)("common.deleted_audience")):n&&"conditions"===n.type&&n.listOfConditions.map((function(e){var t=e.name,n=e.values;return i.a.createElement(c.a,{key:t,name:t,values:n})}))||n&&"people"===n.type&&i.a.createElement(d.a,{title:"".concat(Object(h.a)("common.person_plural"),":"),isBlock:!0},n.listOfPeople.map((function(e,t){var n=e.peopleId,a=e.name;return i.a.createElement(o.Fragment,{key:n},t>0&&", ",i.a.createElement(s.a,{to:Object(b.l)(n),className:"u-textInheritColor"},a))}))),a&&i.a.createElement("div",{className:"u-marg-t--small"},i.a.createElement(d.a,{title:Object(h.a)("common.user_plural")},Object(f.c)(n.get("audienceCount")))))}g.propTypes={segment:p.a.segmentLite,audience:p.a.audience.isRequired,showAudienceCount:r.a.bool,showMandatory:r.a.bool,showSegment:r.a.bool,isSegmentsEnabled:r.a.bool},g.defaultProps={showAudienceCount:!1,showMandatory:!1,isSegmentsEnabled:!1,showSegment:!0},t.a=Object(l.connect)((function(e){return{customFieldLabel:Object(m.v)(e,"peopleCustomFieldSingular"),isSegmentsEnabled:Object(m.V)(e)}}))(g)},2686:function(e,t,n){"use strict";var a=n(15),r=n.n(a),o=n(1),i=n.n(o),l=n(0),s=n.n(l),c=n(21);n(3);function u(e){var t=e.children,n=e.onClick,a=e.hasButton,o=e.ariaLabel,i=r()({RemovableField:a});return s.a.createElement("div",{className:i},t,a&&s.a.createElement("button",{className:"RemovableField-button",type:"button",onClick:n,"aria-label":o},s.a.createElement(c.a,{name:"circle-close",sourceSize:"24"})))}u.propTypes={children:i.a.node.isRequired,onClick:i.a.func,hasButton:i.a.bool,ariaLabel:i.a.string},u.defaultProps={hasButton:!0},t.a=u},2691:function(e,t,n){"use strict";var a=n(10),r=n.n(a),o=n(11),i=n.n(o),l=n(7),s=n.n(l),c=n(12),u=n.n(c),d=n(13),p=n.n(d),m=n(8),f=n.n(m),h=n(5),b=n.n(h),g=n(1),y=n.n(g),v=n(0),E=n.n(v),O=n(520),j=n.n(O),C=n(1004);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var S=function(e){u()(n,e);var t=_(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),b()(s()(e),"el",null),b()(s()(e),"setRef",(function(t){var n=e.props,a=n.limit,r=n.split;t?window.$(t).limitWords({limit:a,split:r}):window.$(e.el).limitWords("destroy"),e.el=t})),e}return i()(n,[{key:"shouldComponentUpdate",value:function(e){return this.props.html!==e.html||this.props.className!==e.className||this.props.limit!==e.limit||this.props.split!==e.split}},{key:"render",value:function(){var e=this.props,t=e.html,n=e.className;return E.a.createElement("div",{className:n,dangerouslySetInnerHTML:{__html:Object(C.a)(j()(t))},ref:this.setRef})}}]),n}(E.a.Component);S.propTypes={html:y.a.string.isRequired,className:y.a.string,limit:y.a.number,split:y.a.number},S.defaultProps={limit:70,split:60},t.a=S},2692:function(e,t,n){"use strict";var a=n(16),r=n.n(a),o=n(71),i=n.n(o),l=n(4),s=n.n(l),c=n(1),u=n.n(c),d=n(0),p=n.n(d),m=n(1008),f=n(1009);function h(e){var t=e.filter,n=e.sortBy,a=e.size,o=e.siteId,l=e.peopleId,c=e.sfUserId,u=i()(e,["filter","sortBy","size","siteId","peopleId","sfUserId"]),d=Object(f.a)({initialParams:new s.a.Map({filter:t,sortBy:n,size:a,siteId:o,peopleId:l,sfUserId:c})}),h=d.users,b=d.loading,g=d.canPaginate,y=d.loadMore;return p.a.createElement(m.a,r()({users:h,isLoading:b,canPaginate:g,onLoadMore:y,showPopovers:!0},u))}h.propTypes={filter:u.a.string,sortBy:u.a.string,siteId:u.a.string},t.a=h},2720:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(5),r=n.n(a),o=n(15),i=n.n(o),l=n(1),s=n.n(l),c=n(0),u=n.n(c);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){var t=e.children,n=e.header,a=(e.isLoading,e.additionalClasses),o=i()(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"Tile-feed":!0},a.reduce((function(e,t){return e[t]=!0,e}),{})));return u.a.createElement("div",{className:o},u.a.createElement("div",{className:"header"},u.a.createElement("p",null,n)),t)}p.propTypes={children:s.a.node,isLoading:s.a.bool,header:s.a.node.isRequired,additionalClasses:s.a.arrayOf(s.a.string)},p.defaultProps={additionalClasses:[]}},2721:function(e,t,n){"use strict";var a=n(10),r=n.n(a),o=n(11),i=n.n(o),l=n(7),s=n.n(l),c=n(12),u=n.n(c),d=n(13),p=n.n(d),m=n(8),f=n.n(m),h=n(5),b=n.n(h),g=n(4),y=n.n(g),v=n(1),E=n.n(v),O=n(0),j=n.n(O),C=n(18),_=n(61),S=n(14),N=n(496),k=n(296),w=n(30),F=n(855),R=n(161),I=n(17),T=n(3),x=n(104),P=n(658),D=n(1021);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var A=function(e,t){if(null!=e&&e.includes("post")){if(t===k.c.POST)return Object(T.a)("feed.video_files_feed_posts_not_playable");if(t===k.c.COMMENT)return Object(T.a)("feed.video_files_comments_not_playable")}else if(null!=e&&e.includes("reply"))return Object(T.a)("feed.video_files_reply_not_playable");return Object(T.a)("feed.video_files_not_playable")},L=function(e){u()(n,e);var t=M(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).onNewFilesSelected=a.onNewFilesSelected.bind(s()(a)),a.onExistingFilesSelected=a.onExistingFilesSelected.bind(s()(a)),a}return i()(n,[{key:"componentDidMount",value:function(){this.triggerChange(this.props.fileTransports)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){y.a.is(this.props.fileTransports,e.fileTransports)||this.triggerChange(e.fileTransports)}},{key:"onNewFilesSelected",value:function(e){var t=this.props,n=t.isPendingUpload,a=t.siteId;return n?this.props.selectPendingFilesToUpload(this.getValidFiles(e)):this.props.uploadFiles(this.getValidFiles(e),a)}},{key:"onExistingFilesSelected",value:function(e){return this.props.onSelect(this.getValidFiles(e).map((function(e){return e.get("id")})))}},{key:"getValidFiles",value:function(e){var t=this,n=(Array.isArray(e)?e:[e]).filter((function(e){return!(e instanceof y.a.Map)||0===t.props.fileTransports.filter((function(t){return t.getIn(["result","id"])===e.get("id")})).size}));if(!this.props.maxFiles||1===this.props.maxFiles||0===n.length)return n;var a=this.props.maxFiles-this.props.fileTransports.size,r=n.slice(0,a);return n.length!==r.length&&this.props.addMaxFilesWarningFlash(),r.length>0?r:[]}},{key:"triggerChange",value:function(e){"function"==typeof this.props.onFilesChange&&this.props.onFilesChange(e.map((function(e){return e.get("result")})))}},{key:"render",value:function(){var e=this.props,t=e.canUploadAllFileTypes,n=e.instanceId,a=e.onRemove,r=e.maxFiles,o=e.siteId,i=e.showPreviews,l=e.fileTransports,s=e.allowExternalFileOptions,c=e.hasIntranetOption,u=e.isBoxEnabled,d=e.isGDriveEnabled,p=e.isDropboxEnabled,m=e.isOneDriveEnabled,f=e.isSharePointEnabled,h=e.isCRMEnabled,b=e.hasConnectedBoxAccount,g=e.hasConnectedGoogleDriveAccount,y=e.hasConnectedDropboxAccount,v=e.hasConnectedOneDriveAccount,E=e.hasConnectedSharePointAccount,O=e.isSmall,C=e.icon,_=e.width,S=e.fileType,k=e.customAddMessage,w=e.dropzoneRef,F=e.handleDragAndDrop,R=e.isButtonsLayout,I=!r||r>1,T=s&&u&&b,x=s&&p&&y,P=s&&h,M=s&&d&&g,A=s&&m&&v,L=s&&f&&E;return j.a.createElement(j.a.Fragment,null,l.size<r&&j.a.createElement(N.a,{canUploadAllFileTypes:t,customAddMessage:k,onUpload:this.onNewFilesSelected,onSelect:this.onExistingFilesSelected,hasBoxOption:T,isButtonsLayout:R,hasDropboxOption:x,hasCrmOption:P,hasGoogleDriveOption:M,hasOneDriveOption:A,hasSharePointOption:L,mediaManagerProps:{defaultSiteId:o||null},mediaManagerId:n,hasIntranetOption:c,allowExternalFileOptions:s,isMulti:I,isCompact:O,icon:O?C:"dropzone-files",fileType:S,ref:w,handleDragAndDrop:F}),i&&l.size>0&&j.a.createElement("div",{className:"PostForm-fileList--post"},j.a.createElement(D.a,{files:l,onClear:a,enableLightbox:!1,enableDownload:!1,isEditing:!0,width:_})))}}]),n}(j.a.Component);b()(L,"propTypes",{canUploadAllFileTypes:E.a.bool,instanceId:E.a.string.isRequired,onSelect:E.a.func.isRequired,onRemove:E.a.func.isRequired,onFilesChange:E.a.func,maxFiles:E.a.number,showPreviews:E.a.bool,isPendingUpload:E.a.bool,allowExternalFileOptions:E.a.bool,hasIntranetOption:E.a.bool,isSmall:E.a.bool,icon:E.a.string,width:E.a.number,dropzoneRef:E.a.oneOfType([E.a.node,E.a.object]),isNativeVideoEnabled:E.a.bool,handleDragAndDrop:E.a.func,isButtonsLayout:E.a.bool}),b()(L,"defaultProps",{canUploadAllFileTypes:!1,showPreviews:!0,isPendingUpload:!1,allowExternalFileOptions:!0,hasIntranetOption:!0,isSmall:!1,icon:"albums",isNativeVideoEnabled:!1,handleDragAndDrop:function(){},isButtonsLayout:!1}),t.a=Object(C.connect)((function(e,t){return{siteId:Object(F.d)(e),fileTransports:Object(R.d)(e,t.selectedIds),isBoxEnabled:Object(I.Q)(e,"box"),isGDriveEnabled:Object(I.Q)(e,"googledrive"),isDropboxEnabled:Object(I.Q)(e,"dropbox"),isOneDriveEnabled:Object(I.Q)(e,"onedrive"),isSharePointEnabled:Object(I.Q)(e,"sharepoint"),isCRMEnabled:Object(I.Q)(e,"crm"),hasConnectedBoxAccount:Object(w.hasConnectedBoxAccount)(e),hasConnectedGoogleDriveAccount:Object(w.hasConnectedGoogleDriveAccount)(e),hasConnectedDropboxAccount:Object(w.hasConnectedDropboxAccount)(e),hasConnectedOneDriveAccount:Object(w.hasConnectedOneDriveAccount)(e),hasConnectedSharePointAccount:Object(w.hasConnectedSharePointAccount)(e)}}),(function(e,t){var n=t.instanceId,a=t.feedPostformType,r=t.isNativeVideoEnabled,o=t.maxFiles,i=t.onSelect,l=t.onSelectPendingFile,s=t.onReplace;return{addMaxFilesWarningFlash:function(){return e(Object(S.l)(Object(T.a)("feed.post_form.max_files_reached",{max:o})))},selectPendingFilesToUpload:function(t){return t.map((function(t){if(Object(x.g)(t)&&!r){var o=A(n,a);e(Object(S.l)(o))}return e(Object(_.selectPendingFilesToUpload)(t,(function(e){i(e),l(t,e)})))}))},uploadFiles:function(t,o){return t.map((function(t){var l=Object(x.g)(t);if(l&&!r){var c=A(n,a);e(Object(S.l)(c))}var u="",d=function(e){u!==e&&(u=e,i(e))};return Object(P.a)(n,new Promise((function(n,a){r&&l?e(Object(_.uploadToKaltura)(t,o,d)).then((function(e){var t=e.file;s(u,t.get("externalFileId")),n()})):e(Object(_.upload)(t)).then((function(e){var t=e.id,a=e.jqXhr;d(t),a.then((function(e){s(t,e.get("id")),n()})).catch(n)})).catch(a)})))}))}}}),null,{forwardRef:!0})(L)},2722:function(e,t,n){"use strict";var a=n(10),r=n.n(a),o=n(11),i=n.n(o),l=n(7),s=n.n(l),c=n(12),u=n.n(c),d=n(13),p=n.n(d),m=n(8),f=n.n(m),h=n(5),b=n.n(h),g=n(4),y=n.n(g),v=n(1),E=n.n(v),O=n(0),j=n.n(O),C=n(81),_=n(18),S=n(1015),N=n(165),k=n(2896),w=n(2897),F=n(590),R=n(30),I=n(17);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var x=function(e){u()(n,e);var t=T(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),b()(s()(e),"renderInner",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=e.props,a=n.campaign,r=n.enabledNetworks,o=n.connectedNetworks,i=n.title,l=n.description,s=n.url,c=n.img,u=n.domain,d=n.twitterShareCount,p=n.twitterHasShared,m=n.facebookShareCount,f=n.facebookHasShared,h=n.linkedinShareCount,b=n.linkedinHasShared,g=n.hasShareButton,y=n.hasTwitter,v=n.hasFacebook,E=n.hasLinkedIn,O=n.canManage,C=j.a.createElement(w.a,{campaign:a,enabledNetworks:r,connectedNetworks:o}),_=a.get("isActive");return j.a.createElement(N.a,{modal:C},(function(n){return e.props.children({onShareClick:_?n:null,onCountsClick:t,campaign:a,title:i,description:l,url:s,img:c,domain:u,twitterShareCount:d,twitterHasShared:p,facebookShareCount:m,facebookHasShared:f,linkedinShareCount:h,linkedinHasShared:b,hasShareButton:g,enabledNetworks:r,hasTwitter:y,hasFacebook:v,hasLinkedIn:E,connectedNetworks:o,canManage:O})}))})),e}return i()(n,[{key:"componentDidMount",value:function(){!this.props.isCampaignInState&&this.props.campaign&&this.props.set(this.props.campaign.toJS())}},{key:"render",value:function(){var e=this,t=this.props,n=t.campaign,a=t.enabledNetworks,r=t.canManage;if(!n)return null;if(r){var o=j.a.createElement(k.a,{campaign:n,enabledNetworks:a,canViewAnalytics:r});return j.a.createElement(N.a,{modal:o},(function(t){return e.renderInner(t)}))}return this.renderInner(null)}}]),n}(C.b);x.propTypes={campaign:E.a.instanceOf(y.a.Map),set:E.a.func.isRequired,isCampaignInState:E.a.bool.isRequired,children:E.a.func.isRequired},x.defaultProps={},t.a=Object(_.connect)((function(e,t){var n=Object(I.g)(e),a=t.campaign;return{title:a.getIn(["oembed","title"]),description:a.getIn(["oembed","description"]),url:a.getIn(["oembed","url"]),img:a.getIn(["oembed","thumbnail_url"]),domain:a.getIn(["oembed","provider_url"]),twitterShareCount:a.getIn(["networks","twitter","shareCount"])||0,twitterHasShared:!0===a.getIn(["networks","twitter","hasShared"]),facebookShareCount:a.getIn(["networks","facebook","shareCount"])||0,facebookHasShared:!0===a.getIn(["networks","facebook","hasShared"]),linkedinShareCount:a.getIn(["networks","linkedin","shareCount"])||0,linkedinHasShared:!0===a.getIn(["networks","linkedin","hasShared"]),hasShareButton:!0===a.get("isActive"),enabledNetworks:n,hasTwitter:n.contains("twitter")&&!0===a.getIn(["networks","twitter","isEnabled"]),hasFacebook:n.contains("facebook")&&!0===a.getIn(["networks","facebook","isEnabled"]),hasLinkedIn:n.contains("linkedin")&&!0===a.getIn(["networks","linkedin","isEnabled"]),connectedNetworks:Object(R.getCurrentUserConnectedSocialNetworks)(e),canManage:Object(R.canCurrentUserManageCampaigns)(e),isCampaignInState:!!Object(F.c)(e,a.get("campaignId"))}}),{set:S.g})(x)},2770:function(e,t,n){"use strict";var a=n(10),r=n.n(a),o=n(11),i=n.n(o),l=n(7),s=n.n(l),c=n(12),u=n.n(c),d=n(13),p=n.n(d),m=n(8),f=n.n(m),h=n(5),b=n.n(h),g=n(4),y=n.n(g),v=n(1),E=n.n(v),O=n(0),j=n.n(O),C=n(18),_=n(355),S=n(221);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var k=function(e){u()(n,e);var t=N(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),b()(s()(e),"load",(function(){var t=e.props,n=t.isLoaded,a=t.isLoading,r=t.load,o=t.url;n||a||r(o)})),e}return i()(n,[{key:"componentDidMount",value:function(){this.load()}},{key:"componentDidUpdate",value:function(e){e.url!==this.props.url&&this.load()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.embed;return t({isLoading:e.isLoading,isLoaded:e.isLoaded,embed:n})}}]),n}(j.a.Component);k.propTypes={url:E.a.string.isRequired,children:E.a.func},t.a=Object(C.connect)((function(e,t){var n=Object(S.b)(e,t.url)||new y.a.Map;return{embed:n.get("result"),isLoading:n.get("loading")||!1,isLoaded:n.get("loaded")||!1}}),(function(e){return{load:function(t){return e(Object(_.a)(t,{autoplay:!1}))}}}))(k)},2791:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(0),i=n.n(o),l=n(37),s=n(125),c=n(2686),u=n(117),d=n(149);n(3);function p(e){var t=e.fields,n=e.maxFields,a=e.getPlaceholder,r=e.addLabel,o=e.showDeleteButton,p=e.label,m=e.note,f=(e.minFields,e.inputMaxLength),h=e.isCompact,b=e.ariaLabel,g=function(){t.length<n&&t.push("")};return i.a.createElement(i.a.Fragment,null,(p||m)&&i.a.createElement("label",{htmlFor:"poll-options",className:"type--h6 type--title u-pad-b--small"},p," ",m&&i.a.createElement("span",{className:"note"},"- ",m)),i.a.createElement("ul",{id:"poll-options"},t.map((function(e,n){return i.a.createElement("li",{"aria-live":"assertive","aria-atomic":"true",className:"u-marg-b--small",key:n},i.a.createElement(c.a,{onClick:function(){return t.remove(n)},hasButton:o&&t.length>1,ariaLabel:b},i.a.createElement(l.Field,{isCompact:h,hasNoInternalLabel:!0,name:"".concat(e),component:u.a,type:"text",placeholder:a&&a(n+1),maxLength:f&&f,onKeyDown:function(e){e.which===d.i&&n===t.length-1&&g()},onKeyUp:function(e){e.target.value&&n===t.length-1&&g()}})))}))),t.length<n&&i.a.createElement("div",{className:"u-marg-t--small"},i.a.createElement(s.a,{icon:"circle-plus",color:"brand",label:r,onClick:g,hasCurrentColorIcon:!0,fontStyle:"b2",iconSourceSize:"17",ariaControls:"poll-options"})))}p.propTypes={maxFields:r.a.number,getPlaceholder:r.a.func,addLabel:r.a.string,label:r.a.string,note:r.a.string,showDeleteButton:r.a.bool,minFields:r.a.number,inputMaxLength:r.a.number,isCompact:r.a.bool},p.defaultProps={maxFields:10,addLabel:"Add",showDeleteButton:!1,minFields:0,isCompact:!1},t.a=p},2794:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(4),r=n.n(a),o=n(32);function i(e,t,n){return e.reduce((function(e,a){var i=new r.a.List,l=a.get("birthday")?Object(o.h)(a.get("birthday")):null,s=a.get("hireDate")&&Object(o.j)(a.get("hireDate")).add(1,"year").format("YYYY-MM-DD"),c=a.get("hireDate")?Object(o.h)(a.get("hireDate").replace(/^([0-9]{4})-/,""),s):null;return l&&Object(o.d)(l,t,n)&&(i=i.push(a.merge({key:"".concat(a.get("id"),"-bday"),hireDate:null,workAnniversary:null,sortDate:l.unix()}))),c&&Object(o.d)(c,t,n)&&(i=i.push(a.merge({key:"".concat(a.get("id"),"-work"),birthday:null,sortDate:c.unix()}))),e.concat(i)}),new r.a.List).sortBy((function(e){return e.get("sortDate")}))}},2900:function(e,t,n){"use strict";var a=n(16),r=n.n(a),o=n(1),i=n.n(o),l=n(0),s=n.n(l),c=n(2756),u=n(224),d=n(10),p=n.n(d),m=n(11),f=n.n(m),h=n(12),b=n.n(h),g=n(13),y=n.n(g),v=n(8),E=n.n(v),O=n(5),j=n.n(O),C=n(18),_=(n(1018),n(2665),n(125)),S=n(217),N=n(56),k=n(30),w=n(17),F=n(3);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return y()(this,n)}}var I=function(e){b()(n,e);var t=R(n);function n(){return p()(this,n),t.apply(this,arguments)}return f()(n,[{key:"render",value:function(){var e=this.props,t=e.audience,n=e.segment,a=(e.customFieldLabel,e.isAppManager),r=e.canManage,o=e.isSegmentManager,i=e.recipient,l=e.currentUserSegmentName,c=e.isSegmentsEnabled,u=t||n?"audience":"org",d=Object(F.a)("campaign.audience.all_org");if("audience"===i)return t&&t.isDeleted?s.a.createElement(_.a,{icon:u,label:Object(F.a)("common.deleted_audience"),iconSourceSize:28,fontStyle:"b2",color:"secondary",hasCurrentColorIcon:!0,isInlineBlock:!0}):c&&a&&n&&l!==n.name?s.a.createElement(S.a,{title:"".concat(n.name," | ").concat(t.name),isInline:!0},s.a.createElement(_.a,{icon:u,label:Object(F.a)("common.audience"),iconSourceSize:28,fontStyle:"b2",color:"secondary",hasCurrentColorIcon:!0,isInlineBlock:!0})):c&&!a&&(o||r)&&n&&l!==n.name?s.a.createElement(S.a,{title:"".concat(n.name," ").concat(Object(F.a)("common.audience")),isInline:!0},s.a.createElement(_.a,{icon:u,label:Object(F.a)("common.audience"),iconSourceSize:28,fontStyle:"b2",color:"secondary",hasCurrentColorIcon:!0,isInlineBlock:!0})):a||o||r?s.a.createElement(S.a,{title:"".concat(t.name),isInline:!0},s.a.createElement(_.a,{icon:u,label:Object(F.a)("common.audience"),iconSourceSize:28,fontStyle:"b2",color:"secondary",hasCurrentColorIcon:!0,isInlineBlock:!0})):s.a.createElement(_.a,{icon:u,label:Object(F.a)("common.audience"),iconSourceSize:28,fontStyle:"b2",color:"secondary",hasCurrentColorIcon:!0,isInlineBlock:!0});if("segment"===i){var p=null!=n&&n.name?"".concat(Object(F.a)("common.segment"),": ").concat(n.name):Object(F.a)("common.deleted_segment");return s.a.createElement(S.a,{title:"".concat((null==n?void 0:n.name)||""),isInline:!0},s.a.createElement(_.a,{icon:u,label:p,iconSourceSize:28,fontStyle:"b2",color:"secondary",hasCurrentColorIcon:!0,isInlineBlock:!0}))}return s.a.createElement(_.a,{icon:u,label:d,iconSourceSize:28,fontStyle:"b2",color:"secondary",hasCurrentColorIcon:!0,isInlineBlock:!0})}}]),n}(s.a.PureComponent);j()(I,"propTypes",{audience:N.a.audience,segment:N.a.segmentLite,customFieldLabel:i.a.string.isRequired});var T=Object(C.connect)((function(e){return{customFieldLabel:Object(w.v)(e,"peopleCustomFieldSingular"),isAppManager:Object(k.isCurrentUserAppManager)(e),canManage:Object(k.canCurrentUserManageCampaigns)(e),currentUserSegmentName:Object(k.getCurrentUserSegmentName)(e),isSegmentManager:Object(k.isCurrentUserSegmentManager)(e),isSegmentsEnabled:Object(w.V)(e)}}))(I),x=n(659),P=n(21),D=n(74);function M(e){var t=e.title,n=e.description,a=e.url,o=e.img,i=e.domain,l=e.onShareClick,d=e.optionsMenu,p=e.showCounts,m=e.audience,f=e.segment,h=e.canManageCampaigns,b=e.campaignDescription,g=e.recipient,y=a?Object(D.a)(a):null;return s.a.createElement("div",{className:"CampaignItem ImageOptions-trigger CampaignItem--hasAudienceCount"},s.a.createElement("a",{onClick:l,className:"u-displayBlock",href:l?void 0:y},function(e,t){return e?e&&!t?s.a.createElement("div",{className:"CampaignItem-coverImage u-imageCover u-cursorPointer"},s.a.createElement("div",{className:"CampaignItem-iconContainer"},s.a.createElement(P.a,{name:"albums"}))):s.a.createElement("div",{className:"CampaignItem-coverImage u-imageCover u-cursorPointer",style:{backgroundImage:"url('".concat(t,"')")}}):s.a.createElement("div",{className:"CampaignItem-coverImage u-imageCover u-cursorPointer theme--bg"},s.a.createElement("div",{className:"CampaignItem-iconContainer u-fill--white"},s.a.createElement(P.a,{name:"social-campaign"})))}(a,o)),s.a.createElement("div",{className:"ImageOptions ImageOptions--small"},d,a&&s.a.createElement("a",{href:y,className:"ImageOptions-button ImageOptions-button--externalLink"},s.a.createElement(P.a,{name:"external",sourceSize:16}))),s.a.createElement("div",{className:"CampaignItem-inner"},a&&s.a.createElement("h2",{className:"type--h4 u-marg-b--small"},s.a.createElement("a",{onClick:l,className:"type--title u-cursorPointer",href:l?void 0:y},s.a.createElement(u.a,{length:60},t))),n?s.a.createElement("p",{className:"type--b2 type--secondary"},s.a.createElement(u.a,{length:110},n)):s.a.createElement("p",{className:"type--b2 type--secondary"},s.a.createElement(u.a,{length:110},b)),a&&s.a.createElement("div",{className:"u-marg-t--small"},s.a.createElement(x.a,{url:y},Object(D.o)(i))),(h||"audience"===g)&&s.a.createElement("div",{className:"CampaignItem-audienceCount"},s.a.createElement("div",{className:"CampaignItem-audienceCount-inner"},s.a.createElement(T,{audience:m,segment:f,recipient:g})))),s.a.createElement("div",{className:"CampaignItem-stripContainer"},s.a.createElement("div",{className:"Strip Strip--alt u-cf u-hideIfEmpty"},s.a.createElement(c.a,r()({},e,{showSocialCount:p})))))}M.propTypes={title:i.a.string.isRequired,description:i.a.string,url:i.a.string.isRequired,domain:i.a.string.isRequired,img:i.a.string,onShareClick:i.a.func.isRequired,onCountsClick:i.a.func,hasTwitter:i.a.bool,hasFacebook:i.a.bool,hasLinkedIn:i.a.bool,hasShareButton:i.a.bool,twitterShareCount:i.a.number,twitterHasShared:i.a.bool,facebookShareCount:i.a.number,facebookHasShared:i.a.bool,linkedinShareCount:i.a.number,linkedinHasShared:i.a.bool,optionsMenu:i.a.element,showCounts:i.a.bool,canManageCampaigns:i.a.bool},M.defaultProps={hasTwitter:!0,hasFacebook:!0,hasLinkedIn:!0,hasShareButton:!0,twitterShareCount:0,twitterHasShared:!1,facebookShareCount:0,facebookHasShared:!1,linkedinShareCount:0,linkedinHasShared:!1,showCounts:!0,canManageCampaigns:!1};t.a=M},3441:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return _}));var a=n(24),r=n.n(a),o=n(15),i=n.n(o),l=n(4),s=n.n(l),c=n(0),u=n.n(c),d=n(53),p=n(481),m=n(657),f=n(854),h=n(21),b=n(67),g=n(654),y=n(132),v=n(2120),E=n(73),O=n(3),j=n(89),C=function(e){var t=e.content,n=e.index,a=e.feedContext,r=i()({"type--b3":!0,"type--secondary":!0,"u-textTruncate":!0}),o=t.getIn(["mustReadDetails","audience"]),l=t.getIn(["site","name"]),s=Object(v.a)(o,l),c=Object(j.h)(t,Object(j.c)("site"===a?"site_feed":"home_feed",{term:"feed_must_read",content:n+1}));return u.a.createElement("div",{className:"ListingItem"},u.a.createElement("div",{className:"ListingItem-thumb"},u.a.createElement(p.a,{content:t,imageSize:"125px",to:c,hasSiteImageFallback:!0,ariaLabel:t.get("title")})),u.a.createElement("div",{className:r},s),u.a.createElement("h2",{className:"type--h5 u-whiteSpaceNormal u-marg-t--xsmall"},u.a.createElement(d.a,{className:"type--title",to:c},t.get("title"))),u.a.createElement("div",{className:"ListingItem-metaContainer u-marg-t--xsmall"},"event"===t.get("type")?u.a.createElement("div",{className:"u-marg-t--xsmall"},u.a.createElement(f.a,{hasLegacyIcon:!0,showTimeZone:!1,startsAt:t.get("startsAt"),endsAt:t.get("endsAt"),timezoneIso:t.get("timezoneIso"),timezoneName:t.get("timezoneName"),timezoneOffset:t.get("timezoneOffset"),isMultiDay:t.get("isMultiDay"),isAllDay:t.get("isAllDay")})):u.a.createElement(m.a,{createdAt:t.get("createdAt"),publishAt:t.get("publishAt"),modifiedAt:t.get("modifiedAt"),site:t.get("site"),authoredBy:t.get("authoredBy")})))};function _(t){var n,a=t.site,o=t.feedContext,l=a?a.getIn(["result","id"]):null,d=Object(c.useState)(!1),p=r()(d,2),m=p[0],f=p[1],v=Object(g.a)(e.Simpplr.Salesforce.Feed.getMustReadContent,{siteId:l}),j=v.loading,_=v.result;if(_&&(n=_.listOfItems),j||!n.length)return null;var S=i()({showAllItems:m}),N=u.a.createElement("div",{className:"List-show-more"},u.a.createElement("button",{type:"button",className:"u-textCenter type--500",onClick:function(){return e=m?b.Z:b.ab,Object(E.b)(e),void f(!m);var e}},m?u.a.createElement(u.a.Fragment,null,u.a.createElement(h.a,{name:"show-less-arrow",sourceSize:"10"})," ",Object(O.a)("feed.combined_timeline.button.show_less")):u.a.createElement(u.a.Fragment,null,u.a.createElement(h.a,{name:"show-more-arrow",sourceSize:"13"})," ",Object(O.a)("feed.combined_timeline.button.show_more"))));return u.a.createElement("div",{className:"Post u-cf MustReadPost"},u.a.createElement("div",{className:"Post-body Post--body--combined-timeline"},u.a.createElement("div",{className:"PostHeader--grouped u-displayFlex u-alignItems--center"},u.a.createElement("div",{className:"ContentAdminBar-iconContainer"},u.a.createElement(h.a,{name:"must-read",sourceSize:"28"})),u.a.createElement("p",{className:"u-inlineBlock"},1===n.length?Object(O.a)("feed.must_read_content.heading.singular"):Object(O.a)("feed.must_read_content.heading.plural",{count:n.length}))),u.a.createElement("div",{className:S},u.a.createElement("ul",{className:"listingBox"},n.map((function(e,t){var n=new s.a.Map(Object(y.b)(e));return u.a.createElement(C,{content:n,key:n.get("id"),index:t,feedContext:o})})))),n.length>3&&N))}}).call(this,n(27))},3442:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f}));var a=n(4),r=n.n(a),o=n(0),i=n.n(o),l=n(1999),s=n(2652),c=n(654),u=n(132),d=n(3),p=n(89),m=n(2720);function f(t){var n,a=t.site,o=t.feedContext,f=a?a.getIn(["result","name"]):"",h=a?a.getIn(["result","id"]):null,b=Object(c.a)(e.Simpplr.Salesforce.Feed.getPopularContent,{siteId:h}),g=b.loading,y=b.result;y&&(n=y.listOfItems);var v=f?Object(d.a)("feed.popular_post_carousal.heading_in_site",{siteName:f}):Object(d.a)("feed.popular_post_carousal.heading");return g||!n.length?null:i.a.createElement(m.a,{header:v,isLoading:g,additionalClasses:["Tile-carousel"]},i.a.createElement(s.a,{isFlush:!0,isInNarrowColumn:!0},n.map((function(e,t){var n=new r.a.Map(Object(u.b)(e));return i.a.createElement(l.a,{content:n,key:n.get("id"),utmParams:Object(p.c)("site"===o?"site_feed":"home_feed",{term:f?"feed_popular_content_in_site":"feed_popular_content",content:t+1}),hideMeta:"event"===n.get("type"),hideExcerpt:"event"!==n.get("type"),isSingleLineTitle:!1,hasSiteImageFallback:!0,showLandscapeImage:!0,imageSize:"158px"})}))))}}).call(this,n(27))},3443:function(e,t,n){e.exports={emptyContainer:"DropZoneWrapper-module-emptyContainer___1XXih",empty:"DropZoneWrapper-module-empty___2mNcz",emptyText:"DropZoneWrapper-module-emptyText___3hqfm",overStateIcon:"DropZoneWrapper-module-overStateIcon___2AmO_",isOver:"DropZoneWrapper-module-isOver___1p-GD",successOverState:"DropZoneWrapper-module-successOverState___3eYja",emptyDropzoneState:"DropZoneWrapper-module-emptyDropzoneState___3j-BV",spacing:"DropZoneWrapper-module-spacing___3T5qE",restrictedOverState:"DropZoneWrapper-module-restrictedOverState___30kQy"}},3444:function(e,t,n){"use strict";(function(e){var a=n(10),r=n.n(a),o=n(11),i=n.n(o),l=n(7),s=n.n(l),c=n(12),u=n.n(c),d=n(13),p=n.n(d),m=n(8),f=n.n(m),h=n(5),b=n.n(h),g=n(4),y=n.n(g),v=n(1),E=n.n(v),O=n(0),j=n.n(O),C=n(18),_=n(37),S=n(1010),N=n(55),k=n(298),w=n(3),F=n(47),R=n(1023);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var T=function(e){u()(n,e);var t=I(n);function n(){var e;r()(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),b()(s()(e),"onCancel",(function(t){t.preventDefault(),"function"==typeof e.props.onCancel&&e.props.onCancel()})),b()(s()(e),"isButtonDisabled",(function(){return e.props.invalid||e.props.submitting})),b()(s()(e),"handleSubmit",(function(t){var n=e.props,a=n.onSubmit,r=n.onCancel;return n.dirty||r(),a(t)})),e}return i()(n,[{key:"render",value:function(){var e=this.props.handleSubmit;return j.a.createElement("div",{className:"PostForm-edit has-smallControls"},j.a.createElement("form",{onSubmit:e(this.handleSubmit)},j.a.createElement("div",{className:"u-posRelative u-zIndex--1"},j.a.createElement(_.Field,{component:R.a,name:"body",isInitOnClick:!1})),j.a.createElement("div",{className:"u-pad-tb--medium u-textRight"},j.a.createElement(N.a,{type:"submit",label:Object(w.a)("button_label.update"),appearance:"brand",disabled:this.isButtonDisabled()}),j.a.createElement("a",{href:"",className:"Strip-cancel",onClick:this.onCancel},Object(w.a)("button_label.cancel")))))}}]),n}(j.a.Component);b()(T,"propTypes",{onCancel:E.a.func}),t.a=Object(C.connect)((function(e,t){return{form:"".concat("FEED_POST_EDIT","-").concat(t.id),initialValues:new y.a.Map({body:Object(k.d)(t.body)})}}),(function(t,n){return{onSubmit:function(a){if(Object(k.d)(n.body)===a.get("body"))return n.onCancel();var r=a.set("body",Object(k.h)(a.get("body"))).set("listOfFiles",n.listOfFiles||[]);return e.Simpplr.Settings.feedRichTextEnabled&&"poll"!==n.postType||(r=r.set("body",Object(k.i)(r.get("body")))),t(Object(S.f)(n.id,r.toJS())).then((function(){return n.onCancel()}))}}}))(Object(_.reduxForm)({validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new y.a.Map;return Object(F.g)(e,{required:["body"]})}})(T))}).call(this,n(27))},3445:function(e,t,n){"use strict";(function(e){var a=n(10),r=n.n(a),o=n(11),i=n.n(o),l=n(7),s=n.n(l),c=n(12),u=n.n(c),d=n(13),p=n.n(d),m=n(8),f=n.n(m),h=n(4),b=n.n(h),g=n(1),y=n.n(g),v=n(0),E=n.n(v),O=n(18),j=n(37),C=n(1010),_=n(55),S=n(220),N=n(298),k=n(3),w=n(47),F=n(1023);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var I=function(e){u()(n,e);var t=R(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).onCancel=a.onCancel.bind(s()(a)),a}return i()(n,[{key:"onCancel",value:function(e){e.preventDefault(),"function"==typeof this.props.onCancel&&this.props.onCancel()}},{key:"isButtonDisabled",value:function(){return this.props.invalid||this.props.submitting}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.onSubmit;return E.a.createElement("form",{className:"has-smallControls",onSubmit:t(n)},E.a.createElement("div",{className:"u-border u-borderRadius--2"},E.a.createElement(j.Field,{component:F.a,name:"body",isInitOnClick:!1,hasNoBorder:!0})),E.a.createElement("div",{className:"Strip Strip--replyEdit"},E.a.createElement(_.a,{type:"submit",label:Object(k.a)("button_label.update"),appearance:"brand",disabled:this.isButtonDisabled()}),E.a.createElement("span",{className:"Strip-cancel"},E.a.createElement(S.a,{onClick:this.onCancel,label:Object(k.a)("button_label.cancel")}))))}}]),n}(E.a.Component);I.propTypes={id:y.a.string.isRequired,postId:y.a.string.isRequired,body:y.a.string,listOfFiles:y.a.instanceOf(b.a.List),onCancel:y.a.func},t.a=Object(O.connect)((function(e,t){return{form:"".concat("FEED_REPLY_EDIT","-").concat(t.id),initialValues:new b.a.Map({body:Object(N.d)(t.body)})}}),(function(t,n){return{onSubmit:function(a){if(Object(N.d)(n.body)===a.get("body"))return n.onCancel();var r=a.set("body",Object(N.h)(a.get("body"))).set("listOfFiles",n.listOfFiles||[]);return e.Simpplr.Settings.feedRichTextEnabled||(r=r.set("body",Object(N.i)(r.get("body")))),t(Object(C.g)(n.postId,n.id,r.toJS())).then((function(){return n.onCancel()}))}}}))(Object(j.reduxForm)({validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new b.a.Map;return Object(w.g)(e,{requiredHtml:["body"]})}})(I))}).call(this,n(27))},3446:function(e,t,n){"use strict";(function(e){var a=n(4),r=n.n(a),o=n(1009);t.a=function(t,n){return Object(o.a)({endpoint:e.Simpplr.Salesforce.Feed.getLikers,initialParams:new r.a.Map(n?{postId:t,replyId:n,commentId:n}:{postId:t})})}}).call(this,n(27))},3447:function(e,t,n){var a=n(373),r=n(2040);e.exports=function(e,t){return e&&e.length?r(e,a(t,2)):[]}},3448:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return T}));var a=n(31),r=n.n(a),o=n(24),i=n.n(o),l=n(15),s=n.n(l),c=n(4),u=n.n(c),d=n(22),p=n.n(d),m=n(0),f=n.n(m),h=n(18),b=n(94),g=n(2652),y=n(114),v=n(770),E=n(66),O=n(296),j=n(52),C=n(654),_=n(32),S=n(2794),N=n(3),k=n(2720),w=n(3449);function F(e){return s()({UserCard:!0,"UserCard--withHireDate":e.get("hireDate"),"UserCard--withCelebrations":!0})}function R(e){return new u.a.List((null==e?void 0:e.listOfItems)||[]).map((function(e){return new u.a.Map(e)}))}function I(e,t,n,a){return e===O.e.all?t:e===O.e.celebrations?a:e===O.e.hiring?n:0}function T(t){var n=t.feedFilter,a=Object(h.useDispatch)(),o=Object(m.useState)(O.e.all),l=i()(o,2),c=l[0],d=l[1],T=Object(C.a)(e.Simpplr.Salesforce.Feed.getPeoplePosts,{variant:"celebrations"}),x=T.loading,P=T.result,D=Object(C.a)(e.Simpplr.Salesforce.Feed.getPeoplePosts,{variant:"latest_hires"}),M=D.loading,A=D.result,L=R(P),B=R(A),U=x||M;if(n===O.b.TO||n===O.b.FAVORITES)return null;var z=function(e,t,n){var a=Object(S.a)(e,0,2),r=a.size||0,o=t.size||0,i=a.size+t.size||0;return{celebrationDataCount:r,hireDataCount:o,celebrationItemsFiltered:a,isLargeShowAllTile:function(){return I(n,i,o,r)>3},allDataCount:i,isSingleTile:function(){return 1===I(n,i,o,r)}}}(L,B,c),V=z.celebrationDataCount,q=z.hireDataCount,W=z.celebrationItemsFiltered,H=z.isLargeShowAllTile,G=z.allDataCount,Z=z.isSingleTile;if(U||!V&&!q)return null;function Y(e){var t=e.birthday,n=e.workAnniversary,a=e.hireDate,r=e.user;if(!n&&!t&&!a)return null;var o=a&&Object(_.j)(a).add(1,"year").format("YYYY-MM-DD"),i=new u.a.Map({birthday:t?Object(_.h)(t):null,hireDate:a?Object(_.h)(a.replace(/^([0-9]{4})-/,""),o):null});!i.get("hireDate")&&n&&(i=i.set("hireDate",Object(_.h)(n))),i.get("birthday")&&!Object(_.d)(i.get("birthday"),3,30)&&(i=i.remove("birthday")),i.get("hireDate")&&!Object(_.d)(i.get("hireDate"),3,30)&&(i=i.remove("hireDate"));var l=i.filter((function(e){return!!e})).map((function(e,t){var n=Object(_.j)().hour(0).minute(0).second(0),o=Object(N.a)("common.".concat("birthday"===t?"birthday":"work_anniversary")),i=e.from(n);e.isSame(n,"day")?i=Object(N.a)("common.time.today"):e.isSame(Object(_.j)().add(1,"day"),"day")?i=Object(N.a)("common.time.tomorrow"):e.isSame(Object(_.j)().subtract(1,"day"),"day")?i=Object(N.a)("common.time.yesterday"):e.isAfter(n)&&(i=n.to(e));var l=null;if("hireDate"===t&&a){var s=p()(a),c=s.clone().set("year",p()().get("year")).set("month",p()().get("month"));l=(l=Math.abs(Math.round(c.diff(s,"years",!0))))<=0?null:Object(N.a)("common.year_count",{count:l})}return f.a.createElement("div",{className:"Celebration",key:r.get("id")},f.a.createElement("div",{className:"Celebration-type type--stamp"},o),f.a.createElement("a",{className:"type--title type--b2 type--500 u-textTruncate u-displayBlock",href:r.get("url")},r.get("name")),f.a.createElement("div",{className:"Celebration-date"},f.a.createElement("span",{className:"Celebration-date-label"},l||e.format(E.e))),f.a.createElement("div",{className:"Celebration-since type--b4 type--secondary"},i))}));return f.a.createElement("div",null,l.toArray())}var J,Q,K=W.map((function(e){return f.a.createElement("div",{className:F(e),key:e.get("id")},f.a.createElement("div",{className:"UserCard-avatarContainer"},f.a.createElement(y.a,{url:e.get("url"),img:e.get("img"),name:e.get("name")})),f.a.createElement("footer",{className:"UserCard-footer"},f.a.createElement(Y,{birthday:e.get("birthday"),workAnniversary:e.get("workAnniversary"),hireDate:e.get("hireDate"),user:e})))})),$=B.map((function(e){var t=e.get("title");return f.a.createElement("div",{className:F(e),key:e.get("id")},f.a.createElement("div",{className:"UserCard-avatarContainer"},f.a.createElement(y.a,{url:e.get("url"),img:e.get("img"),name:e.get("name")})),f.a.createElement("div",{className:"Celebration-type type--stamp"},"New hire"),f.a.createElement("a",{className:"type--title type--b2 type--500 u-textTruncate u-displayBlock",href:e.get("url")},e.get("name")),t&&f.a.createElement("h3",{className:"type--b3 type--secondary u-textTruncate"},t),f.a.createElement("footer",{className:"UserCard-footer"},e.get("hireDate")&&f.a.createElement("div",{className:"UserCard-hireDare"},f.a.createElement(v.a,{hireDate:e.get("hireDate")}))))})),X=f.a.createElement("div",{className:"UserCard u-posFit"},f.a.createElement(w.a,null),f.a.createElement("button",{type:"button",className:"u-posFit u-pos-top type--fauxLink",onClick:function(){a(Object(b.open)(j.xb,"people_post_modal",c===O.e.all?O.e.celebrations:c))}},f.a.createElement("span",{className:"u-posAbsoluteCenter type--b2"},Object(N.a)("feed.people_post.show_all_tile_".concat(c,"_title"))))),ee=f.a.createElement(f.a.Fragment,null,f.a.createElement(w.a,null),f.a.createElement("button",{type:"button",className:"type--fauxLink u-marg-t--small u-pad-t--xsmall u-pad-l--medium u-pad-r--medium",onClick:function(){a(Object(b.open)(j.xb,"people_post_modal",c===O.e.all?O.e.celebrations:c))}},Object(N.a)("feed.people_post.show_all_text_title"))),te=f.a.createElement("ul",{className:"Filter-pills u-marg-b--small u-pad-l--medium u-pad-r--medium",onChange:function(e){d(e.target.value)}},f.a.createElement("li",null,f.a.createElement("label",{htmlFor:"all",className:s()({active:c===O.e.all})},f.a.createElement("input",{type:"radio",value:O.e.all,id:"all",name:"filter"}),f.a.createElement("span",null,Object(N.a)("common.all")))),f.a.createElement("li",null,f.a.createElement("label",{htmlFor:"celebrations",className:s()({active:c===O.e.celebrations})},f.a.createElement("input",{type:"radio",value:O.e.celebrations,id:"celebrations",name:"filter"}),f.a.createElement("span",null,Object(N.a)("celebration_plural")))),f.a.createElement("li",null,f.a.createElement("label",{htmlFor:"hiring",className:s()({active:c===O.e.hiring})},f.a.createElement("input",{type:"radio",value:O.e.hiring,id:"hiring",name:"filter"}),f.a.createElement("span",null,Object(N.a)("new_hire_plural"))))),ne=["Post-Tile-carousel"].concat(r()(H()?[]:["Post-Tile-No-carousel"]));return Z()&&ne.push("Celebration-Tile-One"),f.a.createElement(k.a,{header:Object(N.a)((J=V,Q=q,1===J&&0===Q?"feed.people_post_heading.single_celebration_only":0===J&&1===Q?"feed.people_post_heading.single_hiring_only":J>=0&&0===Q?"feed.people_post_heading.multiple_celebrations_no_hiring":0===J&&Q>=1?"feed.people_post_heading.multiple_hiring_no_celebrations":1===J&&1===Q?"feed.people_post_heading.one_celebrations_one_hiring":J>0&&1===Q?"feed.people_post_heading.multiple_celebrations_one_hiring":1===J&&Q>0?"feed.people_post_heading.multiple_hiring_one_celebration":"feed.people_post_heading.multiple_celebrations_and_hiring"),{celebrationCount:V,hiringCount:q}),isLoading:U,additionalClasses:ne},G>6&&V>0&&q>0&&te,f.a.createElement(g.a,{isFlush:!0,isInNarrowColumn:!0},(c===O.e.all||c===O.e.celebrations)&&K,(c===O.e.all||c===O.e.hiring)&&$,H()&&X),!H()&&ee)}}).call(this,n(27))},3449:function(e,t,n){"use strict";n(1);var a=n(0),r=n.n(a),o=n(660),i=n(70),l=n(2692),s=n(296),c=n(52),u=n(113),d=n(3);t.a=Object(u.a)((function(){var e=[{id:s.e.celebrations,label:Object(d.a)("celebration_plural")},{id:s.e.hiring,label:Object(d.a)("new_hire_plural")}];return{name:c.xb,id:"people_post_modal",title:Object(d.a)("modal.people_events.title"),tabs:e}}))((function(e){var t=e.tab,n=Object(a.useCallback)((function(){switch(t){case s.e.hiring:return r.a.createElement(l.a,{sortBy:"hire_date",showHireDate:!0,showContact:!0});default:return r.a.createElement(l.a,{filter:"celebrations",sortBy:"celebration",showCelebrationStamps:!0,showContact:!0})}}),[t]),c=Object(a.useCallback)((function(){return r.a.createElement("div",{className:"Modal-content"},r.a.createElement(i.a,{message:Object(d.a)("common.error_message"),hasNoBorder:!0}))}),[]);return r.a.createElement(o.a,{renderOnError:c},r.a.createElement("div",{className:"Modal-content"},n()))}))},3450:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return C}));var a=n(15),r=n.n(a),o=n(4),i=n.n(o),l=n(0),s=n.n(l),c=n(53),u=n(62),d=n(481),p=n(854),m=n(2652),f=n(296),h=n(324),b=n(654),g=n(132),y=n(167),v=n(3),E=n(89),O=n(2720),j=function(e){var t=e.feedContext,n=e.content,a=e.index,r=Object(E.c)("site"===t?"site_feed":"home_feed",{term:"feed_upcoming_events",content:a+1});return s.a.createElement("li",{className:"ListingItem"},s.a.createElement("div",{className:"ListingItem-thumb"},s.a.createElement(d.a,{content:n,imageSize:"158px",to:Object(E.h)(n,r)})),s.a.createElement("div",{className:"ListingItem-inner"},s.a.createElement("h2",{className:"type--h5 u-whiteSpaceNormal u-pad-b--xsmall"},s.a.createElement(c.a,{className:"type--primary type--500",to:Object(E.g)(n,r)},n.get("title"))),s.a.createElement("div",{className:"u-marg-b--xsmall u-textTruncate"},s.a.createElement(p.a,{hasLegacyIcon:!0,showTimeZone:!1,startsAt:n.get("startsAt"),endsAt:n.get("endsAt"),timezoneIso:n.get("timezoneIso"),timezoneName:n.get("timezoneName"),timezoneOffset:n.get("timezoneOffset"),isMultiDay:n.get("isMultiDay"),isAllDay:n.get("isAllDay")}))))};function C(t){var n=t.site,a=t.feedContext,o=t.feedFilter,l=[],d=n?n.getIn(["result","name"]):"",p=n?n.getIn(["result","id"]):null,E=Object(h.a)().peopleId,C=Object(u.b)().getState(),_=Object(y.c)(C),S=r()({"Tile-Body":!0}),N=Object(b.a)(e.Simpplr.Salesforce.Feed.getUpcomingEvents,{siteId:p}),k=N.loading,w=N.result;if(w&&(l=w.listOfItems),o===f.b.TO||o===f.b.FAVORITES)return null;if(k||!l.length)return null;var F=function(){return 1===l.length?d?Object(v.a)("feed.upcoming_events.heading_in_site.singular",{siteName:d}):Object(v.a)("feed.upcoming_events.heading.singular"):d?Object(v.a)("feed.upcoming_events.heading_in_site.plural",{siteName:d}):Object(v.a)("feed.upcoming_events.heading.plural")},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map((function(e,n){var r=new i.a.Map(Object(g.b)(e));return s.a.createElement(s.a.Fragment,{key:r.get("id")},s.a.createElement(j,{content:r,index:n,feedContext:a}),_?t&&s.a.createElement("li",{className:"line"}):t&&n%2==1&&s.a.createElement("li",{className:"line"}))}))},I=s.a.createElement(O.a,{header:F(),isLoading:k,additionalClasses:["Tile-carousel"]},s.a.createElement(m.a,{isFlush:!0,isInNarrowColumn:!0},R(l,!1),s.a.createElement(c.a,{to:"/people/".concat(E,"/calendar/"),className:"AllEvent-btn"},s.a.createElement("span",{className:"showMore"},Object(v.a)("common.all_events"))))),T=s.a.createElement(O.a,{header:F(),isLoading:k,additionalClasses:["Content-two-col"]},s.a.createElement("div",{className:S},s.a.createElement("ul",{className:"Tile-Box"},R(l,!0))));return l.length>3?I:T}}).call(this,n(27))}}]);