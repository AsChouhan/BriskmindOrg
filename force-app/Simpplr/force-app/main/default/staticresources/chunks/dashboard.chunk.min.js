(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{2570:function(e,a,t){"use strict";t.r(a);var n=t(10),o=t.n(n),r=t(11),s=t.n(r),i=t(12),l=t.n(i),c=t(13),u=t.n(c),d=t(8),m=t.n(d),p=t(5),h=t.n(p),g=t(4),b=t.n(g),f=t(1),v=t.n(f),E=t(0),w=t.n(E),M=t(81),I=t(18),y=t(402),C=t(70),S=t(990),T=t(55),k=t(21),D=t(217),O=t(3);function j(e){var a=e.id,t=e.title,n=e.note,o=e.linkTo,r=e.onClick,s=e.isDismissable,i=e.description,l=e.buttonLabel,c=Object(I.useDispatch)();if(Object(I.useSelector)((function(e){return e.getIn(["flags",a,"isDismissed"])})))return null;return w.a.createElement("div",{className:"Task"},s&&w.a.createElement("button",{className:"Task-close",type:"button",onClick:function(){return c(Object(S.a)(a))}},w.a.createElement(D.a,{title:Object(O.a)("common.dismiss")},w.a.createElement(k.a,{name:"close"}))),w.a.createElement("h2",{className:"Task-title type--500 type--h4"},t),w.a.createElement("p",null,i),l&&w.a.createElement(T.a,{onClick:r,linkTo:o,size:"large"},l),n&&w.a.createElement("span",{className:"Task-note"},n))}j.propTypes={id:v.a.string.isRequired,title:v.a.string.isRequired,description:v.a.string,buttonLabel:v.a.string,note:v.a.string,linkTo:v.a.string,onClick:v.a.func,isDismissable:v.a.bool},j.defaultProps={isDismissable:!0};var N=w.a.memo(j),x=t(94),R=t(1013),L=t(52),P=t(259),F=t(17),_=t(63);function A(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=m()(e);if(a){var o=m()(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return u()(this,t)}}var H=function(e){l()(t,e);var a=A(t);function t(){return o()(this,t),a.apply(this,arguments)}return s()(t,[{key:"render",value:function(){var e=this.props,a=e.siteId,t=e.canCreateContent,n=e.isCarouselEmpty,o=e.canManageCarousel,r=e.openManageCarouselModal,s=e.availableTypes,i=e.popularSiteId,l=e.hasDismissedTask,c=e.taskId;if(0===s.size||1===s.size&&s.includes("blog"))return null;if(!(n&&o&&t))return null;var u=!(l||a&&i!==a);return w.a.createElement("div",{className:"row"},w.a.createElement("div",{className:"column"},w.a.createElement("div",{className:"u-hideIfEmpty u-marg-b--large u-marg-t--small u-posRelative"},u&&w.a.createElement(R.a,{name:a?"siteCarousel":"carousel",position:{top:0,left:0,right:"auto"},popperPosition:"right-start"}),w.a.createElement(N,{id:c,title:Object(O.a)("dashboard.task.manage_carousel.title"),description:Object(O.a)("dashboard.task.manage_carousel.".concat(a?"site":"home","_description")),note:Object(O.a)("dashboard.task.manage_carousel.".concat(a?"site":"home","_note")),onClick:r,buttonLabel:Object(O.a)("dashboard.task.manage_carousel.button_label")}))))}}]),t}(w.a.PureComponent);h()(H,"propTypes",{dashboardId:v.a.string.isRequired,siteId:v.a.string,popularSiteId:v.a.string});var z=Object(I.connect)((function(e,a){var t=e.getIn(["sites",a.siteId,"result"])||new b.a.Map,n=Object(P.h)(e,a.siteId)||new b.a.Map,o=Object(_.b)(e,t),r="add-carousel-".concat(a.siteId||"home");return{canCreateContent:o,isManager:t.get("isManager",!1),isCarouselEmpty:n.get("loaded")&&n.getIn(["result","items"],new b.a.List).isEmpty(),canManageCarousel:Object(P.a)(e,a.siteId),availableTypes:Object(F.d)(e),popularSiteId:Object(F.v)(e,"popularSiteId"),hasDismissedTask:!0===e.getIn(["flags",r,"isDismissed"]),taskId:r}}),(function(e,a){return{openAddContentModal:function(){return e(Object(x.open)(L.q))},openManageCarouselModal:function(){return e(Object(x.open)(L.P,a.dashboardId,"carousel"))}}}))(H),q=t(3038),W=t(24),B=t.n(W),J=t(3042),U=t(2602),V=t(147),G=t(274),K=t(2594);function Q(e){var a=e.siteId,t=Object(E.useState)("latest"),n=B()(t,2),o=n[0],r=n[1],s=!a&&"popular"===o,i=s?{filter:"popular"}:{filter:"updates",sortBy:"latest",siteId:a,type:"all"},l=Object(K.a)({initialParams:new b.a.Map(i)}),c=l.content,u=l.loading,d=l.loadMore,m=l.canPaginate;return w.a.createElement("div",{className:"row"},w.a.createElement("div",{className:"column"},w.a.createElement("div",{className:"container ".concat(a?"":"container--home")},w.a.createElement(J.a,{siteId:a,maxItemsVisible:1}),a?w.a.createElement("header",{className:"Dashboard-listHeader u-marg-b--medium"},w.a.createElement("h1",{className:"type--h5"},Object(O.a)("common.latest"))):w.a.createElement("div",{className:"Home-tabsWrapper"},w.a.createElement(G.a,{isFullWidth:!0,isPadded:!1},w.a.createElement(V.a,{label:Object(O.a)("common.latest"),onClick:function(){return r("latest")},isCurrent:!s}),w.a.createElement(V.a,{label:Object(O.a)("common.popular"),onClick:function(){return r("popular")},isCurrent:s}))),w.a.createElement("div",{className:"row"},w.a.createElement("div",{className:"column"},w.a.createElement("div",{className:"container"},w.a.createElement(U.a,{hasSiteImageFallback:!0,content:c,isLoading:u,canPaginate:m,onLoadMore:d,hideTypeStamps:!1,hideFollowingTopics:!1})))))))}Q.propTypes={siteId:v.a.string};var X=Q,Y=t(169);function Z(e){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=m()(e);if(a){var o=m()(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return u()(this,t)}}var $=function(e){l()(t,e);var a=Z(t);function t(){return o()(this,t),a.apply(this,arguments)}return s()(t,[{key:"componentDidUpdate",value:function(e){this.props.segmentId!==e.segmentId&&this.props.unloadCarousel(this.props.isSite?e.dashboardId:null)}},{key:"componentWillUnmount",value:function(){this.props.unloadCarousel(this.props.isSite?this.props.dashboardId:null)}},{key:"render",value:function(){var e=this.props,a=e.viewport,t=e.isTouchDevice,n=e.canManage,o=e.canManageCarousel,r=e.isDefaultConfigured,s=e.dashboardId,i=e.isSite,l=e.isDefault,c=e.isManagerControlled,u=e.isAppManager,d=e.isProcessing,m=e.loaded,p=e.pageHeading,h=i?s:null;if("mobile"===a)return w.a.createElement(X,{siteId:h});if(d)return w.a.createElement("div",{className:"row"},w.a.createElement("div",{className:"column"},w.a.createElement(C.a,{message:Object(O.a)("dashboard.home.is_processing")})));var g=!t&&("desktop"===a||"tablet-landscape"===a),b=n&&g,f=o&&g,v=!i&&!l&&!1===c&&!0===u&&!1===r&&m;return w.a.createElement("div",null,w.a.createElement("h1",{className:"u-displayNone"},p),f&&w.a.createElement(z,{dashboardId:s,siteId:h}),w.a.createElement("div",{className:"row"},w.a.createElement("div",{className:"column"},v&&w.a.createElement("div",{className:"u-marg-b--medium u-hideIfEmpty"},w.a.createElement(N,{id:"configure-default-home",title:Object(O.a)("dashboard.home_default.title"),description:Object(O.a)("dashboard.home_default.description"),linkTo:"/manage/home-default",buttonLabel:Object(O.a)("dashboard.home_default.button_label")})),w.a.createElement(q.a,{dashboardId:s,isSite:i,isDefault:l,canManage:b,canManageCarousel:f,isManagerControlled:c,isDefaultConfigured:r}))))}}]),t}(M.b);h()($,"propTypes",{dashboardId:v.a.string,isSite:v.a.bool,isDefault:v.a.bool,canManage:v.a.bool,canManageCarousel:v.a.bool,isManagerControlled:v.a.bool,isDefaultConfigured:v.a.bool,viewport:v.a.string.isRequired,isTouchDevice:v.a.bool,isAppManager:v.a.bool,pageHeading:v.a.string.isRequired}),h()($,"defaultProps",{isSite:!1,isDefault:!1,canManage:!1,canManageCarousel:!1,isManagerControlled:!1,isTouchDevice:!1});a.default=Object(I.connect)((function(e,a){var t=a.dashboardId||"home",n=e.getIn(["dashboard","dashboards",t],new b.a.Map);return{segmentId:Object(Y.e)(e),isAppManager:e.getIn(["currentUser","permissions","isAppManager"]),viewport:e.getIn(["viewMode","viewport"],"desktop"),isTouchDevice:e.getIn(["viewMode","isTouchDevice"],!1),canManage:n.get("canManage",!1),isManagerControlled:n.get("isManagerControlled",!1),isDefaultConfigured:n.get("isDefaultConfigured"),isProcessing:n.get("isProcessing",!1),canManageCarousel:Object(P.a)(e,a.isSite?t:null)}}),(function(e){return{unloadCarousel:function(a){return e(Object(y.k)(a))}}}))($)},2602:function(e,a,t){"use strict";var n=t(4),o=t.n(n),r=t(1),s=t.n(r),i=t(0),l=t.n(i),c=t(2616),u=t(2638),d=t(1999),m=t(241),p=t(70),h=t(1003),g=t(227),b=t(215),f=t(3),v=Object(c.c)((function(){return l.a.createElement("span",{className:"DragHandle u-marg-t--xsmall",style:{width:"20px"},"aria-label":Object(f.a)("field.link_url.handle_aria_label")})})),E=function(e){var a=e.content,t=e.onMoveToTop,n=e.onMoveToBottom,o=e.isFirst,r=e.isLast;return!(o&&r)&&l.a.createElement("div",{className:"ListingItem-sortHandleContainer"},l.a.createElement("div",{className:"ListingItem-optionsContainer"},l.a.createElement(h.a,null,!o&&l.a.createElement(g.a,{label:Object(f.a)("common.move_to_top"),onSelect:function(){t(a.get("contentId"))}}),!r&&l.a.createElement(g.a,{label:Object(f.a)("common.move_to_bottom"),onSelect:function(){n(a.get("contentId"))}}))),l.a.createElement(v,null))};function w(e){var a=e.hasMaxWidth,t=e.isLoading,n=e.canPaginate,o=e.onLoadMore,r=e.utmParams,s=e.canReorder,i=e.onReorder,c=e.onMoveToTop,h=e.onMoveToBottom,g=e.showType;if(0===e.content.size)return t?l.a.createElement(b.a,null):l.a.createElement(p.a,null);var f=s?E:void 0,v=e.content.first().get("contentId"),w=e.content.last().get("contentId"),M=e.content.map((function(a){return l.a.createElement(d.a,{id:a.get("contentId"),hasSiteImageFallback:e.hasSiteImageFallback,showFavorite:e.showFavorite,size:e.size,showSite:e.showSite,content:a,hideFollowingTopics:e.hideFollowingTopics,hideTypeStamp:e.hideTypeStamps,showType:g,hideExcerpt:e.hideExcerpt,hideMeta:e.hideMeta,key:a.get("id"),showExplicitMustRead:e.showExplicitMustRead,showMustReadMeta:e.showMustReadMeta,hasJustFavorite:e.hasJustFavorite,utmParams:r,showSeperator:e.showSeperator,optionsMenuComponent:f,onMoveToTop:c,onMoveToBottom:h,isFirst:v===a.get("contentId"),isLast:w===a.get("contentId")})}));return s&&(M=l.a.createElement(u.a,{useDragHandle:!0,onSortEnd:i,showSeperator:e.showSeperator},M)),l.a.createElement("div",null,l.a.createElement("ul",{className:a?"u-size-readable":""},M),l.a.createElement("div",{className:"u-neg-t--medium"},l.a.createElement(m.a,{canLoad:n,onLoad:o,isLoading:t})))}w.propTypes={content:s.a.instanceOf(o.a.Iterable),isLoading:s.a.bool,canPaginate:s.a.bool,onLoadMore:s.a.func,hideFollowingTopics:s.a.bool,hideTypeStamps:s.a.bool,hideExcerpt:s.a.bool,hideMeta:s.a.bool,showFavorite:s.a.bool,hasSiteImageFallback:s.a.bool,showExplicitMustRead:s.a.bool,hasJustFavorite:s.a.bool,showSite:s.a.bool,hasMaxWidth:s.a.bool,showSeperator:s.a.bool,utmParams:s.a.shape({}),canReorder:s.a.bool,onReorder:s.a.func,onMoveToTop:s.a.func,onMoveToBottom:s.a.func,size:s.a.oneOf(["micro","small","medium","large"])},w.defaultProps={hideTypeStamps:!1,hideFollowingTopics:!0,showFavorite:!1,hasJustFavorite:!0,hasSiteImageFallback:!1,showExplicitMustRead:!0,hasMaxWidth:!1,utmParams:{},showSeperator:!0},a.a=w},2638:function(e,a,t){"use strict";var n=t(31),o=t.n(n),r=t(24),s=t.n(r),i=t(15),l=t.n(i),c=t(1),u=t.n(c),d=t(0),m=t.n(d),p=t(2616),h=Object(p.b)((function(e){var a=e.children,t=e.showDragCursor,n=e.showSeperator;return m.a.createElement("div",{className:l()({"DraggableList-item":!0,"DraggableList-item--showDragCursor":t,"DraggableList-item--showSeperator":n})},a)})),g=Object(p.a)((function(e){var a=e.order,t=e.lookup,n=e.showDragCursor,o=e.showSeperator;return m.a.createElement("div",{className:"DraggableList"},a.map((function(e,a){return m.a.createElement(h,{key:"item-".concat(e),index:a,showDragCursor:n,showSeperator:o},t[e]&&m.a.cloneElement(t[e],{id:void 0}))})))}));function b(e){var a=e.children,t=e.showSeperator,n=e.onSortEnd,r=e.useDragHandle,i=e.showDragCursor,l=e.lockAxis,c=e.axis,u={},p=m.a.Children.toArray(a).filter(Boolean).map((function(e){var a=e.props.id;return a||console.warn("Elements passed into DraggableList must have an id prop."),u[a]&&console.warn("Duplicate id passed into DraggableList, ids must be unique."),u[a]=e,a})),h=Object(d.useState)(p),b=s()(h,2),f=b[0],v=b[1];Object(d.useEffect)((function(){v(p)}),[p.join("|")]);var E=Object(d.useCallback)((function(e){var a=e.oldIndex,t=e.newIndex,r=o()(f);r.splice(a,1),r.splice(t,0,f[a]),v(r),n(r)}),[f]);return m.a.createElement(g,{lookup:u,order:f,useWindowAsScrollContainer:!0,lockAxis:l&&c,distance:10,onSortEnd:E,useDragHandle:r,showDragCursor:i,showSeperator:t})}b.propTypes={children:u.a.node,useDragHandle:u.a.bool,onSortEnd:u.a.func,lockAxis:u.a.bool,axis:u.a.oneOf(["x","y","xy"])},b.defaultProps={lockAxis:!0,axis:"y"},b.propTypes={onSortEnd:function(){}},a.a=b}}]);