(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{2592:function(e,t,a){"use strict";a.d(t,"a",(function(){return j})),a.d(t,"b",(function(){return v}));var n=a(20),r=a.n(n),o=a(5),l=a.n(o),c=a(34),i=a.n(c),s=a(480),u=a.n(s),m=a(1),p=a.n(m),b=a(0),d=a.n(b),f=(a(141),a(1012)),O=a(1252);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function j(e){var t=e.endpoint,a=e.defaultParams,n=e.valueField,o=e.labelField,l=e.itemFactory,c=e.excluded,s=void 0===c?[]:c,u=e.getItemsFromResponse,m=void 0===u?function(e){return e.result.listOfItems}:u;return function(){var e=i()(r.a.mark((function e(c){var i,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.trim(),e.next=3,Object(O.b)(t,h(h({},a),{},{term:i,size:9999}));case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",m(u).filter((function(e){return!s.includes(e[n])})).map((function(e){return{value:e[n],label:e[o],item:l(e)}})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function v(e){var t=e.endpoint,a=e.valueField,n=e.labelField,o=e.itemFactory,l=e.getItemFromResponse,c=void 0===l?function(e){return e.result}:l;return function(){var e=i()(r.a.mark((function e(l){var i,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Array.isArray(l)?l:[l],e.next=3,Promise.all(i.map((function(e){return Object(O.b)(t,e)})));case 3:if(s=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",s.map(c).filter((function(e){return!!e})).map((function(e){return{value:e[a],label:e[n],item:o(e)}})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function w(e){var t=e.load,a=e.loadInitialOptions,n=e.makeOption,r=e.canCreate,o=e.isMulti,l=e.placeholder,c=e.icon,i=e.inputId,s=e.renderOption,m=e.isOptionDisabled,p=e.value,O=e.onChange,g=e.onBlur,h=e.onFocus,j=e.isDisabled,v=e.isValueModel,w=e.createItem,E=e.isValidNewOption,y=e.autoFocus,_=e.isLegacyIcon,M=e.isReduxForm,k=e.hasClearButton,C=e.cacheOptions,S=e.defaultOptions,F=u()(Object(b.useCallback)((function(e,a){t(e).then(a)}),[t]),250);return d.a.createElement(f.a,{loadOptions:F,loadInitialOptions:a,isMulti:o,defaultOptions:S,canCreate:r,makeOption:n,hasClearButton:k,cacheOptions:C,placeholder:l,renderOption:s,inputId:i,icon:c,value:p,onChange:O,onFocus:h,onBlur:g,isDisabled:j,isOptionDisabled:m,isValueModel:v,createItem:w,isValidNewOption:E,autoFocus:y,isLegacyIcon:_,isReduxForm:M})}w.propTypes={load:p.a.func.isRequired,makeOption:p.a.func.isRequired,canCreate:p.a.bool,isMulti:p.a.bool,isValueModel:p.a.bool,cacheOptions:p.a.bool,isDisabled:p.a.bool,isOptionDisabled:p.a.func,placeholder:p.a.string,icon:p.a.string,value:p.a.oneOfType([p.a.string,p.a.shape({}),p.a.arrayOf(p.a.string),p.a.arrayOf(p.a.shape({}))]),onChange:p.a.func,onBlur:p.a.func,onFocus:p.a.func,inputId:p.a.string,isValidNewOption:p.a.func,autoFocus:p.a.bool,isLegacyIcon:p.a.bool,isReduxForm:p.a.bool,hasClearButton:p.a.bool},w.defaultProps={canCreate:!1,isMulti:!1,icon:"search",isLegacyIcon:!1,isReduxForm:!1,hasClearButton:!1,cacheOptions:!0},t.c=w},2593:function(e,t,a){"use strict";var n=a(16),r=a.n(n),o=a(5),l=a.n(o),c=a(71),i=a.n(c),s=a(1),u=a.n(s),m=a(0),p=a.n(m),b=a(123),d=a(380);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){l()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e){e.icon;var t=i()(e,["icon"]),a=t.id,n=t.pickerComponent,o=t.input,l=t.placeholder,c=t.isMulti,s=t.defaultParams,u=(t.isStaticLabel,t.isValueModel),m=t.isDisabled,f=t.valueField,g=t.isOptionDisabled,h=t.canCreate,j=t.excluded,v=t.autoFocus,w=t.renderOption,E=t.makeOption,y=t.meta,_=t.hasClearButton,M=t.cacheOptions,k=t.isLegacyIcon,C=t.defaultOptions,S="".concat(Object(b.a)(a,o),"_input");return p.a.createElement(d.a,r()({inputType:"reactSelect",id:S},t),p.a.createElement(n,{isMulti:c,placeholder:l,isValueModel:u,input:O({},o),meta:y,valueField:f,renderOption:w,makeOption:E,inputId:S,cacheOptions:M,isDisabled:m,isOptionDisabled:g,defaultParams:s,excluded:j,canCreate:h,autoFocus:v,hasClearButton:_,isLegacyIcon:k,defaultOptions:C}))}g.propTypes={pickerComponent:u.a.elementType.isRequired,isValueModel:u.a.bool,canCreate:u.a.bool,autoFocus:u.a.bool,meta:u.a.shape({}),hasClearButton:u.a.bool,isStaticLabel:u.a.bool,cacheOptions:u.a.bool,renderOption:u.a.func,isOptionDisabled:u.a.func,defaultOptions:u.a.bool},g.defaultProps={autoFocus:!1,hasClearButton:!1,isStaticLabel:!0,cacheOptions:!0,defaultOptions:!1},t.a=g},2601:function(e,t,a){"use strict";var n=a(16),r=a.n(n),o=a(65),l=a.n(o),c=a(0),i=a.n(c);t.a=function(e){return function(t){if(!t.location)return i.a.createElement(e,t);var a=t.location,n=a.search.substr(1);return a.query=l.a.parse(n),i.a.createElement(e,r()({},t,{location:a}))}}},2649:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(16),r=a.n(n),o=a(0),l=a.n(o),c=a(2686),i=a(2593);function s(e){return l.a.createElement(i.a,r()({},e,{pickerComponent:c.a}))}},2654:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n={MANAGE_SITES_PEOPLE:"MANAGE_SITES_PEOPLE",SITE_ABOUT:"SITE_ABOUT"},r={MANAGERS:"managers",FOLLOWERS:"followers",MEMBERS:"members",REQUESTS:"requests",PEOPLE_SEARCH:"people-search",REQUESTS_SEARCH:"requests-search"}},2686:function(e,t,a){"use strict";(function(e){var n=a(1),r=a.n(n),o=a(0),l=a.n(o),c=a(667),i=a(35),s=a(2592);function u(t){var a=t.isMulti,n=t.isValueModel,r=t.placeholder,o=t.icon,c=t.inputId,u=t.valueField,m=t.input,p=void 0===m?{}:m,b=t.defaultParams,d=t.excluded,f=void 0===d?[]:d,O=t.isDisabled,g=t.hasClearButton,h=t.makeOption,j=t.renderOption,v=t.isOptionDisabled,w=t.load,E=t.loadInitialOptions,y=t.cacheOptions,_=t.isLegacyIcon,M=w||Object(s.a)({endpoint:e.Simpplr.Salesforce.User.search,defaultParams:b,valueField:u,labelField:"name",itemFactory:i.e,excluded:f}),k=E||Object(s.b)({endpoint:e.Simpplr.Salesforce.User.get,valueField:u,labelField:"name",itemFactory:i.e});return l.a.createElement(s.c,{isMulti:a,isValueModel:n,hasClearButton:g,placeholder:r,icon:o,isLegacyIcon:_,inputId:c,load:M,loadInitialOptions:k,makeOption:h,renderOption:j,isOptionDisabled:v,value:p.value,onChange:p.onChange,onBlur:p.onBlur,onFocus:p.onFocus,cacheOptions:y,isDisabled:O})}u.propTypes={isMulti:r.a.bool,isValueModel:r.a.bool,hasClearButton:r.a.bool,placeholder:r.a.string,icon:r.a.string,valueField:r.a.string,cacheOptions:r.a.bool,defaultParams:r.a.shape({}),makeOption:r.a.func,renderOption:r.a.func,isOptionDisabled:r.a.func},u.defaultProps={isMulti:!1,icon:"search",defaultParams:{},valueField:"peopleId",cacheOptions:!0,makeOption:function(e){return{value:e.peopleId,label:e.name,item:e}},renderOption:function(e){var t=e.data.item;return l.a.createElement(c.a,{user:t})}},t.a=u}).call(this,a(27))},2724:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return m}));var n=a(4),r=a.n(n),o=a(19),l=function(e,t){return e.getIn(["managePeople",t,"results"],new r.a.Map)},c=function(e,t){return e.getIn(["managePeople",t,"type"])},i=(Object(o.a)([function(e,t){return e.getIn(["managePeople",t],new r.a.Map)}],(function(e){return{loaded:e.get("loaded",!1),loading:e.get("loading",!1),result:e.get("results",new r.a.List)}})),Object(o.a)([l,function(e,t,a){return new r.a.List(a)}],(function(e,t){return t.map((function(t){return e.find((function(e){return e.peopleId===t}))})).filter((function(e){return!!e}))}))),s=(Object(o.a)([l,function(e,t,a){return a}],(function(e,t){return e.find((function(e){return e.peopleId===t}))})),Object(o.a)([function(e,t){return e.getIn(["siteRequests",t,"results"],new r.a.Map)},function(e,t,a){return new r.a.List(a)}],(function(e,t){return e.map((function(e){return t.includes(e.requestedByPeopleId)?e:void 0})).filter((function(e){return!!e}))}))),u=Object(o.a)([i,s,function(e,t,a){return new r.a.List(a)}],(function(e,t){return t.map((function(t){return{user:e.find((function(e){var a=e.peopleId;return t.requestedByPeopleId===a})),request:t}}))})),m=function(e,t){return e.getIn(["managePeople",t,"peopleStats"],new r.a.Map)}},2806:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return h}));var n=a(5),r=a.n(n),o=a(4),l=a.n(o),c=a(0),i=a(595),s=a(950),u=a(131),m=a(2654),p=a(2724),b=a(177),d=a(275);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g=function(t,a,n,r){var o=Object(c.useCallback)((function(e,n){return r===m.b.SITE_ABOUT||"requests"!==a&&"requests-search"!==a?r===m.b.SITE_ABOUT?Object(b.d)(e,n):Object(p.a)(e,t,n):Object(p.d)(e,t,n)}),[t,a,r]);return{endpoint:e.Simpplr.Salesforce.Site.getPeople,resultExtractor:function(e,n){var o=e.result.listOfItems;if(r!==m.b.SITE_ABOUT&&("requests"===a||"requests-search"===a)){var l=o.map((function(e){return e.user})),c=o.map((function(e){return e.request}));return n(Object(i.k)(t,l)),n(Object(s.c)(t,c)),o.map((function(e){var t=e.user;return t.peopleId||t.id}))}return r===m.b.SITE_ABOUT?n(Object(u.i)(o)):n(Object(i.k)(t,o)),o.map((function(e){return e.peopleId||e.id}))},itemSelector:o,itemName:"managePeople",initialParams:new l.a.Map({siteId:t,type:a,term:n})}};function h(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return Object(d.a)(O(O({},g(e,t,a,n)),r))}}).call(this,a(27))},2935:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(208),l=a(55),c=a(667),i=a(2649),s=a(242),u=a(113),m=a(3),p=a(47),b=a(3518);function d(e){var t=e.data.item,a=t.isMember&&Object(m.a)("modal.site_members_and_followers.already_member")||t.isFollower&&Object(m.a)("modal.site_members_and_followers.already_follower");return r.a.createElement(c.a,{user:t,info:a})}function f(e){var t=e.site,a=t.siteId,n=t.access,c=e.close,u=e.prependId,f=e.term,O=Object(b.a)(a,c,u,f),g=O.submitHandler,h=O.handleAddAnother,j="private"===n||"unlisted"===n;return r.a.createElement(o.b,{onSubmit:g,initialValues:{membershipType:j?"member":"follower"}},(function(e){var t=e.submitting,n=e.invalid,u=e.handleSubmit,b=e.form,f=e.values,O=f.sfUserId,g=f.membershipType;return r.a.createElement("form",{onSubmit:u},r.a.createElement("div",{className:"Modal-content Modal-content--forms"},r.a.createElement("div",{className:"u-marg-b--medium"},r.a.createElement(o.a,{component:i.a,label:Object(m.a)("modal.site_members_and_followers.select_person"),placeholder:Object(m.a)("common.search_placeholder"),name:"sfUserId",valueField:"sfUserId",defaultParams:{includeMemberTypeForSite:a},hasClearButton:!0,isStaticLabel:!1,cacheOptions:!1,hasLabelAbove:!0,isLegacyIcon:!0,validate:p.E,makeOption:function(e){return{value:e.sfUserId,label:e.name,item:e}},isOptionDisabled:function(e){var t=e.item,a=t.isMember,n=t.isFollower;return a||n},renderOption:d})),!j&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"u-marg-b--small u-pad-t--xsmall type--500 type--h6"},Object(m.a)("common.user_type")),r.a.createElement("div",{className:"u-marg-b--medium"},r.a.createElement(o.a,{component:s.a,name:"membershipType",validate:p.E,options:[{label:Object(m.a)("common.site_follower"),value:"follower"},{label:Object(m.a)("common.site_member"),value:"member"}]})))),r.a.createElement("div",{className:"Strip Strip--modal u-pad-t--mediumlarge u-pad-b--mediumlarge"},r.a.createElement("div",{className:"u-sizeFill u-textLeft"},r.a.createElement("button",{type:"button",className:"type--brand Button--large u-pad-l--none",onClick:c},Object(m.a)("button_label.cancel"))),r.a.createElement(l.a,{size:"large",label:Object(m.a)("button_label.add_another"),disabled:t||n,onClick:function(){return h(b.reset,O,g)}}),r.a.createElement(l.a,{type:"submit",size:"large",label:Object(m.a)("common.add_person"),appearance:"brand",disabled:t||n})))}))}f.propTypes={},t.a=Object(u.a)((function(){return{title:Object(m.a)("modal.site_members_and_followers.add"),classes:["Modal--small"]}}))(f)},2936:function(e,t,a){"use strict";var n=a(1),r=a.n(n),o=a(0),l=a.n(o),c=a(18),i=a(595),s=a(215),u=a(147),m=a(274),p=a(2654),b=(a(654),a(51)),d=a(2724),f=a(3),O=a(3043),g=function(e){var t=e.site,a=e.baseUrl,n=e.hideContactBar,r=e.showFollow,p=e.showSiteRelationLabel,b=e.showOptionsMenu,g=e.showMembershipRequestsTab,h=e.pageName,j=e.listing,v=e.match.params.type,w=t.access,E=t.siteId,y=t.isMembershipAutoApproved,_="unlisted"===w,M="unlisted"===w||"private"===w,k=Object(c.useDispatch)();Object(o.useEffect)((function(){k(Object(i.b)(E))}),[E,k,v]);var C=Object(c.useSelector)((function(e){return Object(d.b)(e,E)})),S=(C.get("loading"),C.get("loaded")),F=C.get("result");if(!S)return l.a.createElement(s.a,null);var I=F.get("ownerAndManagerCount"),P=F.get("memberCount"),A=F.get("followerCount"),L=F.get("requestCount");return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"u-marg-b--medium"},l.a.createElement(m.a,{isPadded:!1},l.a.createElement(u.a,{to:"".concat(a,"/managers"),label:l.a.createElement(l.a.Fragment,null,Object(f.a)("manage_site.tab.owner_and_managers_label")," ",l.a.createElement("span",{className:"type--secondary"},"(",I,")"))}),l.a.createElement(u.a,{to:"".concat(a,"/members"),label:l.a.createElement(l.a.Fragment,null,Object(f.a)("manage_site.tab.members_label")," ",l.a.createElement("span",{className:"type--secondary"},"(",P,")"))}),!M&&l.a.createElement(u.a,{to:"".concat(a,"/followers"),label:l.a.createElement(l.a.Fragment,null,Object(f.a)("manage_site.tab.followers_label")," ",l.a.createElement("span",{className:"type--secondary"},"(",A,")"))}),g&&!_&&!y&&l.a.createElement(u.a,{to:"".concat(a,"/requests"),label:l.a.createElement(l.a.Fragment,null,Object(f.a)("manage_site.tab.membership_requests_label")," ",l.a.createElement("span",{className:"type--secondary"},"(",L,")"))}))),l.a.createElement(O.a,{key:v,type:v,site:t,listing:j,hideContactBar:n,showFollow:r,showSiteRelationLabel:p,showOptionsMenu:b,pageName:h}))};g.propTypes={site:r.a.instanceOf(b.a).isRequired,params:r.a.shape({}),hideContactBar:r.a.bool,showFollow:r.a.bool,showSiteRelationLabel:r.a.bool,showOptionsMenu:r.a.bool,showMembershipRequestsTab:r.a.bool,pageName:r.a.string},g.defaultProps={hideContactBar:!0,showFollow:!1,showSiteRelationLabel:!0,showOptionsMenu:!0,showMembershipRequestsTab:!0,pageName:p.b.MANAGE_SITES_PEOPLE},t.a=g},3043:function(e,t,a){"use strict";var n=a(16),r=a.n(n),o=a(1),l=a.n(o),c=a(0),i=a.n(c),s=a(18),u=a(595),m=a(241),p=a(2935),b=a(70),d=a(129),f=a(1035),O=(a(2806),a(226)),g=a(51),h=a(3),j=a(20),v=a.n(j),w=a(34),E=a.n(w),y=(a(4),a(36)),_=a(1003),M=a(769),k=a(227),C=a(2654),S=a(30),F=a(14),I=a(301);function P(e){var t=e.makeOwner,a=e.siteStorage,n=e.user,r=n.hasConnectedGoogleDriveAccount,o=n.hasConnectedDropboxAccount,l=n.hasConnectedOneDriveAccount,c=n.hasConnectedSharePointAccount,u=n.canSPTransferOwnership,m=n.name,p=!1,b=!1,d=Object(s.useDispatch)();"googledrive"===a&&r&&(p=!0),"dropbox"===a&&o&&(p=!0),"onedrive"===a&&l&&(p=!0),"sharepoint"===a&&c&&(p=!0,u||(b=!0)),"intranet"===a&&(p=!0),"sharepoint"!==a||c||(b=!0);var f=function(){if("sharepoint"===a)return!p||!u?(d(Object(F.f)(Object(h.a)("site.members.make_owner_failure",{name:m}))),i.a.createElement("div",null,i.a.createElement("p",null,Object(h.a)("modal.alert.make_owner_sharepoint_failed.effect1",{name:m})),i.a.createElement("p",null,Object(h.a)("modal.alert.make_owner_sharepoint_failed.effect2")))):i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,Object(h.a)("modal.alert.make_owner.text")),i.a.createElement("ul",null,i.a.createElement("li",null,Object(h.a)("modal.alert.make_owner_site_storage_connected.effect1",{service:Object(h.a)("app.".concat(a))})),i.a.createElement("li",null,Object(h.a)("modal.alert.make_owner_sharepoint_connected.effect2"))));if("googledrive"===a){var e=p?i.a.createElement(i.a.Fragment,null,i.a.createElement("li",null,Object(h.a)("modal.alert.make_owner_site_storage_connected.effect1",{service:Object(h.a)("app.".concat(a))})),i.a.createElement("li",null,Object(h.a)("modal.alert.make_owner_googledrive_connected.effect2"))):i.a.createElement(i.a.Fragment,null,i.a.createElement("li",null,Object(h.a)("modal.alert.make_owner_googledrive_disconnected.effect1")),i.a.createElement("li",null,Object(h.a)("modal.alert.make_owner_googledrive_disconnected.effect2")));return i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,Object(h.a)("modal.alert.make_owner.text")),i.a.createElement("ul",null,e))}return i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,Object(h.a)("modal.alert.make_owner.text")),!p&&i.a.createElement("ul",null,i.a.createElement("li",null,Object(h.a)("modal.alert.make_owner.effect1",{service:Object(h.a)("app.".concat(a))})),i.a.createElement("li",null,Object(h.a)("modal.alert.make_owner.effect2",{service:Object(h.a)("app.".concat(a))}))))};return i.a.createElement(I.a,{title:Object(h.a)("modal.alert.make_owner.title"),buttonText:Object(h.a)("modal.alert.make_owner.title"),onConfirm:t,hideButtons:b},i.a.createElement(f,null))}P.propTypes={makeOwner:l.a.func,siteStorage:l.a.string};var A=P;function L(e){var t=e.removeManager;return i.a.createElement(I.a,{title:Object(h.a)("modal.alert.remove_manager.title"),buttonText:Object(h.a)("button_label.remove"),onConfirm:t},i.a.createElement("p",null,Object(h.a)("modal.alert.remove_manager.text")))}L.propTypes={removeManager:l.a.func};var T=L;function R(e){var t=e.removePeople,a=(e.type,e.user),n=e.site,r=n.isOwner,o=n.isManager,l=n.storageProvider,c=n.access,s=n.hasPages,u=n.hasEvents,m=n.hasAlbums,p=e.makeOwner,b=e.makeMember,d=e.makeManager,f=e.makeFollower,g=e.makeContentManager,j=e.removeManager,w=e.removeContentManager,y=e.isAppManager,C=e.isSystemAdmin,S=e.isCurrentUser,F=e.history,I=Object(O.c)(i.a.createElement(T,{removeManager:j})).open,P=Object(O.c)(i.a.createElement(A,{user:a,siteStorage:l,makeOwner:p})).open,L="private"===c||"unlisted"===c,R=s||u||m,B=a.isFollower,x=a.isMember,D=a.isManager,N=a.isContentManager,q=a.isOwner,U=a.canMakeManager,V=a.canMakeNotManager,z=a.canMakeContentManager,G=a.canMakeNotContentManager,W=a.canMakeOwner,H=a.canRemove,J={makeFollower:[],main:[],remove:[]};if(q)return null;var Q=function(){var e=E()(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:!S||C||y||window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return B&&J.main.push(i.a.createElement(k.a,{key:"makeMember",label:Object(h.a)("manage_site.people.make_member.label"),onSelect:b})),D&&V?J.main.push(i.a.createElement(k.a,{key:"removeManager",label:Object(h.a)("manage_site.people.remove_manager.label"),onSelect:I})):!D&&U&&J.main.push(i.a.createElement(k.a,{key:"makeManager",label:Object(h.a)("manage_site.people.make_manager.label"),onSelect:d})),N&&G?J.main.push(i.a.createElement(k.a,{key:"makeContentManager",label:Object(h.a)("manage_site.people.remove_content_manager.label"),onSelect:w})):!N&&z&&R&&J.main.push(i.a.createElement(k.a,{key:"removeContentManager",label:Object(h.a)("manage_site.people.make_content_manager.label"),onSelect:Q})),W&&(r||y||C||o)&&J.main.push(i.a.createElement(k.a,{key:"makeOwner",label:Object(h.a)("manage_site.people.make_owner.label"),onSelect:P})),!x||N||D||L||J.makeFollower.unshift(i.a.createElement(k.a,{key:"makeFollower",label:Object(h.a)("manage_site.people.make_follower.label"),onSelect:f})),H&&J.remove.push(i.a.createElement(k.a,{key:"remove",label:Object(h.a)("manage_site.people.remove_option.label"),onSelect:function(){t(),S&&(L&&!C||!L&&!y)&&F.replace("/sites")}})),J.remove.length||J.main.length||J.makeFollower.length?i.a.createElement(_.a,null,Object.keys(J).map((function(e){return i.a.createElement(M.a,{key:e},J[e])}))):null}R.propTypes={};var B=Object(s.connect)((function(e,t){var a=Object(S.getCurrentUserPermissions)(e);return{isCurrentUser:Object(S.getCurrentUser)(e).get("sfUserId")===t.user.sfUserId,isAppManager:a.get("isAppManager"),isSystemAdmin:a.get("isSystemAdmin")}}),(function(e,t){var a=t.type,n=t.user,r=n.sfUserId,o=n.isManager,l=n.isContentManager,c=n.isMember,i=n.isFollower,s=n.peopleId,m=t.site.siteId,p=t.reload,b=t.removeId;return{removePeople:function(){e(Object(u.j)(m,r)),b(s),a===C.a.MANAGERS||o||l?(e(Object(u.m)(m,"ownerAndManagerCount")),e(Object(u.m)(m,"memberCount"))):c?e(Object(u.m)(m,"memberCount")):i&&e(Object(u.m)(m,"followerCount"))},makeOwner:function(){return E()(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(Object(u.g)(m,r));case 2:a===C.a.FOLLOWERS&&(e(Object(u.m)(m,"followerCount")),e(Object(u.a)(m,"memberCount")),e(Object(u.a)(m,"ownerAndManagerCount"))),a!==C.a.MEMBERS||o||l||e(Object(u.a)(m,"ownerAndManagerCount")),p();case 5:case"end":return t.stop()}}),t)})))()},makeMember:function(){e(Object(u.f)(m,r)),a===C.a.FOLLOWERS&&(e(Object(u.m)(m,"followerCount")),e(Object(u.a)(m,"memberCount")))},makeManager:function(){e(Object(u.e)(m,r)),a===C.a.FOLLOWERS&&(e(Object(u.m)(m,"followerCount")),e(Object(u.a)(m,"memberCount")),e(Object(u.a)(m,"ownerAndManagerCount"))),a===C.a.MEMBERS&&e(Object(u.a)(m,"ownerAndManagerCount"))},makeFollower:function(){e(Object(u.d)(m,r)),a===C.a.MEMBERS&&(e(Object(u.m)(m,"memberCount")),e(Object(u.a)(m,"followerCount")))},makeContentManager:function(){e(Object(u.c)(m,r)),a===C.a.FOLLOWERS&&(e(Object(u.m)(m,"followerCount")),e(Object(u.a)(m,"memberCount")),e(Object(u.a)(m,"ownerAndManagerCount"))),a===C.a.MEMBERS&&e(Object(u.a)(m,"ownerAndManagerCount"))},removeManager:function(){e(Object(u.i)(m,r)),e(Object(u.m)(m,"ownerAndManagerCount"))},removeContentManager:function(){e(Object(u.h)(m,r)),e(Object(u.m)(m,"ownerAndManagerCount"))}}}))(Object(y.k)(R)),x=function(e){var t=e.site,a=e.type,n=e.term,o=e.hideContactBar,l=e.showFollow,g=e.showSiteRelationLabel,j=e.showOptionsMenu,v=e.hasNoResult,w=(e.pageName,e.listing),E=t.siteId,y=t.access,_=w.loading,M=w.loadMore,k=w.reload,C=w.removeId,S=w.canPaginate,F=w.managePeople,I=Object(s.useDispatch)();Object(c.useEffect)((function(){I(Object(u.l)(E,a))}),[I,E,a]);var P,A=Object(O.c)(i.a.createElement(p.a,{site:t,prependId:w.prependId,term:n})).open,L=n&&(v?Object(h.a)("manage_site.people.no_result.label_with_link",{term:n,AddPerson:i.a.createElement("button",{type:"button",className:"type--brand",onClick:A})}):Object(h.a)("manage_site.people.no_result.label",{term:n})),T="requests"===a||"requests-search"===a,R=g&&("managers"===a||"people-search"===a||"members"===a),x=j&&"requests"!==a&&"requests-search"!==a,D=F;return T&&(D=F.map((function(e){return e.user})),P=F.map((function(e){return e.request}))),0===F.size?_?i.a.createElement("div",{className:"Tile-loaderContainer"},i.a.createElement(d.a,null)):F.size||i.a.createElement(b.a,{hasNoBorder:!0,message:L}):i.a.createElement(i.a.Fragment,null,i.a.createElement("ul",null,D.map((function(e,n){return i.a.createElement(f.a,r()({},e.toMap().merge({key:e.id}).toJS(),{user:e,siteId:E,siteType:y,request:P&&P.get(n),hideContactBar:o,showFollow:l,showSiteRelationLabel:R,showUserRequest:T,typeLabel:e.isAppManager&&Object(h.a)("common.permission.app_manager"),showManageOptions:x,ManageOptionsMenu:i.a.createElement(B,{removeId:C,reload:k,user:e,site:t,type:a})}))}))),i.a.createElement(m.a,{canLoad:S,onLoad:M,isLoading:_}))};x.propTypes={site:l.a.instanceOf(g.a).isRequired,type:l.a.string,term:l.a.string,pageName:l.a.string};t.a=x},3518:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return O}));var n=a(20),r=a.n(n),o=a(34),l=a.n(o),c=a(0),i=a(18),s=a(595),u=a(82),m=a(2654),p=a(560),b=a(2724),d=a(26),f=a(3);function O(t,a,n,o){var O=Object(p.a)(),g=O.success,h=O.danger,j=Object(i.useDispatch)(),v=Object(i.useSelector)((function(e){return Object(b.c)(e,t)})),w=Object(c.useCallback)((function(e,a){"follower"!==e||o?"member"!==e||o||j(Object(s.a)(t,"memberCount")):j(Object(s.a)(t,"followerCount")),("follower"===e&&v===m.a.FOLLOWERS||"member"===e&&v===m.a.MEMBERS)&&(j(Object(s.k)(t,a)),a.map((function(e){var t=e.peopleId;return n(t)})))}),[n,j,t,v,o]),E=Object(c.useCallback)((function(e){j("follower"===e?Object(u.addFollowerCount)(t):Object(u.addMemberCount)(t))}),[t,j]);return{submitHandler:Object(c.useCallback)(function(){var n=l()(r.a.mark((function n(o){var l,c,i;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=o.sfUserId,c=o.membershipType,n.prev=1,n.next=4,e.Simpplr.Salesforce.Site.addPeople(t,[{sfUserId:l,membershipType:c}]);case 4:i=n.sent,g(Object(f.a)("modal.site_members_and_followers.add_person_flash")),w(c,i.result),E(c),a(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),h(Object(d.a)(n.t0));case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}(),[t,g,w,E,a,h]),handleAddAnother:Object(c.useCallback)(function(){var a=l()(r.a.mark((function a(n,o,l){var c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.Simpplr.Salesforce.Site.addPeople(t,[{sfUserId:o,membershipType:l}]);case 3:c=a.sent,g(Object(f.a)("modal.site_members_and_followers.add_person_flash")),w(l,c.result),E(l),n(),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),h(Object(d.a)(a.t0));case 13:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e,t,n){return a.apply(this,arguments)}}(),[h,g,t,w])}}}).call(this,a(27))}}]);