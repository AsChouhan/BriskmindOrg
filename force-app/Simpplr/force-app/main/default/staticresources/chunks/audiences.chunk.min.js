(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1001:function(e,a,t){"use strict";var n=t(5),l=t.n(n),r=t(15),c=t.n(r),i=t(1),o=t.n(i),u=t(0),s=t.n(u);function m(e){var a,t=e.children,n=e.title,r=e.icon,i=e.type,o=e.size,u=e.hasContentStyles,m=e.isContentValidationBox,d=e.button,b=c()((a={InfoBox:!0,"InfoBox--small":"small"===o,"InfoBox--medium":"medium"===o,"InfoBox--large":"large"===o,"theme--before--bg":!i,"theme--after--border":!i},l()(a,"InfoBox--".concat(i),i),l()(a,"isContentValidationBox",m),l()(a,"u-displayFlex",!0),a)),p=c()({"InfoBox-inner":!0,"u-flex-1":!0,"u-pad-l--xxlarge":!!r,Content:u,"Content--small":u}),f=c()({"InfoBox-heading":!0,"type--h6":!0,"u-marg-b--xsmall":!0,"type--500":!0});return s.a.createElement("div",{className:b},s.a.createElement("div",{className:p},n&&s.a.createElement("h3",{className:f},n),r&&s.a.createElement("div",{className:"InfoBox-icon"},r),t),d&&s.a.createElement("div",{className:"InfoBox-button"},d))}m.propTypes={title:o.a.string,icon:o.a.node,type:o.a.oneOf(["brand","positive","negative","warning","neutral"]),size:o.a.oneOf(["small","medium","large"]),hasContentStyles:o.a.bool,isContentValidationBox:o.a.bool,button:o.a.node,children:o.a.element},m.defaultProps={size:"medium",hasContentStyles:!0,isContentValidationBox:!1},a.a=m},2650:function(e,a,t){"use strict";var n=t(0),l=t.n(n),r=t(18),c=t(2583),i=t(66),o=t(209),u=t(17),s=t(32),m=t(3);a.a=function(e){var a=e.name,t=e.values,n=Object(o.h)("peopleCustomFieldSingular"),d=Object(r.useSelector)(u.e),b="hireDate"===a&&t[0]?Object(m.a)("hireDateAfter"===t[0].id?"common.date_on_or_after":"common.date_on_or_before",{date:Object(s.e)(t[0].name,i.b)}):t.map((function(e){return e.name})).join(", "),p="category"===a&&n;if(!p){var f=d(a);p=f&&f.singular}return p||(p="hireDate"===a?Object(m.a)("profile_fields.hire_date"):Object(m.a)("profile_fields.".concat(a))),l.a.createElement("div",{key:p,className:"u-whiteSpaceNormal"},l.a.createElement(c.a,{title:"".concat(p,":"),whiteSpaceNormal:!0},b))}},2686:function(e,a,t){"use strict";var n=t(15),l=t.n(n),r=t(1),c=t.n(r),i=t(0),o=t.n(i),u=t(21);t(3);function s(e){var a=e.children,t=e.onClick,n=e.hasButton,r=e.ariaLabel,c=l()({RemovableField:n});return o.a.createElement("div",{className:c},a,n&&o.a.createElement("button",{className:"RemovableField-button",type:"button",onClick:t,"aria-label":r},o.a.createElement(u.a,{name:"circle-close",sourceSize:"24"})))}s.propTypes={children:c.a.node.isRequired,onClick:c.a.func,hasButton:c.a.bool,ariaLabel:c.a.string},s.defaultProps={hasButton:!0},a.a=s},2714:function(e,a,t){"use strict";t.d(a,"b",(function(){return u})),t.d(a,"a",(function(){return s}));var n=t(4),l=t.n(n),r=t(19),c=t(17),i=t(3);function o(e,a){return e.getIn(["audience","values",a])||new l.a.Map}Object(r.a)([o,function(e,a){return a}],(function(e){return e.get("loading",!1)})),Object(r.a)([o,function(e,a){return a}],(function(e){return e.get("loaded",!1)}));var u=Object(r.a)([o,function(e,a){return a}],(function(e){return e.get("result")}));function s(e){var a=function(e,a,t){return{value:e,label:a,disabled:t}},t=new l.a.List(["company","department","division","city","state","country","hireDate","title"]);Object(c.v)(e,"peopleCustomFieldEnabled")&&(t=t.push("category"));var n=Object(c.v)(e,"profileFields").filter((function(e){return t.includes(e.get("name"))})).map((function(t){return a(t.get("name"),"category"===t.get("name")?Object(c.v)(e,"peopleCustomFieldSingular"):Object(i.a)(t.get("name")),!t.get("isUserDisplay")||t.get("isUserEditable"))}));return n=(n=n.concat(Object(c.v)(e,"customFields").filter((function(e){return!!e.get("syncSource")})).map((function(e){return a(e.get("columnName"),e.get("singular"),e.get("isEditable"))})))).sortBy((function(e){return e.label.toLowerCase()}))}},2767:function(e,a,t){"use strict";(function(e){t.d(a,"b",(function(){return b})),t.d(a,"a",(function(){return p}));var n=t(5),l=t.n(n),r=t(4),c=t.n(r),i=t(14),o=t(405),u=t(26),s=t(3);function m(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?m(Object(t),!0).forEach((function(a){l()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function b(a){return Array.isArray(a)||c.a.Iterable.isIterable(a)?{type:o.f,payload:{audiences:a}}:(t=a,function(a){return e.Simpplr.Salesforce.Segment.get(t.segmentId).done((function(e){a({type:o.d,payload:{audience:d({segment:e.result},t)}})})).fail((function(e){var n=Object(u.a)(e);a(Object(i.f)(n)),a({type:o.e,payload:{audience:t},error:n})})).always(e.Simpplr.Loader.hide)});var t}function p(a){return function(t){var n={audienceId:a};return t({type:o.b,payload:n}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.Audience.delete(a).done((function(){t({type:o.c,payload:n});var e=Object(s.a)("audiences.delete.success_flash");t(Object(i.j)(e))})).fail((function(e){var a=Object(u.a)(e);t(Object(i.f)(a)),t({type:o.a,error:n})})).always(e.Simpplr.Loader.hide)}}}).call(this,t(27))},3401:function(e,a,t){"use strict";(function(e){var n=t(20),l=t.n(n),r=t(34),c=t.n(r),i=t(31),o=t.n(i),u=t(24),s=t.n(u),m=t(5),d=t.n(m),b=t(15),p=t.n(b),f=t(2911),g=t(2768),O=t(1),v=t.n(O),j=t(0),E=t.n(j),h=t(208),y=t(18),S=t(2767),_=t(55),C=(t(1001),t(3402)),N=t(3404),I=t(655),w=t(2623),P=t(242),x=t(117),F=t(50),M=t(67),A=t(209),k=t(324),D=t(284),B=t(169),L=t(2714),R=t(120),T=(t(17),t(1252)),q=t(123),V=t(73),U=t(3),G=t(47);function z(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function J(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?z(Object(t),!0).forEach((function(a){d()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var W=Object(g.a)({field:"segmentId",updates:{listOfConditions:function(e,a,t){var n=a.listOfConditions;return void 0===t.segmentId?n:(n||[]).map((function(e){return J(J({},e),{},{values:[]})}))}}}),H=function(a){var t=a.audience,n=a.close,r=a.onSubmit,i=a.warnOnClose,u=Object(y.useDispatch)(),m=Object(k.a)().segmentId,d=Object(y.useSelector)(B.e),b=Object(y.useSelector)(B.f),g=Object(k.b)(),O=g.isAppManager,v=g.isSegmentManager,z=Object(A.h)("isSegmentsEnabled"),H=Object(j.useState)(!1),K=s()(H,2),Q=K[0],X=K[1],Y=Object(y.useSelector)(R.e).map((function(e){return{label:e.name,value:e.segmentId}})),Z=[].concat(o()(O?[{value:F.q,label:Object(U.a)("all_segments.label_full")}]:[]),o()(Y.toJS())),$=Object(y.useSelector)(L.a).filter((function(e){return!e.disabled})).first(),ee=Object(j.useCallback)(function(){var a=c()(l.a.mark((function a(c){var i,o,s,m;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=c,"people"===c.type?delete(i=J(J({},i),{},{listOfConditions:[],listOfADGroup:[]})).segmentId:"adGroup"===c.type?i=J(J({},i),{},{listOfConditions:[],listOfPeople:[]}):(o=i.segmentId===F.q?null:i.segmentId,s=i.listOfConditions.filter((function(e){return e.values.length})),i=J(J({},i),{},{listOfConditions:s,segmentId:o,listOfPeople:[],listOfADGroup:[]})),a.next=4,Object(T.b)(e.Simpplr.Salesforce.Audience.save,t.audienceId,i);case 4:if(m=a.sent,t.audienceId?Object(V.b)(M.u):Object(V.b)(M.o),m){a.next=8;break}return a.abrupt("return");case 8:u(Object(S.b)(m.result)),n(),r(Object(D.c)(m.result));case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[]),ae=Object(j.useMemo)((function(){return t.audienceId?J(J({},t.toJS()),{},{listOfConditions:"conditions"!==t.type?[{name:null==$?void 0:$.value,label:null==$?void 0:$.label,values:[]}]:t.listOfConditions,segmentId:t.segment&&t.segment.segmentId}):{type:"conditions",segmentId:z&&(d||m)||null,listOfConditions:$?[{name:$.value,label:$.label,values:[]}]:[],listOfPeople:[],listOfADGroup:[]}}),[t.audienceId]),te=Object(j.useCallback)((function(e){var a=e.type,t=e.listOfConditions;if("conditions"===a&&!Q&&("conditions"!==a||t.length)){var n=t[0].values;return"hireDate"!==t[0].name||n.length&&n[0].name?n.length?void 0:{listOfConditions:[{values:[Object(U.a)("form_error.valueMissing")]}]}:{listOfConditions:[{values:[{name:Object(U.a)("form_error.valueMissing")}]}]}}}),[z,Q]),ne=[{label:Object(U.a)("audiences.modal.user_attribute_label"),value:"conditions",note:Object(U.a)("audiences.modal.user_attribute_note")},{label:Object(U.a)("audiences.modal.adgroup_label"),value:"adGroup"},{label:Object(U.a)("audiences.modal.specific_user_label"),value:"people"}];return ne.splice(1,1),E.a.createElement(h.b,{onSubmit:ee,initialValues:ae,mutators:f.a,decorators:[W,Object(q.e)(i)],validate:te},(function(e){var a=e.values,t=a.type,l=a.segmentId,r=e.submitting,c=e.handleSubmit;return E.a.createElement("form",{className:p()({Form:!0,"is-disabled":r}),onSubmit:c},E.a.createElement("div",{className:"Modal-content Modal-content--forms"},E.a.createElement("div",{className:"u-marg-b--medium u-pad-b--medium u-border-bottom"},E.a.createElement("p",null,Object(U.a)("audiences.add.description"))),E.a.createElement("div",{className:"u-border-bottom"},E.a.createElement(h.a,{component:x.a,name:"name",hasLabelAbove:!0,hasNoInternalLabel:!0,label:Object(U.a)("audiences.modal.audience_name"),note:"(".concat(Object(U.a)("audiences.modal.audience_name_helper"),")"),validate:G.E}),E.a.createElement("p",{className:"type--example u-marg-t--small u-marg-b--medium"},Object(U.a)("audiences.modal.audience_name_note"))),E.a.createElement(E.a.Fragment,null,E.a.createElement("div",{className:"u-marg-b--medium u-pad-t--medium"},E.a.createElement(h.a,{component:P.a,name:"type",validate:G.E,isStacked:!0,isLight:!0,isNormalLabelText:!0,options:ne,label:Object(U.a)("audiences.modal.audience_members")})),"conditions"===t&&E.a.createElement(E.a.Fragment,null,z&&E.a.createElement("div",{className:"u-marg-b--xsmall"},E.a.createElement(h.a,{component:I.a,name:"segmentId",label:Object(U.a)("common.segment"),options:Z,isDisabled:v&&!O||b,isRequired:!0})),z&&"org"===l&&E.a.createElement("p",{className:"type--example u-marg-t--small u-marg-b--small"},Object(U.a)("audiences.modal.all_audience_note")),E.a.createElement(C.a,{name:"listOfConditions",segmentId:l,setLoading:X,menuPlacement:"auto",shouldRenderTimeField:!1})),"people"===t&&E.a.createElement("div",{className:"u-marg-b--medium"},E.a.createElement(h.a,{component:w.a,isStaticLabel:!1,name:"listOfPeople",placeholder:Object(U.a)("field.people_selector.placeholder"),validate:G.E,isRequired:!0,isValueModel:!0,isMulti:!0})),"adGroup"===t&&E.a.createElement("div",{className:"u-marg-b--medium"},E.a.createElement(h.a,{component:N.a,defaultParams:{selected:!0},isStaticLabel:!1,name:"listOfADGroup",placeholder:Object(U.a)("field.adgroup_selector.placeholder"),validate:G.E,isRequired:!0,isValueModel:!0,isMulti:!0}))),false),E.a.createElement("div",{className:"Strip Strip--modal"},E.a.createElement(_.a,{appearance:"brand",type:"submit",disabled:r||Q&&"conditions"===t,label:Object(U.a)("button_label.save"),size:"large"}),E.a.createElement("button",{type:"button",className:"Strip-cancel",onClick:n},Object(U.a)("button_label.cancel"))))}))};H.propTypes={close:v.a.func.isRequired,onSubmit:v.a.func},H.defaultProps={onSubmit:function(){}},a.a=H}).call(this,t(27))},3402:function(e,a,t){"use strict";(function(e){var n=t(24),l=t.n(n),r=t(1),c=t.n(r),i=t(0),o=t.n(i),u=t(208),s=t(2769),m=t(18),d=t(125),b=t(129),p=t(2686),f=t(3403),g=t(50),O=t(209),v=t(284),j=t(2714),E=t(1252),h=t(3);function y(a){var t=a.name,n=a.segmentId,r=a.setLoading,c=a.menuPlacement,y=a.shouldRenderTimeField,S=Object(O.h)("isSegmentsEnabled"),_=Object(O.h)("availableAudienceFieldTypes").toJS(),C=Object(i.useState)(null),N=l()(C,2),I=N[0],w=N[1],P=Object(i.useRef)(!1);Object(i.useEffect)((function(){r(!I)}),[r,I]);var x=Object(u.d)(t).input.value,F=Object(m.useSelector)(j.a).toJS();if(!I&&!P.current){var M=_.filter((function(e){return"hireDate"!==e.name})).map((function(a){return Object(E.b)(e.Simpplr.Salesforce.Audience.getFieldValues,{segmentId:n===g.q?null:n,field:a.name})}));P.current=!0,Promise.all(M).then((function(e){var a=e.map((function(e){var a=e.result;return{name:a.name,label:a.label,values:a.values}}));w(a)}))}if(!I)return o.a.createElement("div",{className:"u-posRelative u-pad--large"},o.a.createElement(b.a,null));var A=x.map((function(e){return e.name})),k=F.filter((function(e){return!(A.includes(e.value)||e.disabled)}));return o.a.createElement(s.a,{name:t},(function(e){var a=e.fields;return o.a.createElement(o.a.Fragment,null,a.map((function(e,t){var n=x[t].name,l=A.filter((function(e){return e!==n}));if(!F.find((function(e){return e.value===n})))return null;var r=F.filter((function(e){return!l.includes(e.value)})),i=I.find((function(e){return e.name===n})),u=i?i.values:[];return o.a.createElement("div",{key:e},(S||t>0)&&o.a.createElement("div",{className:"u-marg-b--xsmall"},o.a.createElement("div",{className:"TextOnLine"},Object(h.a)("common.and"))),o.a.createElement("div",{className:"u-marg-b--xsmall"},o.a.createElement(p.a,{onClick:function(){return a.remove(t)},hasButton:S||t>0},o.a.createElement(f.a,{field:e,typeOptions:r,valueOptions:u,menuPlacement:c,shouldRenderTimeField:y}))))})),k.length>0&&o.a.createElement("div",{className:"u-marg-t--medium"},o.a.createElement(d.a,{icon:"circle-plus",iconSourceSize:17,fontStyle:"brand",hasCurrentColorIcon:!0,label:Object(h.a)("button_label.add_another"),onClick:function(){return a.push(Object(v.b)({name:k[0].value,label:k[0].label}))}})))}))}y.propTypes={name:c.a.string,setLoading:c.a.func.isRequired,segmentId:c.a.string,menuPlacement:c.a.string,shouldRenderTimeField:c.a.bool},y.defaultProps={shouldRenderTimeField:!0},a.a=y}).call(this,t(27))},3403:function(e,a,t){"use strict";var n=t(15),l=t.n(n),r=t(1),c=t.n(r),i=t(0),o=t.n(i),u=t(208),s=t(853),m=t(655),d=t(1006),b=t(66),p=t(3),f=t(47);function g(e){var a=e.field,t=e.typeOptions,n=e.valueOptions,r=e.menuPlacement,c=e.shouldRenderTimeField,g=l()({"u-displayFlex":!0}),O=Object(u.d)("".concat(a,".name")).input.value,v=Object(u.d)("".concat(a,".label")).input.onChange,j=Object(u.d)("".concat(a,".values")).input.onChange;return Object(i.useEffect)((function(){return v((t.find((function(e){return e.value===O}))||{}).label)}),[O]),o.a.createElement("div",{className:g},o.a.createElement(u.a,{component:m.a,name:"".concat(a,".name"),label:Object(p.a)("common.type"),options:t||[],validate:f.E,onChange:function(e){var a="hireDate"===e.target.value?[{id:"hireDateBefore"}]:[];j(a)}}),"hireDate"===O?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"u-sizeFillAlt u-neg-l--1"},o.a.createElement(u.a,{component:m.a,label:Object(p.a)("common.date_is"),name:"".concat(a,".values[0].id"),options:[{value:"hireDateBefore",label:Object(p.a)("common.date_on_or_before")},{value:"hireDateAfter",label:Object(p.a)("common.date_on_or_after")}]})),o.a.createElement("div",{className:"u-sizeFillAlt u-neg-l--1"},o.a.createElement(u.a,{component:s.a,label:Object(p.a)("common.date"),name:"".concat(a,".values[0].name"),hasTime:!1,includeTimeInValue:!1,dateFormat:b.b,isRequired:!0,shouldRenderTimeField:c}))):o.a.createElement("div",{className:"u-sizeFillAlt u-neg-l--1"},o.a.createElement(u.a,{component:d.a,name:"".concat(a,".values"),placeholder:Object(p.a)("common.select_placeholder"),options:n||[],makeOption:function(e){return{value:e.id||e.name,label:e.name}},isMulti:!0,isValueModel:!0,menuPlacement:r})))}g.propTypes={field:c.a.string.isRequired,typeOptions:c.a.arrayOf(c.a.shape({value:c.a.string.isRequired,label:c.a.string.isRequired})),valueOptions:c.a.arrayOf(c.a.shape({id:c.a.string,name:c.a.string.isRequired})),menuPlacement:c.a.string,shouldRenderTimeField:c.a.bool},a.a=g},3404:function(e,a,t){"use strict";t.d(a,"a",(function(){return u}));var n=t(16),l=t.n(n),r=t(0),c=t.n(r),i=t(3405),o=t(2591);function u(e){return c.a.createElement(o.a,l()({},e,{pickerComponent:i.a}))}},3405:function(e,a,t){"use strict";(function(e){var n=t(1),l=t.n(n),r=t(0),c=t.n(r),i=t(299),o=t(1158),u=t(2590);function s(a){var t=a.isMulti,n=a.isValueModel,l=a.placeholder,r=a.icon,s=a.input,m=void 0===s?{}:s,d=a.defaultParams,b=a.hasClearButton,p=a.excluded,f=void 0===p?[]:p,g=Object(u.a)({endpoint:e.Simpplr.Salesforce.ActiveDirectory.groupSearch,defaultParams:d,valueField:"id",labelField:"label",itemFactory:o.a,excluded:f});return c.a.createElement(u.c,{isMulti:t,isValueModel:n,placeholder:l,icon:r,load:g,makeOption:function(e){return{value:e.adGroupId||e.get("adGroupId"),label:e.label||e.get("label")}},renderOption:function(e){var a=e.data.item;return c.a.createElement(i.a,null,c.a.createElement("div",{className:"Panel-item"},"".concat(a.get("label"))))},value:m.value,onChange:m.onChange,onBlur:m.onBlur,hasClearButton:b,onFocus:m.onFocus})}s.propTypes={isMulti:l.a.bool,isValueModel:l.a.bool,placeholder:l.a.string,icon:l.a.string,defaultParams:l.a.shape({})},s.defaultProps={isMulti:!1,icon:"search",defaultParams:{}},a.a=s}).call(this,t(27))},3406:function(e,a,t){"use strict";(function(e){t.d(a,"a",(function(){return s}));var n=t(5),l=t.n(n),r=t(2767),c=t(3407),i=t(275);function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){l()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(a){return Object(i.a)(u(u({},{endpoint:e.Simpplr.Salesforce.Audience.search,itemSelector:c.a,itemActionCreator:r.b,itemName:"audiences",keyName:"audienceId"}),a))}}).call(this,t(27))},3407:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var n=t(4),l=t.n(n),r=t(19);var c=Object(r.a)([function(e){return e.get("audiences")}],(function(e){return e.map((function(e){return e.get("result")})).filter((function(e){return!!e}))})),i=Object(r.a)([c,function(e,a){return new l.a.List(a)}],(function(e,a){return a.map((function(a){return e.get(a)})).filter((function(e){return!!e}))}))},3408:function(e,a,t){"use strict";(function(e){var n=t(1),l=t.n(n),r=t(0),c=t.n(r),i=t(3409),o=t(55),u=t(129),s=t(52),m=t(113),d=t(654),b=t(284),p=t(3);function f(a){var t=a.audience,n=a.forceClose,l=Object(d.a)(e.Simpplr.Salesforce.Audience.getAudienceUsage,t.get("audienceId")),r=l.loading,s=l.result;return c.a.createElement("div",{className:"u-bg-wash"},r?c.a.createElement(u.a,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(i.a,{usageData:s.usage.active,title:Object(p.a)("audiences.modal.active_audience_title"),noUsageMessage:Object(p.a)("audiences.modal.no_active_audience")}),c.a.createElement(i.a,{usageData:s.usage.recent,title:Object(p.a)("audiences.modal.recent_audience_title"),titleInfo:Object(p.a)("common.last_90_days"),noUsageMessage:Object(p.a)("audiences.modal.no_recent_audience")})),c.a.createElement("div",{className:"Strip Strip--modal"},c.a.createElement(o.a,{type:"submit",label:Object(p.a)("button_label.ok"),onClick:n})))}f.propTypes={audience:l.a.instanceOf(b.a).isRequired},a.a=Object(m.a)((function(e){var a=e.audience.name;return{name:s.i,title:a,classes:["Modal--small"]}}))(f)}).call(this,t(27))},3409:function(e,a,t){"use strict";var n=t(4),l=t.n(n),r=t(0),c=t.n(r),i=t(381),o=t(972),u=t(3);a.a=function(e){var a=e.usageData,t=e.title,n=e.titleInfo,r=e.noUsageMessage,s=a&&Object.keys(a).map((function(e){return new l.a.Map({label:a[e].label,value:a[e].value.map((function(e){return e.label})).join(", ")})}));return c.a.createElement("div",{className:"Modal-content"},c.a.createElement("h4",{className:"type--h6 type--500 u-marg-t--small u-marg-b--medium"},t,n&&c.a.createElement("span",{className:"type--secondary type--400"}," (",n,")")),s?c.a.createElement(o.a,{data:new l.a.List(s),hasNoLastBorder:!0,isFontInherit:!0,isFixedLayout:!1},c.a.createElement(i.a,{label:Object(u.a)("common.type"),width:"35%",height:!0,hasSmallPadding:!0},(function(e){return e.get("label")})),c.a.createElement(i.a,{label:Object(u.a)("common.details"),hasSmallPadding:!0,hasTextTruncate:!0},(function(e){return e.get("value")}))):c.a.createElement("div",{className:"type--secondary"},r))}},4085:function(e,a,t){"use strict";t.r(a);var n=t(16),l=t.n(n),r=t(4),c=t.n(r),i=t(0),o=t.n(i),u=t(18),s=t(1),m=t.n(s),d=t(2767),b=t(1011),p=t(53),f=t(2650),g=t(2593),O=t(2583),v=t(56),j=t(3),E=t(89);function h(e){var a=e.audience,t=e.isAppManager,n=e.isSegmentsEnabled,l=a.type,r=a.listOfConditions,c=a.listOfPeople,u=a.listOfADGroup,s=a.segment;return o.a.createElement(g.a,{layout:"squashed"},t&&n&&"conditions"===l&&o.a.createElement("div",{className:"u-whiteSpaceNormal"},o.a.createElement(O.a,{title:"".concat(Object(j.a)("common.segment"),":")},s?s.name:Object(j.a)("all_segments.label"))),"conditions"===l&&r.map((function(e){var a=e.name,t=e.values;return o.a.createElement(f.a,{key:a,name:a,values:t})})),"people"===l&&o.a.createElement(O.a,{title:"".concat(Object(j.a)("common.person_plural"),":"),isBlock:!0,whiteSpaceNormal:!0},c.map((function(e,a){var t=e.peopleId,n=e.name;return o.a.createElement(i.Fragment,{key:t},a>0&&", ",o.a.createElement(p.a,{to:Object(E.l)(t),className:"u-textInheritColor"},n))}))),"adGroup"===l&&o.a.createElement(O.a,{title:"".concat(Object(j.a)("common.active_directory_group"),":"),isBlock:!0,whiteSpaceNormal:!0},u.map((function(e){return e.label})).join(", ")))}h.propTypes={segment:v.a.segmentLite,audience:v.a.audience.isRequired,isAppManager:m.a.bool},h.defaultProps={isAppManager:!1};var y=h,S=t(165),_=t(241),C=t(55),N=t(381),I=t(972),w=t(215),P=t(3401),x=t(67),F=t(52),M=t(113),A=t(284),k=t(73);function D(e){var a=e.audience,t=e.forceClose,n=e.warnOnClose,l=e.onSubmit;return o.a.createElement(P.a,{audience:a,close:t,warnOnClose:n,onSubmit:l})}D.propTypes={audience:m.a.instanceOf(A.a).isRequired};var B={onOpen:function(e){var a=e.audience&&e.audience.audienceId;Object(k.b)(a?x.t:x.q)},onAfterClose:function(e){var a=e.audience&&e.audience.audienceId;Object(k.b)(a?x.s:x.p)}},L=Object(M.a)((function(e){var a=e.audience.audienceId;return{name:F.c,title:Object(j.a)("audiences.modal.title_".concat(a?"edit":"add")),classes:["Modal--small"]}}),B)(D),R=t(2664),T=t(50),q=t(3406),V=t(204),U=t(30),G=t(120),z=t(17),J=t(42),W=t(1003),H=t(227),K=t(3408),Q=t(20),X=t.n(Q),Y=t(34),Z=t.n(Y),$=t(208);function ee(e){var a=e.audience,t=e.close,n=e.deleteAudience,l=e.hasUsage,r=function(){var e=Z()(X.a.mark((function e(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(a.audienceId);case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement($.b,{onSubmit:r},(function(e){var a=e.handleSubmit,n=e.submitting;return o.a.createElement("form",{onSubmit:a},o.a.createElement("div",{className:"u-bg-wash"},l?o.a.createElement("div",{className:"Modal-content"},o.a.createElement("h4",{className:"type--h6 type--500 u-marg-t--small u-marg-b--small"},Object(j.a)("audiences.modal.delete_effect_title1")),o.a.createElement("ul",{className:"u-blockList--disc u-pad-b--small u-pad-l--medium"},o.a.createElement("li",null,Object(j.a)("audiences.modal.delete_effect_info1")),o.a.createElement("li",null,Object(j.a)("audiences.modal.delete_effect_info6")),o.a.createElement("li",null,Object(j.a)("audiences.modal.delete_effect_info2")),o.a.createElement("li",null,Object(j.a)("audiences.modal.delete_effect_info3")),o.a.createElement("li",null,Object(j.a)("audiences.modal.delete_effect_info4")))):o.a.createElement("div",{className:"Modal-content"},o.a.createElement("h4",{className:"type--h6 type--500 u-marg-t--small u-marg-b--small"},Object(j.a)("audiences.modal.delete_effect_title1")),o.a.createElement("ul",{className:"u-blockList--disc u-pad-b--small u-pad-l--medium"},o.a.createElement("li",null,Object(j.a)("audiences.modal.delete_effect_info5")),o.a.createElement("li",null,Object(j.a)("audiences.modal.delete_effect_info4")))),o.a.createElement("div",{className:"Strip Strip--modal"},o.a.createElement(C.a,{size:"large",type:"submit",label:Object(j.a)("audiences.modal.delete_button_label"),disabled:n,appearance:"brand"}),o.a.createElement("button",{type:"button",className:"Strip-cancel",onClick:t},Object(j.a)("button_label.cancel")))))}))}ee.propTypes={audience:m.a.instanceOf(A.a).isRequired};var ae=Object(M.a)((function(){return{name:F.a,title:Object(j.a)("audiences.modal.delete_audience_title"),classes:["Modal--small"]}}))(ee),te=function(e){var a=e.audience,t=e.deleteAudience,n=e.reload,l=e.hasUsage,r=o.a.createElement(L,{audience:a,onSubmit:n}),c=o.a.createElement(K.a,{audience:a}),i=o.a.createElement(ae,{hasUsage:l,audience:a,deleteAudience:t});return o.a.createElement(S.a,{modal:r},(function(e){return o.a.createElement(S.a,{modal:c},(function(a){return o.a.createElement(S.a,{modal:i},(function(a){return o.a.createElement(W.a,null,o.a.createElement(H.a,{label:Object(j.a)("common.edit"),onSelect:e}),o.a.createElement(H.a,{label:Object(j.a)("common.delete"),onSelect:a}))}))}))}))};function ne(e){var a=e.segment,t=e.children,n=Object(u.useSelector)(U.isCurrentUserAppManager),l=Object(u.useSelector)(z.V),r=Object(u.useSelector)(G.a),s=a?r:n,m=Object(u.useDispatch)(),p=a&&a.segmentId||T.q;Object(i.useEffect)((function(){n&&m(Object(b.c)())}),[]);var f=Object(q.a)({initialParams:new c.a.Map({segmentId:p})}),g=f.audiences,O=f.loadMore,v=f.canPaginate,E=f.loading,h=f.loaded,P=f.reload,F=f.prependId,M=f.removeId,D=o.a.createElement(L,{audience:new A.a({segment:a}),onSubmit:function(e){var a=e.audienceId;return F(a)}}),B=Object(i.useCallback)((function(e){return m(Object(d.a)(e)).then((function(){Object(k.b)(x.r),M(e)}))}),[]),V=function(e,a,t,n,l){return l?e||a?"".concat(t,", ").concat(n):"".concat(t," & ").concat(n):n},W=function(e,a){return"".concat(e,"\n\t\t").concat(e>1?Object(j.a)("common.".concat(a,"_plural_small")):Object(j.a)("common.".concat(a,"_small")))},H=function(e){var a=e.subscriptionCount,t=e.newsletterCount,n=e.alertCount,l=e.socialCampaignCount,r=!1,c="";if(a&&(c=W(a,"subscription"),r=!0),t){var i=W(t,"newsletter");c=V(n,l,c,i,r),r=!0}if(n){var o=W(n,"alert");c=V(void 0,l,c,o,r),r=!0}if(l){var u=W(l,"campaign");c=V(void 0,void 0,c,u,r),r=!0}return c};return o.a.createElement(o.a.Fragment,null,s&&o.a.createElement("div",null,o.a.createElement("div",{className:"u-floatRight u-marg-b--large"},o.a.createElement(S.a,{modal:D},(function(e){return o.a.createElement(C.a,{onClick:e,appearance:"brand"},Object(j.a)("audiences.add.button"))})))),t,E&&!h?o.a.createElement(w.a,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,{data:g,hasNoLastBorder:!0,isFontInherit:!0},o.a.createElement(N.a,{label:Object(j.a)("audience"),width:"40%"},(function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"type--fs15 type--500 u-marg-b--xsmall"},e.name),o.a.createElement(y,{audience:e,isAppManager:n,isSegmentsEnabled:l}))})),o.a.createElement(N.a,{label:Object(j.a)("audiences.active.label"),textAlign:"left",width:"20%",hasExtraPadding:!0,whiteSpaceNormal:!0},(function(e){var a=e.usage;return H(a)||o.a.createElement("div",{className:"type--note type--b2 type--500"},Object(j.a)("common.none"))})),o.a.createElement(N.a,{label:Object(j.a)("common.user_plural"),textAlign:"center",width:"15%",hasExtraPadding:!0},(function(e){var a=e.segment,t=e.audienceId,n=e.audienceCount,l=Object(J.c)(n);return n<=0?l:o.a.createElement(S.a,{modal:o.a.createElement(R.a,{segmentId:a?a.segmentId:null,audienceId:t})},(function(e){return o.a.createElement("button",{type:"button",className:"type--fauxLink u-textInheritColor",onClick:e},l)}))})),o.a.createElement(N.a,{width:"20%",label:Object(j.a)("listing.heading.created_by")},(function(e){var a=e.modifiedBy||e.createdBy;return a&&o.a.createElement("a",{href:a.get("url"),className:"u-textInheritColor"},a.get("name"))})),s&&o.a.createElement(N.a,{width:"5%",textAlign:"right",label:Object(j.a)("manage_sites.table.options")},(function(e){return o.a.createElement(te,{hasUsage:H(e.usage),audience:e,deleteAudience:B,reload:P})}))),o.a.createElement(_.a,{canLoad:v,onLoad:O,isLoading:E})))}ne.propTypes={segment:m.a.instanceOf(V.a),children:m.a.node};var le=ne,re=t(190),ce=t(212),ie=t(129),oe=t(380),ue=t(1997),se=t(409),me=t(352);var de=t(169);a.default=function(e){var a=Object(j.a)("page_title.audiences"),t=Object(u.useSelector)(U.isCurrentUserAppManager),n=Object(u.useSelector)(G.a),r=Object(u.useSelector)(z.V),s=Object(u.useSelector)(U.getCurrentUserSegmentId),m=Object(u.useSelector)(G.e),d=Object(u.useSelector)(de.f),p=e.match.params.segmentId,f=!t&&r,g=Object(u.useSelector)((function(e){return p?Object(G.d)(e,p)||new c.a.Map:null})),O=!!g&&g.get("loading"),v=!g||g.get("loaded"),E=g?g.get("result"):null,h=m.map((function(e){return{value:e.segmentId,label:e.name}})).unshift({value:T.q,label:Object(j.a)("all_segments.label_full")}).toArray();return function(e){var a=Object(u.useSelector)(U.isCurrentUserAppManager),t=Object(u.useSelector)(z.V),n=Object(u.useSelector)(U.getCurrentUserSegmentId),l=Object(u.useSelector)((function(a){return e?Object(G.d)(a,e)||new c.a.Map:null})),r=!!l&&l.get("loading"),o=!!l&&l.get("loaded"),s=Object(u.useDispatch)(),m=function(){!e||o||r||s(Object(b.b)(e))};Object(i.useEffect)((function(){m()}),[e]),Object(i.useEffect)((function(){m(),n&&e!==n&&s(Object(b.b)(n)),a&&t&&s(Object(b.c)())}),[])}(e.match.params.segmentId),O?o.a.createElement(ie.a,null):t||n?!t&&p&&p!==s?o.a.createElement(ue.a,null):!p||O||E?o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"column"},o.a.createElement("div",{className:"Page"},v?o.a.createElement(o.a.Fragment,null,o.a.createElement(re.a,l()({},me.c,{text:a})),o.a.createElement("header",{className:"Page-header ".concat(f&&"Page-header--noBorder")},o.a.createElement("div",{className:"Page-header-inner"},o.a.createElement("h1",{className:"Page-heading type--h4"},a))),o.a.createElement(le,{segment:E,key:E&&E.segmentId||"allSegments"},t&&r&&o.a.createElement("div",{className:"u-floatLeft u-neg-t--small u-marg-b--xlarge",style:{minWidth:"310px"}},o.a.createElement(oe.a,{label:Object(j.a)("manage_app.segments.segment"),icon:"navigatedown",isStaticLabel:!0},o.a.createElement(ce.a,{selected:p||T.q,options:h,onChange:function(a){e.history.push("/audiences/".concat(a))},isDisabled:d}))))):o.a.createElement(w.a,null)))):o.a.createElement(se.a,null):o.a.createElement(ue.a,null)}}}]);