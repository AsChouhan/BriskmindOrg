(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{1001:function(e,t,n){"use strict";var a=n(5),r=n.n(a),i=n(15),o=n.n(i),c=n(1),l=n.n(c),s=n(0),u=n.n(s);function d(e){var t,n=e.children,a=e.title,i=e.icon,c=e.type,l=e.size,s=e.hasContentStyles,d=e.isContentValidationBox,p=e.button,m=o()((t={InfoBox:!0,"InfoBox--small":"small"===l,"InfoBox--medium":"medium"===l,"InfoBox--large":"large"===l,"theme--before--bg":!c,"theme--after--border":!c},r()(t,"InfoBox--".concat(c),c),r()(t,"isContentValidationBox",d),r()(t,"u-displayFlex",!0),t)),f=o()({"InfoBox-inner":!0,"u-flex-1":!0,"u-pad-l--xxlarge":!!i,Content:s,"Content--small":s}),b=o()({"InfoBox-heading":!0,"type--h6":!0,"u-marg-b--xsmall":!0,"type--500":!0});return u.a.createElement("div",{className:m},u.a.createElement("div",{className:f},a&&u.a.createElement("h3",{className:b},a),i&&u.a.createElement("div",{className:"InfoBox-icon"},i),n),p&&u.a.createElement("div",{className:"InfoBox-button"},p))}d.propTypes={title:l.a.string,icon:l.a.node,type:l.a.oneOf(["brand","positive","negative","warning","neutral"]),size:l.a.oneOf(["small","medium","large"]),hasContentStyles:l.a.bool,isContentValidationBox:l.a.bool,button:l.a.node,children:l.a.element},d.defaultProps={size:"medium",hasContentStyles:!0,isContentValidationBox:!1},t.a=d},2584:function(e,t,n){e.exports={panelWrapper:"ListingFilters-module-panelWrapper___E9iuH",panel:"ListingFilters-module-panel___3mAnk",rightFilters:"ListingFilters-module-rightFilters___2rGKV",button:"ListingFilters-module-button___1v-7v",sortBy:"ListingFilters-module-sortBy___2vVVz",activeFilterCount:"ListingFilters-module-activeFilterCount___3F0sC"}},2589:function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(0),o=n.n(i),c=n(2584),l=n.n(c),s=n(663),u=n(55),d=n(160),p=n(3);function m(e){var t=e.panel,n=e.filterCount;return o.a.createElement(s.a,{placement:"bottom-end",modifiers:[{name:"flip",enabled:!1},{name:"offset",options:{offset:[0,10]}}],launcher:function(e){var t=e.ref,a=e.toggle,r=e.isActive;return o.a.createElement(u.a,{size:"large",isFieldHeight:!0,appearance:n>0?"brand":"normal",label:"".concat(Object(p.a)("button_label.filters")).concat(n>0?" (".concat(n,")"):""),icon:"filter",buttonRef:t,onClick:function(e){e.preventDefault(),a()},ariaExpanded:r})},popover:function(e){return o.a.createElement("div",{className:"ListingFilters-panelWrapper"},o.a.createElement("div",{className:l.a.panelWrapper,"data-placement":e.placement,style:e.style,ref:e.ref},o.a.createElement(d.a,{hArrowPosition:"right",vArrowPosition:"top",hasArrow:!0},o.a.createElement("div",{className:l.a.panel},t(e)))))}})}m.propTypes={filterCount:r.a.number.isRequired,panel:r.a.func.isRequired},m.defaultProps={};var f=m;function b(e){var t=e.filterField,n=e.termField,a=e.sortField,r=e.panel,i=e.filterCount,c=e.addButton;return o.a.createElement("div",null,o.a.createElement("div",{className:"row u-marg-b--mediumlarge"},o.a.createElement("div",{className:"column medium-6"},o.a.createElement("div",{className:"u-grid"},t&&o.a.createElement("div",{className:"u-grid-item medium-5 large-5"},t),o.a.createElement("div",{className:"u-grid-item medium-7 large-7"},n))),o.a.createElement("div",{className:"column medium-6"},o.a.createElement("div",{className:l.a.rightFilters},a&&o.a.createElement("div",{className:l.a.sortBy},a),r&&o.a.createElement("div",{className:l.a.button},o.a.createElement(f,{filterCount:i,panel:r})),c&&o.a.createElement("div",{className:l.a.button},c)))))}b.propTypes={filterField:r.a.node,termField:r.a.node,sortField:r.a.node,filterCount:r.a.number,panel:r.a.func,addButton:r.a.node},b.defaultProps={};t.a=b},2600:function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(0),o=n.n(i),c=n(18),l=n(21);function s(e){var t=e.message;return o.a.createElement("div",{className:"ErrorPage ErrorPage--fixed"},o.a.createElement("div",{className:"ErrorPage-inner"},o.a.createElement("div",{className:"ErrorPage-iconContainer u-marg-b--medium"},o.a.createElement(l.a,{isLegacy:!0,name:"alert"})),o.a.createElement("h4",{className:"type--h1"},t)))}s.propTypes={message:r.a.string.isRequired};var u=s,d=n(167),p=n(3);function m(e){var t=e.children;return"mobile"===e.viewport?o.a.createElement("div",{className:"u-sm-show"},o.a.createElement(u,{message:Object(p.a)("common.page_not_available_on_mobile")})):t||null}m.propTypes={children:r.a.oneOfType([r.a.arrayOf(r.a.element),r.a.element])};t.a=Object(c.connect)((function(e){return{viewport:Object(d.a)(e)}}))(m)},2721:function(e,t,n){"use strict";var a=n(10),r=n.n(a),i=n(11),o=n.n(i),c=n(7),l=n.n(c),s=n(12),u=n.n(s),d=n(13),p=n.n(d),m=n(8),f=n.n(m),b=n(5),g=n.n(b),h=n(4),v=n.n(h),y=n(1),w=n.n(y),O=n(0),E=n.n(O),N=n(18),S=n(61),j=n(14),k=n(496),_=n(296),F=n(30),C=n(855),T=n(161),x=n(17),P=n(3),A=n(104),I=n(658),R=n(1021);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var r=f()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var D=function(e,t){if(null!=e&&e.includes("post")){if(t===_.c.POST)return Object(P.a)("feed.video_files_feed_posts_not_playable");if(t===_.c.COMMENT)return Object(P.a)("feed.video_files_comments_not_playable")}else if(null!=e&&e.includes("reply"))return Object(P.a)("feed.video_files_reply_not_playable");return Object(P.a)("feed.video_files_not_playable")},M=function(e){u()(n,e);var t=L(n);function n(e){var a;return r()(this,n),(a=t.call(this,e)).onNewFilesSelected=a.onNewFilesSelected.bind(l()(a)),a.onExistingFilesSelected=a.onExistingFilesSelected.bind(l()(a)),a}return o()(n,[{key:"componentDidMount",value:function(){this.triggerChange(this.props.fileTransports)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){v.a.is(this.props.fileTransports,e.fileTransports)||this.triggerChange(e.fileTransports)}},{key:"onNewFilesSelected",value:function(e){var t=this.props,n=t.isPendingUpload,a=t.siteId;return n?this.props.selectPendingFilesToUpload(this.getValidFiles(e)):this.props.uploadFiles(this.getValidFiles(e),a)}},{key:"onExistingFilesSelected",value:function(e){return this.props.onSelect(this.getValidFiles(e).map((function(e){return e.get("id")})))}},{key:"getValidFiles",value:function(e){var t=this,n=(Array.isArray(e)?e:[e]).filter((function(e){return!(e instanceof v.a.Map)||0===t.props.fileTransports.filter((function(t){return t.getIn(["result","id"])===e.get("id")})).size}));if(!this.props.maxFiles||1===this.props.maxFiles||0===n.length)return n;var a=this.props.maxFiles-this.props.fileTransports.size,r=n.slice(0,a);return n.length!==r.length&&this.props.addMaxFilesWarningFlash(),r.length>0?r:[]}},{key:"triggerChange",value:function(e){"function"==typeof this.props.onFilesChange&&this.props.onFilesChange(e.map((function(e){return e.get("result")})))}},{key:"render",value:function(){var e=this.props,t=e.canUploadAllFileTypes,n=e.instanceId,a=e.onRemove,r=e.maxFiles,i=e.siteId,o=e.showPreviews,c=e.fileTransports,l=e.allowExternalFileOptions,s=e.hasIntranetOption,u=e.isBoxEnabled,d=e.isGDriveEnabled,p=e.isDropboxEnabled,m=e.isOneDriveEnabled,f=e.isSharePointEnabled,b=e.isCRMEnabled,g=e.hasConnectedBoxAccount,h=e.hasConnectedGoogleDriveAccount,v=e.hasConnectedDropboxAccount,y=e.hasConnectedOneDriveAccount,w=e.hasConnectedSharePointAccount,O=e.isSmall,N=e.icon,S=e.width,j=e.fileType,_=e.customAddMessage,F=e.dropzoneRef,C=e.handleDragAndDrop,T=e.isButtonsLayout,x=!r||r>1,P=l&&u&&g,A=l&&p&&v,I=l&&b,L=l&&d&&h,D=l&&m&&y,M=l&&f&&w;return E.a.createElement(E.a.Fragment,null,c.size<r&&E.a.createElement(k.a,{canUploadAllFileTypes:t,customAddMessage:_,onUpload:this.onNewFilesSelected,onSelect:this.onExistingFilesSelected,hasBoxOption:P,isButtonsLayout:T,hasDropboxOption:A,hasCrmOption:I,hasGoogleDriveOption:L,hasOneDriveOption:D,hasSharePointOption:M,mediaManagerProps:{defaultSiteId:i||null},mediaManagerId:n,hasIntranetOption:s,allowExternalFileOptions:l,isMulti:x,isCompact:O,icon:O?N:"dropzone-files",fileType:j,ref:F,handleDragAndDrop:C}),o&&c.size>0&&E.a.createElement("div",{className:"PostForm-fileList--post"},E.a.createElement(R.a,{files:c,onClear:a,enableLightbox:!1,enableDownload:!1,isEditing:!0,width:S})))}}]),n}(E.a.Component);g()(M,"propTypes",{canUploadAllFileTypes:w.a.bool,instanceId:w.a.string.isRequired,onSelect:w.a.func.isRequired,onRemove:w.a.func.isRequired,onFilesChange:w.a.func,maxFiles:w.a.number,showPreviews:w.a.bool,isPendingUpload:w.a.bool,allowExternalFileOptions:w.a.bool,hasIntranetOption:w.a.bool,isSmall:w.a.bool,icon:w.a.string,width:w.a.number,dropzoneRef:w.a.oneOfType([w.a.node,w.a.object]),isNativeVideoEnabled:w.a.bool,handleDragAndDrop:w.a.func,isButtonsLayout:w.a.bool}),g()(M,"defaultProps",{canUploadAllFileTypes:!1,showPreviews:!0,isPendingUpload:!1,allowExternalFileOptions:!0,hasIntranetOption:!0,isSmall:!1,icon:"albums",isNativeVideoEnabled:!1,handleDragAndDrop:function(){},isButtonsLayout:!1}),t.a=Object(N.connect)((function(e,t){return{siteId:Object(C.d)(e),fileTransports:Object(T.d)(e,t.selectedIds),isBoxEnabled:Object(x.Q)(e,"box"),isGDriveEnabled:Object(x.Q)(e,"googledrive"),isDropboxEnabled:Object(x.Q)(e,"dropbox"),isOneDriveEnabled:Object(x.Q)(e,"onedrive"),isSharePointEnabled:Object(x.Q)(e,"sharepoint"),isCRMEnabled:Object(x.Q)(e,"crm"),hasConnectedBoxAccount:Object(F.hasConnectedBoxAccount)(e),hasConnectedGoogleDriveAccount:Object(F.hasConnectedGoogleDriveAccount)(e),hasConnectedDropboxAccount:Object(F.hasConnectedDropboxAccount)(e),hasConnectedOneDriveAccount:Object(F.hasConnectedOneDriveAccount)(e),hasConnectedSharePointAccount:Object(F.hasConnectedSharePointAccount)(e)}}),(function(e,t){var n=t.instanceId,a=t.feedPostformType,r=t.isNativeVideoEnabled,i=t.maxFiles,o=t.onSelect,c=t.onSelectPendingFile,l=t.onReplace;return{addMaxFilesWarningFlash:function(){return e(Object(j.l)(Object(P.a)("feed.post_form.max_files_reached",{max:i})))},selectPendingFilesToUpload:function(t){return t.map((function(t){if(Object(A.g)(t)&&!r){var i=D(n,a);e(Object(j.l)(i))}return e(Object(S.selectPendingFilesToUpload)(t,(function(e){o(e),c(t,e)})))}))},uploadFiles:function(t,i){return t.map((function(t){var c=Object(A.g)(t);if(c&&!r){var s=D(n,a);e(Object(j.l)(s))}var u="",d=function(e){u!==e&&(u=e,o(e))};return Object(I.a)(n,new Promise((function(n,a){r&&c?e(Object(S.uploadToKaltura)(t,i,d)).then((function(e){var t=e.file;l(u,t.get("externalFileId")),n()})):e(Object(S.upload)(t)).then((function(e){var t=e.id,a=e.jqXhr;d(t),a.then((function(e){l(t,e.get("id")),n()})).catch(n)})).catch(a)})))}))}}}),null,{forwardRef:!0})(M)},2999:function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return y})),n.d(t,"g",(function(){return w})),n.d(t,"e",(function(){return O}));var a=n(5),r=n.n(a),i=n(4),o=n.n(i),c=n(61),l=n(14),s=n(367),u=n(26),d=n(3);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){return{type:s.d,payload:{serviceNowTicket:e}}}function b(e){return Array.isArray(e)||o.a.Iterable.isIterable(e)?{type:s.e,payload:{serviceNowTickets:e}}:f(e)}function g(){return function(t){return t({type:s.b}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.ServiceNow.getCategory().done((function(e){t({type:s.c,results:e.result.listOfItems})})).fail((function(e){var n=Object(u.a)(e);t(Object(l.f)(n)),t({type:s.a,error:n})})).always(e.Simpplr.Loader.hide),!0}}function h(t){return function(n){return n({type:s.g}),e.Simpplr.Loader.show(),e.Simpplr.Salesforce.ServiceNow.getSubCategory(t).done((function(e){n({type:s.h,results:e.result.listOfItems})})).fail((function(e){var t=Object(u.a)(e);n(Object(l.f)(t)),n({type:s.f,error:t})})).always(e.Simpplr.Loader.hide),!0}}function v(t,n){return function(a){return e.Simpplr.Loader.show(),e.Simpplr.Salesforce.ServiceNow.createIncident(t).then((function(e){return a(f(m(m({},e.result),{},{isNew:!0}))),n(e.result.sysId),e.result.id})).fail((function(e){var t=Object(u.a)(e);a(Object(l.f)(t))})).always(e.Simpplr.Loader.hide)}}function y(t){return function(n){return e.Simpplr.Loader.show(),e.Simpplr.Salesforce.ServiceNow.getAccessToken().done((function(e){return t(e.result)})).fail((function(e){var t=Object(u.a)(e);n(Object(l.f)(t))})).always(e.Simpplr.Loader.hide)}}function w(t,n,a,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return function(o){return o(Object(c.upload)(t,!1,i,m({endpoint:e.Simpplr.Salesforce.ServiceNow.upload,getAdditionalParams:function(){return[a,r]}},n)))}}function O(){return function(t){return e.Simpplr.Loader.show(),e.Simpplr.Salesforce.ServiceNow.revokeAccessToken().done((function(){t(Object(l.j)(Object(d.a)("servicenow_tickets.new_ticket_modal.success_flash")))})).fail((function(e){var n=Object(u.a)(e);t(Object(l.f)(n))})).always(e.Simpplr.Loader.hide)}}}).call(this,n(27))},3e3:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s}));var a=n(4),r=n.n(a),i=n(19),o=Object(i.a)([function(e){return e.get("serviceNowTickets")||new r.a.Map}],(function(e){return e.map((function(e){return e.get("result")}))})),c=Object(i.a)([o,function(e,t){return new r.a.List(t)}],(function(e,t){return t.map((function(t){return e.get(t)})).filter((function(e){return!!e}))})),l=Object(i.a)([function(e){return e.getIn(["serviceNowTickets","categories"],new r.a.Map)}],(function(e){return{loaded:e.get("loaded",!1),loading:e.get("loading",!1),result:e.get("results",new r.a.List)}})),s=Object(i.a)([function(e){return e.getIn(["serviceNowTickets","subCategories"],new r.a.Map)}],(function(e){return{loaded:e.get("loaded",!1),loading:e.get("loading",!1),result:e.get("results",new r.a.List)}}))},3741:function(e,t,n){"use strict";(function(e){var a=n(5),r=n.n(a),i=n(2999),o=n(3e3),c=n(478);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}t.a=function(t){return Object(c.a)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({endpoint:e.Simpplr.Salesforce.ServiceNow.getIncidents,itemActionCreator:i.f,itemSelector:o.c,itemName:"tickets"},t))}}).call(this,n(27))},381:function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(0),o=n.n(i),c=n(69),l=n.n(c),s=n(151),u=n(66),d=n(32);function p(e){var t=e.name,n=e.item,a=e.children,r=e.width,i=e.textAlign,c=e.hasExtraPadding,l=e.hasSmallPadding,p=e.hasTextTruncate,m=e.formatAs,f=e.whiteSpaceNormal,b=null;if(a)b=a(n);else{var g=Array.isArray(t)?t:t.split(".");b=n.getIn(g),"date"===m?b=Object(d.e)(b,Object(d.o)(u.b)):"dateTime"===m&&(b=Object(d.e)(b,Object(d.o)(u.g)))}return o.a.createElement(s.a,{width:r,textAlign:i,hasExtraPadding:c,hasSmallPadding:l,hasTextTruncate:p,whiteSpaceNormal:f},b)}p.propTypes={width:r.a.oneOfType([r.a.string,r.a.number]),name:r.a.string,children:r.a.func,item:r.a.oneOfType([l.a.iterable,r.a.shape({})]),textAlign:s.a.propTypes.textAlign,hasExtraPadding:s.a.propTypes.hasExtraPadding,whiteSpaceNormal:s.a.propTypes.whiteSpaceNormal,hasSmallPadding:s.a.propTypes.hasSmallPadding,hasTextTruncate:s.a.propTypes.hasTextTruncate,formatAs:r.a.oneOf(["date","dateTime"])},p.defaultProps={width:null},t.a=p},4088:function(e,t,n){"use strict";n.r(t);var a=n(16),r=n.n(a),i=n(10),o=n.n(i),c=n(11),l=n.n(c),s=n(7),u=n.n(s),d=n(12),p=n.n(d),m=n(13),f=n.n(m),b=n(8),g=n.n(b),h=n(5),v=n.n(h),y=n(0),w=n.n(y),O=n(18),E=n(94),N=n(1020),S=n(190),j=n(4),k=n.n(j),_=n(15),F=n.n(_),C=n(1),T=n.n(C),x=n(241),P=n(55),A=n(381),I=n(972),R=n(215),L=n(411),D=n(66),M=n(32),B=n(3),z=n(74);function U(e){var t=e.ticketingSystemName,n=e.onOpenServiceNowNewTicketModal,a=e.isServiceNowTicketCreationEnabled;return w.a.createElement("div",{className:"u-textCenter u-marg-b--large u-pad-t--medium"},w.a.createElement("h4",{className:"type--h5 type--500 u-marg-b--small"},Object(B.a)("servicenow_tickets.empty_label",{ticketingSystemName:t})),a&&w.a.createElement(w.a.Fragment,null,w.a.createElement("p",{className:"u-marg-b--medium"},Object(B.a)("servicenow_tickets.empty_text",{ticketingSystemName:t})),w.a.createElement(P.a,{label:Object(B.a)("servicenow_tickets.index.new_ticket_button.label"),appearance:"brand",size:"large",onClick:n})))}function V(e){var t=e.isSingleLineDesc,n=e.tickets,a=e.isLoading,r=e.canPaginate,i=e.onLoadMore,o=e.ticketingSystemName,c=e.onOpenServiceNowNewTicketModal,l=e.isServiceNowTicketCreationEnabled;function s(e){var t=e.get("url");return t&&Object(z.a)(t)}var u=F()({"type--h6":!0,"type--500":!0,"u-lineHeight--1p5":!0,"u-textTruncate":t,"u-whiteSpaceNormal":!t,"Table-cell--desc":!0});return a?w.a.createElement(R.a,null):n.size?w.a.createElement(w.a.Fragment,null,w.a.createElement(I.a,{data:n,isFontInherit:!0},w.a.createElement(A.a,{label:Object(B.a)("common.description"),width:"55%",hasExtraPadding:!0},(function(e){var t=e.get("title"),n=s(e);return t&&w.a.createElement("h2",{className:u},n?w.a.createElement("a",{href:n,className:"type--title"},t):t," ",e.get("isNew")&&w.a.createElement(L.a,{text:Object(B.a)("common.new"),isBrand:!0}))})),w.a.createElement(A.a,{label:Object(B.a)("listing.heading.id"),width:"25%"},(function(e){var t=e.get("id"),n=s(e);return t&&(n?w.a.createElement("a",{href:n,className:"type--title type--400"},t):t)})),w.a.createElement(A.a,{label:Object(B.a)("listing.heading.status"),width:"100px",textAlign:"center"},(function(e){return e.get("status")})),w.a.createElement(A.a,{label:Object(B.a)("common.last_updated"),width:"112px",textAlign:"right"},(function(e){return Object(M.j)(e.get("modifiedAt")).format(D.b)}))),w.a.createElement(x.a,{canLoad:r,onLoad:i,isLoading:a})):w.a.createElement(U,{ticketingSystemName:o,onOpenServiceNowNewTicketModal:c,isServiceNowTicketCreationEnabled:l})}V.propTypes={ticketingSystemName:T.a.string.isRequired,tickets:T.a.instanceOf(k.a.List),isLoading:T.a.bool,canPaginate:T.a.bool,isSingleLineDesc:T.a.bool,onLoadMore:T.a.func,onOpenServiceNowNewTicketModal:T.a.func},V.defaultProps={isSingleLineDesc:!0};var q=V,W=n(31),Q=n.n(W),G=n(81),J=n(37),H=n(2999),K=n(2721),X=n(245),Y=n(656),Z=n(1006),$=n(117),ee=n(52),te=n(113);function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var ae=function(e){var t=e.instanceId;return function(e){var n=function(n){p()(i,n);var a=ne(i);function i(){var e;o()(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=a.call.apply(a,[this].concat(n)),v()(u()(e),"state",{selectedFileIds:new k.a.List}),v()(u()(e),"onSelectFile",(function(t){Array.isArray(t)?e.setState((function(e){return{selectedFileIds:e.selectedFileIds.concat(t)}})):e.setState((function(e){return{selectedFileIds:e.selectedFileIds.push(t)}}))})),v()(u()(e),"onReplaceFile",(function(t,n){var a=e.state.selectedFileIds;e.setState({selectedFileIds:a.set(a.indexOf(t),n)})})),v()(u()(e),"onRemoveFile",(function(t){e.setState((function(e){return{selectedFileIds:e.selectedFileIds.remove(e.selectedFileIds.indexOf(t))}}))})),e}return l()(i,[{key:"render",value:function(){var n=this.state.selectedFileIds;return w.a.createElement(e,r()({},this.props,{instanceId:t,selectedIds:n,onSelect:this.onSelectFile,onReplace:this.onReplaceFile,onRemove:this.onRemoveFile}))}}]),i}(w.a.Component);return n.displayName="WithFileSelection(".concat(function(e){return e.displayName||e.name||"Component"}(e),")"),n}},re=n(3e3),ie=n(47),oe=n(658);function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var le="SERVICENOW_NEW_TICKET",se=function(e){var t=e;return e.get("category")&&(t=t.set("category",t.get("category").value)),t.merge({impact:parseInt(e.get("impact"),10),urgency:parseInt(e.get("urgency"),10)})},ue=function(e){p()(n,e);var t=ce(n);function n(){var e;o()(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),v()(u()(e),"dropzoneRef",w.a.createRef()),v()(u()(e),"state",{files:[]}),v()(u()(e),"handleCategoryChange",(function(t){null===t?e.props.change("subCategory",null):(e.props.change("subCategory",null),e.props.loadNewTicketSubCategories(t.value))})),v()(u()(e),"onSelectPendingFile",(function(t,n){e.setState((function(e){return{files:e.files.concat({file:t,fileId:n})}}),(function(){return e.props.change("filesCount",e.state.files.length)}))})),v()(u()(e),"onSubmit",(function(t){return new Promise((function(n){var a=e.props.close,r=se(t);e.props.createNewTicket(r,(function(t){e.props.getAccessToken((function(r){e.props.uploadPendingFiles(e.state.files,t,r).then((function(){n(),a()}))}))}))}))})),e}return l()(n,[{key:"componentDidMount",value:function(){(0,this.props.loadNewTicketCategories)()}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.selectedIds,n=e.onRemove;t.forEach((function(e){return n(e)}))}},{key:"render",value:function(){var e=this.props,t=e.close,n=e.handleSubmit,a=e.invalid,r=e.submitting,i=e.category,o=e.isCategoriesLoading,c=e.isSubCategoriesLoading,l=e.subCategories.result,s=e.options,u=e.instanceId,d=e.selectedIds,p=e.onSelect,m=e.onReplace,f=e.onRemove,b=l.size>0;return w.a.createElement("form",{className:"ServiceNowNewTicketForm",onSubmit:n(this.onSubmit)},w.a.createElement("div",{className:"Modal-content Modal-content--forms"},w.a.createElement("div",{className:"row collapse u-marg-b--medium"},w.a.createElement("div",{className:"column large-12"},w.a.createElement("p",{className:"u-marg-b--small type--500 type--h6"},Object(B.a)("servicenow_tickets.create_new_ticket.impact.label")),w.a.createElement(J.Field,{component:Y.a,name:"impact",options:s,hasLargeIcons:!0,isFullWidth:!0}))),w.a.createElement("div",{className:"row collapse u-marg-b--medium"},w.a.createElement("div",{className:"column large-12"},w.a.createElement("p",{className:"u-marg-b--small type--500 type--h6"},Object(B.a)("servicenow_tickets.create_new_ticket.urgency.label")),w.a.createElement(J.Field,{component:Y.a,name:"urgency",options:s,hasLargeIcons:!0,isFullWidth:!0}))),w.a.createElement("div",{className:"row collapse u-marg-b--medium"},w.a.createElement("div",{className:"column large-12"},w.a.createElement(J.Field,{component:$.a,name:"title",id:"title",placeholder:Object(B.a)("servicenow_tickets.create_new_ticket.title_message"),label:Object(B.a)("servicenow_tickets.create_new_ticket.title.label"),validate:ie.E,isRequired:!0,hasLabelAbove:!0,hasNoInternalLabel:!0}))),w.a.createElement("div",{className:"row collapse u-marg-b--medium"},w.a.createElement("div",{className:"column large-12"},w.a.createElement("p",{className:"u-marg-b--small type--500 type--h6"},Object(B.a)("servicenow_tickets.create_new_ticket.description.label")),w.a.createElement("div",{className:"u-border u-borderRadius--2"},w.a.createElement(J.Field,{component:X.a,name:"description",id:"description",hasLabelAbove:!0,hasNoInternalLabel:!0,placeholder:Object(B.a)("servicenow_tickets.create_new_ticket.issue_description")}),w.a.createElement("div",{className:"u-border-top"},w.a.createElement(K.a,{dropzoneRef:this.dropzoneRef,instanceId:u,selectedIds:d,onSelect:p,onReplace:m,onRemove:f,onSelectPendingFile:this.onSelectPendingFile,maxFiles:10,showPreviews:!0,isPendingUpload:!0,allowExternalFileOptions:!1,hasIntranetOption:!1,customAddMessage:w.a.createElement("span",{className:"type--500"},Object(B.a)("dropzone.drop_type_photo_and_file_or")),isSmall:!0,icon:"attachment"}))))),w.a.createElement("div",{className:"row collapse u-marg-b--medium"},w.a.createElement("div",{className:"column large-6"},w.a.createElement(J.Field,{label:Object(B.a)("servicenow_tickets.create_new_ticket.category.label"),component:Z.a,name:"category",options:Q()(this.props.categories.result.toJS()),placeholder:Object(B.a)("common.select_placeholder"),hasLabelAbove:!0,hasClearButton:!0,isDisabled:o,onChange:this.handleCategoryChange,isValueModel:!0})),w.a.createElement("div",{className:"column large-6"},w.a.createElement("div",{className:"u-marg-l--medium"},w.a.createElement(J.Field,{label:Object(B.a)("servicenow_tickets.create_new_ticket.sub_category.label"),component:Z.a,name:"subCategory",options:Q()(this.props.subCategories.result.map((function(e){return{value:e.get("name"),label:e.get("name")}})).toArray()),placeholder:Object(B.a)("common.select_placeholder"),hasLabelAbove:!0,hasClearButton:!0,isDisabled:c||!i||!b}))))),w.a.createElement("div",{className:"Strip Strip--modal"},w.a.createElement(P.a,{size:"large",type:"button",label:Object(B.a)("button_label.cancel"),onClick:t}),w.a.createElement(P.a,{size:"large",type:"submit",label:Object(B.a)("button_label.create_ticket"),disabled:a||r,appearance:"brand"})))}}]),n}(G.b);var de=Object(J.formValueSelector)(le);var pe=Object(O.connect)((function(e){var t=[{label:Object(B.a)("servicenow_tickets.create_new_ticket.urgency_low"),value:"3"},{label:Object(B.a)("servicenow_tickets.create_new_ticket.urgency_medium"),value:"2"},{label:Object(B.a)("servicenow_tickets.create_new_ticket.urgency_high"),value:"1"}],n=de(e,"category"),a=Object(re.a)(e),r=Object(re.b)(e);return{category:n,categories:a,subCategories:r,isCategoriesLoading:a.loading,isSubCategoriesLoading:r.loading,options:t,initialValues:new k.a.Map({impact:"3",urgency:"3",filesCount:0})}}),(function(e,t){return{loadNewTicketCategories:function(){return e(Object(H.c)())},loadNewTicketSubCategories:function(t){return e(Object(H.d)(t))},createNewTicket:function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e(Object(H.a)(n.toJS(),a)).then(t.prependId)},getAccessToken:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e(Object(H.b)(t))},uploadPendingFiles:function(n,a,r){var i=n.map((function(n){var i=n.file,o=n.fileId;return Object(oe.a)(t.instanceId,new Promise((function(n){return e(Object(H.g)(i,{getTempId:function(){return o}},a,r)).then((function(e){var a=e.id;e.jqXhr.then((function(e){t.onReplace(a,e.get("id")),n()})).catch(n)}))})))}));return Promise.all(i).then((function(){e(Object(H.e)())}))}}}))(Object(te.a)((function(e){return{name:ee.Ob,classes:["Modal--small"],id:e.id,title:Object(B.a)("servicenow_tickets.new_ticket_modal.title")}}))(Object(J.reduxForm)({form:le})(ue))),me=ae({instanceId:"servicenow-new-ticket"})(pe),fe=n(3741),be=n(69),ge=n.n(be),he=n(2589),ve=n(849),ye=n(655);function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var Oe=function(e){p()(n,e);var t=we(n);function n(){var e;o()(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),v()(u()(e),"handleSortChange",(function(t){var n=t;t&&t.preventDefault&&(t.preventDefault(),n=t.currentTarget.value),e.props.onFilterChange({sortBy:n})})),e}return l()(n,[{key:"render",value:function(){var e=this.props.params;return w.a.createElement(he.a,{sortField:w.a.createElement(ve.a,{component:ye.a,value:e.get("sortBy"),name:"sortBy",label:Object(B.a)("common.sort_by"),options:[{value:"lastUpdatedNewest",label:Object(B.a)("sort_by.lastUpdatedNewest")},{value:"lastUpdatedOldest",label:Object(B.a)("sort_by.lastUpdatedOldest")},{value:"descriptionAsc",label:Object(B.a)("sort_by.descriptionAsc")},{value:"descriptionDesc",label:Object(B.a)("sort_by.descriptionDesc")},{value:"statusAsc",label:Object(B.a)("sort_by.statusAsc")},{value:"statusDesc",label:Object(B.a)("sort_by.statusDesc")}],onChange:this.handleSortChange})})}}]),n}(w.a.Component);v()(Oe,"propTypes",{onFilterChange:T.a.func.isRequired,params:ge.a.map.isRequired});var Ee=function(e){var t=e.ticketingSystemName,n=e.connectLink,a=e.onOpenServiceNowNewTicketModal,r=e.isServiceNowTicketCreationEnabled,i=Object(fe.a)({initialParams:new k.a.Map({sortBy:"lastUpdatedNewest"})}),o=i.loading,c=i.tickets,l=i.loadMore,s=i.canPaginate,u=i.params,d=i.setParams,p=i.prependId,m=c.size>0;return w.a.createElement("div",{className:"ServiceNow-ticketListing"},m&&w.a.createElement(Oe,{params:u,onFilterChange:d}),w.a.createElement(q,{ticketingSystemName:t,connectLink:n,tickets:c,params:u,isLoading:o,canPaginate:s,onLoadMore:l,onOpenServiceNowNewTicketModal:a,isServiceNowTicketCreationEnabled:r}),w.a.createElement(me,{id:"serviceNowNewTicket",prependId:p}))},Ne=n(1001),Se=n(2600),je=n(50),ke=n(30),_e=n(17);function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return f()(this,n)}}var Ce="".concat(je.b,"/servicenow-logo.png"),Te=function(e){p()(n,e);var t=Fe(n);function n(){var e;o()(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),v()(u()(e),"openServiceNowNewTicketModal",(function(){e.props.openServiceNowNewTicketModal()})),e}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.connectLink,n=e.hasConnectedServiceNowAccount,a=e.ticketingSystemName,i=e.hasCustomTicketingSystem,o=e.isServiceNowEnabled,c=e.isServiceNowTicketCreationEnabled,l=e.isServiceNowTicketEnabled,s=i?a:Object(B.a)("file.provider.servicenow"),u=w.a.createElement(P.a,{appearance:"brand",label:Object(B.a)("servicenow_tickets.index.new_ticket_button.label"),onClick:this.openServiceNowNewTicketModal}),d=w.a.createElement("div",{className:"u-textCenter u-marg-b--large InfoBox-serviceNowConnect"},w.a.createElement(Ne.a,{type:"neutral"},!i&&w.a.createElement("img",{src:Ce,className:"u-marg-lr--auto u-marg-t--mediumlarge u-marg-b--medium u-displayBlock serviceNowImg",alt:""}),w.a.createElement("h4",{className:"type--500 u-marg-b--small"},Object(B.a)("servicenow_infobox.connect_heading.text_label",{provider:s})),w.a.createElement("p",{className:"u-marg-b--medium"},Object(B.a)("connect_account.infobox.description",{provider:a})),w.a.createElement(P.a,{label:Object(B.a)("common.connect"),appearance:"brand",size:"large",onClick:function(){window.location=t}})));return w.a.createElement("div",null,w.a.createElement(Se.a,null),w.a.createElement(S.a,{name:"ServiceNow",text:a},w.a.createElement("div",{className:"row"},w.a.createElement("div",{className:"column"},w.a.createElement("div",{className:"Page"},o&&l?w.a.createElement(w.a.Fragment,null,w.a.createElement("header",{className:"Page-header"},w.a.createElement("div",{className:"Page-header-inner Page-header-inner--noTabsWithButton"},w.a.createElement("h1",{className:"Page-heading type--h4 type--500 u-floatNone"},a),n&&c&&w.a.createElement("div",{className:"Page-buttonContainer u-floatRight"},u))),n?w.a.createElement(Ee,r()({ticketingSystemName:a,connectLink:t,onOpenServiceNowNewTicketModal:this.openServiceNowNewTicketModal},this.props)):d):w.a.createElement(N.a,null))))))}}]),n}(w.a.Component);t.default=Object(O.connect)((function(e){var t=Object(ke.hasConnectedServiceNowAccount)(e),n=encodeURIComponent("&retURL=".concat(window.location.href));return{hasConnectedServiceNowAccount:t,connectLink:"".concat(Object(_e.q)(e,"connectServicenowAccount")).concat(n),ticketingSystemName:Object(_e.x)(e)||Object(B.a)("user_panel.service_now_tickets"),hasCustomTicketingSystem:Object(_e.Q)(e,"servicenow_ticketing_system"),isServiceNowEnabled:Object(_e.Q)(e,"servicenow"),isServiceNowTicketCreationEnabled:Object(_e.Q)(e,"isServiceNowTicketCreationEnabled"),isServiceNowTicketEnabled:Object(_e.Q)(e,"isServiceNowTicketEnabled")}}),(function(e){return{openServiceNowNewTicketModal:function(){return e(Object(E.open)(ee.Ob,"serviceNowNewTicket"))}}}))(Te)},972:function(e,t,n){"use strict";var a=n(10),r=n.n(a),i=n(11),o=n.n(i),c=n(12),l=n.n(c),s=n(13),u=n.n(s),d=n(8),p=n.n(d),m=n(4),f=n.n(m),b=n(1),g=n.n(b),h=n(0),v=n.n(h),y=n(69),w=n.n(y),O=n(81),E=n(151),N=n(267),S=n(285);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var k=function(e,t){return e.get?e.get(t):e[t]},_=function(e){l()(n,e);var t=j(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.children,a=e.hasNoLastBorder,r=e.isFontInherit,i=e.hAlignment,o=e.vAlignment,c=e.noResultMessage,l=e.keyName,s=v.a.Children.toArray(n).filter((function(e){return!!e})),u=v.a.createElement(N.a,null,s.map((function(e,t){return v.a.createElement(E.a,{key:e.props.name||e.props.label||t,width:e.props.width,textAlign:e.props.textAlign,hasExtraPadding:e.props.hasExtraPadding},e.props.label)})));return v.a.createElement(S.a,{header:u,hasNoLastBorder:a,isFontInherit:r,hAlignment:i,vAlignment:o,noResultMessage:c},t.map((function(e,t){return v.a.createElement(N.a,{key:l?k(e,l):t,testId:"dataGridRow"},s.map((function(t,n){return v.a.cloneElement(t,{item:e,key:t.props.name||t.props.label||n})})))})))}}]),n}(O.b);_.propTypes={children:g.a.node.isRequired,data:g.a.oneOfType([w.a.list,g.a.arrayOf(g.a.shape({}))]),hasNoLastBorder:g.a.bool,isFontInherit:g.a.bool,hAlignment:g.a.oneOf(["left","center","right"]),vAlignment:g.a.oneOf(["top","bottom","middle"]),noResultMessage:g.a.string,keyName:g.a.string.isRequired},_.defaultProps={data:new f.a.List,hasNoLastBorder:!1,isFontInherit:!1,hAlignment:"left",vAlignment:"top",noResultMessage:""},t.a=_}}]);